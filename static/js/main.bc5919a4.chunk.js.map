{"version":3,"sources":["inputs/TextInput.js","inputs/NumberInput.js","api/DateTime.js","inputs/DateTimeInput.js","inputs/TextAreaInput.js","ui/InitForm.js","api/TeamParams.js","api/SessionTypes.js","api/SessionParams.js","scheduling/Instance.js","api/PageFormat.js","scheduling/utilities.js","api/EventParams.js","inputs/BooleanInput.js","ui/BasicsForm.js","ui/SessionForm.js","inputs/TeamList.js","ui/DetailView.js","ui/TopBar.js","scheduling/Scheduler.js","ui/DayScheduleView.js","ui/SingleScheduleView.js","ui/IndivScheduleView.js","inputs/VolunteerInput.js","ui/VolunteerView.js","ui/SponsorView.js","templates/PdfDoc.js","outputs/SessionOutputs.js","outputs/TeamOutputs.js","outputs/SignOutputs.js","outputs/DataOutputs.js","outputs/VolunteerOutputs.js","templates/PptPres.js","outputs/PresentationOutput.js","outputs/Zipper.js","outputs/SingleOutput.js","ui/OutputGenView.js","ui/FullScheduleView.js","App.js","registerServiceWorker.js","index.js"],"names":["TextInput","props","handleChange","bind","uniqueId","enableUniqueIds","event","val","target","value","this","onChange","row","hidden","nolabel","sm","large","for","nextUniqueId","label","type","id","lastUniqueId","React","Component","NumberInput","Number","parseInt","min","step","max","DateTime","mins","days","x","d","Math","floor","h","m","zh","zm","length","inc","_mins","displayTime","res","split","dayIdx","justTime","_days","includes","indexOf","o","_class","DateTimeInput","handleTimeChange","handleDateChange","buildInput","time","day","name","map","idx","key","pattern","timeValue","immutable","TextAreaInput","style","width","rows","placeholder","InitForm","state","grid","getDataGrid","updateTitle","updateNTeams","updateNTables","updateStartTime","updateEndTime","updateNDays","updateDays","updatePilot","updateTeamNames","updateNPracs","i","push","readOnly","newTitle","data","title","newN","nTeams","nPracs","newTime","startTime","endTime","changes","forEach","cell","col","setState","A","S","E","nDays","nTables","pilot","e","tempNames","onSubmit","handleSubmit","valueRenderer","sheetRenderer","className","children","onCellsChanged","TeamParams","number","affiliation","pitNum","extraTime","excludeJudging","isSurrogate","schedule","_name","replace","_number","T","SessionType","uid","priority","defaultTitle","defaultLocs","fillerPolicy","POLICIES","blank","_priority","_defaultTitle","_fillerPolicy","_defaultLocs","console","log","V","Object","values","TYPES","v","surrogates","JUDGING","INSPECTION","MATCH_ROUND","MATCH_ROUND_PRACTICE","MATCH_FILLER","MATCH_FILLER_PRACTICE","BREAK","SessionParams","nLocs","noPractice","_id","_type","_noprac","locations","universal","actualStartTime","clone","actualEndTime","nSims","len","buf","overlap","errors","instances","extraTimeFirst","extraTimeEvery","appliesTo","usesSurrogates","_locations","pop","_schedule","_nSims","_startTime","_actualStartTime","_endTime","_actualEndTime","_len","_overlap","_buf","_errors","_instances","_extraTimeFirst","_extraTimeEvery","_universal","_appliesTo","_usesSurrogates","Instance","session_id","num","teams","loc","standins","extra","I","PageFormat","_header","logoTopLeft","logoTopRight","logoBotLeft","logoBotRight","titleFontSize","baseFontSize","footerText","PreComputedImages","header","flllogo","_logoTopLeft","gamelogo","_logoTopRight","mqlogo","_logoBotLeft","firstlogo","_logoBotRight","customLogos","_footer","_baseFontSize","_titleFontSize","shuffle","a","j","random","overlaps","b","hasDone","team","filter","saveToFile_csv","filename","content","file","Blob","window","navigator","msSaveOrOpenBlob","document","createElement","url","URL","createObjectURL","href","download","body","appendChild","click","setTimeout","removeChild","revokeObjectURL","freeze","object","EventParams","thaw","version","_version","uid_counter","sort","minTravel","sessions","consolidatedAwards","awardStyle","AWARD_STYLES","judgesAwards","awards","AWARD_NAMES","sponsors","national","local","nationalSponsors","addNationalSponsor","_volunteers","pageFormat","Infinity","lines","t","savedName","savedNum","savedAffil","savedPit","l","shift","fields","nAwardsNeeded","distances","abs","closestIdx","findIndex","awardStyleIdx","actualStart","actualEnd","ceil","nJudgings","startLunch","endLunch","getSession","nightStart","nightEnd","timeAvailable","s","rdOverlap","rdLen","timePerMatch","matchLen","matchBuf","roundOneLength","roundOneEnd","dif","bufDiff","first","volunteers","buildVolunteerSheet","nJudges","find","numberOfVols","count","per","staff","Volunteers","roles","vol","pdf","session","cols","applyingBreaks","applies","slice","br","instance","colSpan","diff","dummy","getTeam","w","compact","minTravelTime","hadASurrogate","sessionID","filt","newMins","splice","excl","startA","endA","startB","endB","sId","teamA","teamB","iA","iB","canA","canB","canDo","locA","locB","sA","eA","sB","eB","dA","_teams","maxId","_title","_sessions","_awards","_judgesAwards","_consolidatedAwards","_awardStyle","nTrophies","round","_minTravel","_extraTime","_nTables","_display","_pilot","p","BooleanInput","toggleChecked","disabled","color","onClick","BasicsForm","checked","selectedIdx","updateMinTravel","updateExtraTime","updateAwardStyle","toggleAward","updateConsolidatedAwards","updatedAwards","dayInput","cosmetic","advanced","caret","awardPerc","aIdx","substring","SessionForm","updateName","updateLen","updateOverlap","updateBuf","updateNSims","updateNLocs","updateExtraFirst","updateExtraEvery","updateLocs","updateNoprac","handleDelete","alert","onDelete","truth","onToggle","TeamList","toAdd","selectedTeam","modal","toggle","updateCells","deleteTeam","changeToAdd","addTeams","setTeamExclude","setTeamExtra","setTeamStartTime","setTeamEndTime","ev","size","isOpen","buildModal","rowRenderer","DetailView","activeTab","selectedSession","handleScheduleChange","updateSessions","updateTeams","toggleAdvanced","toggleModal","toggleApplies","updateUniversal","deleteSession","addSession","tab","syncLocs","container","include","lg","md","pills","tabId","renderSessions","TopBar","onFileChange","f","files","reader","FileReader","onload","onLoad","result","readAsText","light","expand","alt","src","navbar","nav","inNavbar","data-tip","right","rel","divider","onSave","place","effect","accept","ref","Scheduler","empty","willWork","timeInc","end","tableSession","offset","locOffset","numOffset","locD","now","L","lastNTeams","Array","everyN","extraTimeTeams","roundsSinceExtra","flag","extraRoundsNeeded","extraRoundsMade","extraRounds","whenDone","sortThingsOut","initialFill","swapFill","oneSetOfTeams","fillInstance","k","fixed","evaluate","swapFillSession","lostTeams","instance_A","tA","instance_B","tB","DayScheduleView","getItems","sorted","items","sTime","eTime","contents","break","SingleScheduleView","swapee","select","editable","onSwap","y","renderAsTable","IndivScheduleView","VolunteerInput","handleCountChange","handleNameChange","updateVol","newCount","VolunteerView","toggleEditable","downloadTemplate","deleteVol","importVols","startsWith","SponsorView","addSponsor","deleteSponsor","arr","extension","addLocalSponsor","join","readAsDataURL","deleteLocalSponsor","img","height","pdfMake","vfs","pdfFonts","PdfDoc","format","landscape","_format","imageDict","logo1","logo2","logo3","logo4","styleDict","fontSize","bold","alignment","footer","header2","signTitle","signSubtitle","certTitle","certSubtitle","tablebody","tablehead","breakrow","fillColor","teamEntry","doc","text","margin","background","portraitBackground","pageMargins","pageSize","images","styles","pageOrientation","landscapeBackground","blob","pageBreak","canvas","x1","y1","x2","y2","lineWidth","createPdf","err","message","open","Promise","resolve","reject","getBlob","image","table","widths","fit","layout","_filename","MakeSessionPDF","maxLocs","addContent","headerRows","dontBreakRows","toString","sessionPage","getSessionDataGrid","addPageBreak","chomp","MakeDaySchedulePdf","MakePracticeTableSignupPdf","timeIncPrac","MakeTeamListPDF","MakeAllTeamsPDF","getIndivDataGrid","N","keepWithHeaderRows","curStyle","MakeIndivTeamsPDF","spot","teamPage","MakePitSignsPdf","MakeLocationSignsPdf","MakeAwardCertPdf","F","DrawLine","MakeParticipationCertPdf","MakeScoringSystemCSV","csv","rankingMatches","allRounds","getSessions","TimeToExcel","tmp","allJudging","practiceMatches","allPRounds","MakeVolunteerListPdf","colorDark","MakeSigninPdf","keys","PptPres","logos","pptx","PptxGenJS","setLayout","defineSlideMaster","bkgd","objects","sizing","options","align","fontFace","autoFit","rect","fill","addNewSlide","addText","winner","slide","save","MakeClosingPresentation","nationals","addTitle","addWinner","Zipper","saveFunc","_event","_idx","zipname","funcs","zipPDF","zipCSV","zipSponsors","zipPPT","zip","JSZip","generateAsync","then","saveAs","folder","getBlobPromise","zipAllLogos","ppt","im","uri","base64","SingleOutput","getPDF","getCSV","getSponsors","getPPT","z","DownloadZip","funcNames","OutputGenView","pdf_modal","running","progress","downloadOne","downloadSelected","checkAll","checkNone","updateBaseSize","updateTitleSize","updateFooter","onTLChange","onTRChange","onBLChange","downloadAll","onBRChange","get","toDo","ProcessGiven","FilesLeft","ProcessNext","C","block","check","FullScheduleView","updatePDFSettings","updateVolunteers","updateSponsors","sID","swapTeams","App","display","eventParams","processing","initSchedule","customise","generate","update","initState","buildAllTables","populateFLL","scrollTo","fillAllTables","fname","json_str","JSON","stringify","saveToFile_json","parse","mainWindow","fluid","isLocalhost","Boolean","location","hostname","match","registerValidSW","swUrl","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","catch","error","ReactDOM","render","getElementById","process","origin","addEventListener","fetch","response","status","headers","ready","unregister","reload","checkValidServiceWorker","registerServiceWorker"],"mappings":"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","file":"static/js/main.bc5919a4.chunk.js","sourcesContent":["import React from 'react';\r\n\r\nimport { Input, Col, FormGroup, Label } from 'reactstrap';\r\nimport uniqueId from 'react-html-id';\r\n\r\nexport default class TextInput extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.handleChange = this.handleChange.bind(this);\r\n\r\n    uniqueId.enableUniqueIds(this);\r\n  }\r\n\r\n  handleChange(event) {\r\n    const val = event.target.value;\r\n    this.props.onChange(val);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <FormGroup row>\r\n        <Label\r\n          hidden={this.props.nolabel}\r\n          sm={this.props.large ? 2 : 6}\r\n          for={this.nextUniqueId()}\r\n        >\r\n          {this.props.label}\r\n        </Label>\r\n        <Col sm={this.props.nolabel ? 12 : this.props.large ? 10 : 6}>\r\n          <Input\r\n            type='text'\r\n            id={this.lastUniqueId()}\r\n            value={this.props.value}\r\n            onChange={this.handleChange}\r\n          />\r\n        </Col>\r\n      </FormGroup>\r\n    );\r\n  }\r\n}\r\n","import React from 'react';\r\n\r\nimport { Input, Col, FormGroup, Label } from 'reactstrap';\r\nimport uniqueId from 'react-html-id';\r\n\r\nexport default class NumberInput extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.handleChange = this.handleChange.bind(this);\r\n\r\n    uniqueId.enableUniqueIds(this);\r\n  }\r\n\r\n  handleChange(event) {\r\n    const val = Number.parseInt(event.target.value, 10);\r\n    this.props.onChange(val);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <FormGroup row>\r\n        <Label sm={this.props.large ? 2 : 6} for={this.nextUniqueId()}>\r\n          {this.props.label}\r\n        </Label>\r\n        <Col sm={this.props.large ? 10 : 6}>\r\n          <Input\r\n            type='number'\r\n            min={this.props.min}\r\n            step={this.props.step || 1}\r\n            max={this.props.max}\r\n            id={this.lastUniqueId()}\r\n            value={this.props.value}\r\n            onChange={this.handleChange}\r\n          />\r\n        </Col>\r\n      </FormGroup>\r\n    );\r\n  }\r\n}\r\n","export class DateTime {\r\n  constructor(mins, days = ['Day 1']) {\r\n    this.mins = mins;\r\n    this.days = days;\r\n  }\r\n\r\n  displayTime() {\r\n    if (!this.mins) return '--:--';\r\n    let x = this.mins % (24 * 60);\r\n    let d = Math.floor(this.mins / (24 * 60));\r\n    let h = Math.floor(x / 60);\r\n    let m = x % 60;\r\n    let zh = h < 10 ? '0' : '';\r\n    let zm = m < 10 ? '0' : '';\r\n    return (\r\n      (this.days.length > 1 ? this.days[d] + ' ' : '') + zh + h + ':' + zm + m\r\n    );\r\n  }\r\n\r\n  justDay() {\r\n    let d = Math.floor(this.mins / (24 * 60));\r\n    return this.days[d];\r\n  }\r\n\r\n  justTime() {\r\n    let x = this.mins % (24 * 60);\r\n    let h = Math.floor(x / 60);\r\n    let m = x % 60;\r\n    let zh = h < 10 ? '0' : '';\r\n    let zm = m < 10 ? '0' : '';\r\n    return zh + h + ':' + zm + m;\r\n  }\r\n\r\n  get mins() {\r\n    return this._mins;\r\n  }\r\n\r\n  set mins(value) {\r\n    this._mins = value;\r\n  }\r\n\r\n  get time() {\r\n    return this.displayTime();\r\n  }\r\n\r\n  set time(value) {\r\n    let res = value.split(':');\r\n    this._mins =\r\n      parseInt(res[0], 10) * 60 + parseInt(res[1], 10) + this.dayIdx * 24 * 60;\r\n  }\r\n\r\n  get dayIdx() {\r\n    return Math.floor(this._mins / (24 * 60));\r\n  }\r\n\r\n  get timeValue() {\r\n    return this.justTime();\r\n  }\r\n\r\n  get day() {\r\n    return this._days[this.dayIdx];\r\n  }\r\n\r\n  set day(value) {\r\n    if (this.days.includes(value))\r\n      this.mins =\r\n        (this.mins ? this.mins % (24 * 60) : 0) +\r\n        this.days.indexOf(value) * 24 * 60;\r\n  }\r\n\r\n  get days() {\r\n    return this._days;\r\n  }\r\n\r\n  set days(value) {\r\n    this._days = value;\r\n  }\r\n\r\n  clone(inc = 0) {\r\n    return new DateTime(this.mins + inc, this.days);\r\n  }\r\n\r\n  static freeze(o) {\r\n    return {\r\n      _class: 'DateTime',\r\n      mins: o.mins,\r\n      days: o.days\r\n    };\r\n  }\r\n\r\n  static thaw(o) {\r\n    return new DateTime(o.mins, o.days);\r\n  }\r\n}\r\n","import React from 'react';\r\n\r\nimport { Input, Col, FormGroup, Label } from 'reactstrap';\r\nimport uniqueId from 'react-html-id';\r\n\r\nimport { DateTime } from '../api/DateTime';\r\n\r\nexport default class DateTimeInput extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.handleTimeChange = this.handleTimeChange.bind(this);\r\n    this.handleDateChange = this.handleDateChange.bind(this);\r\n    this.buildInput = this.buildInput.bind(this);\r\n\r\n    uniqueId.enableUniqueIds(this);\r\n  }\r\n\r\n  handleTimeChange(event) {\r\n    let x = this.props.value;\r\n    if (!x) x = new DateTime(0);\r\n    if (event.target.value) x.time = event.target.value;\r\n    this.props.onChange(x);\r\n  }\r\n\r\n  handleDateChange(event) {\r\n    let x = this.props.value;\r\n    x.day = event.target.value;\r\n    this.props.onChange(x);\r\n  }\r\n\r\n  buildInput() {\r\n    if (this.props.value.days.length > 1) {\r\n      return (\r\n        <FormGroup>\r\n          <Input\r\n            type='select'\r\n            name='select'\r\n            onChange={this.handleDateChange}\r\n            value={\r\n              this.props.value.days[\r\n                Math.floor(this.props.value.mins / (24 * 60))\r\n              ]\r\n            }\r\n          >\r\n            {this.props.value.days.map((d, idx) => (\r\n              <option key={idx}>{d}</option>\r\n            ))}\r\n          </Input>\r\n          <Input\r\n            type='time'\r\n            id={this.lastUniqueId()}\r\n            pattern='[0-2][0-9]:[0-5][0-9]'\r\n            step='900'\r\n            value={this.props.value.mins ? this.props.value.timeValue : null}\r\n            onChange={this.handleTimeChange}\r\n          />\r\n        </FormGroup>\r\n      );\r\n    } else {\r\n      return (\r\n        <Input\r\n          type='time'\r\n          id={this.lastUniqueId()}\r\n          pattern='[0-2][0-9]:[0-5][0-9]'\r\n          step='900'\r\n          value={this.props.value.mins ? this.props.value.timeValue : null}\r\n          onChange={this.handleTimeChange}\r\n        />\r\n      );\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <FormGroup row>\r\n        <Label sm={this.props.large ? 2 : 6} for={this.nextUniqueId()}>\r\n          {this.props.label}\r\n        </Label>\r\n        <Col sm={this.props.large ? 10 : 6}>\r\n          {this.props.immutable ? this.props.value.time : this.buildInput()}\r\n        </Col>\r\n      </FormGroup>\r\n    );\r\n  }\r\n}\r\n","import React from 'react';\r\n\r\nimport { Col, FormGroup, Label } from 'reactstrap';\r\nimport uniqueId from 'react-html-id';\r\n\r\nexport default class TextAreaInput extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.handleChange = this.handleChange.bind(this);\r\n\r\n    uniqueId.enableUniqueIds(this);\r\n  }\r\n\r\n  handleChange(event) {\r\n    const val = event.target.value;\r\n    this.props.onChange(val);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <FormGroup row>\r\n        <Label\r\n          hidden={this.props.nolabel}\r\n          sm={this.props.large ? 2 : 6}\r\n          for={this.nextUniqueId()}\r\n        >\r\n          {this.props.label}\r\n        </Label>\r\n        <Col sm={this.props.nolabel ? 12 : this.props.large ? 10 : 6}>\r\n          <textarea\r\n            id={this.lastUniqueId()}\r\n            style={{ width: '100%' }}\r\n            rows={this.props.rows}\r\n            value={this.props.value}\r\n            placeholder={this.props.placeholder}\r\n            onChange={this.handleChange}\r\n          />\r\n        </Col>\r\n      </FormGroup>\r\n    );\r\n  }\r\n}\r\n","import React from 'react';\r\nimport TextInput from '../inputs/TextInput';\r\nimport NumberInput from '../inputs/NumberInput';\r\n//import BooleanInput from '../inputs/BooleanInput';\r\nimport DateTimeInput from '../inputs/DateTimeInput';\r\n\r\nimport {Container, Form, Table} from 'reactstrap';\r\n\r\nimport ReactDataSheet from 'react-datasheet';\r\nimport TextAreaInput from \"../inputs/TextAreaInput\";\r\n\r\nexport default class InitForm extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        // Default values....\r\n        this.state = {\r\n            grid: this.getDataGrid()\r\n        };\r\n\r\n        this.getDataGrid = this.getDataGrid.bind(this);\r\n        this.updateTitle = this.updateTitle.bind(this);\r\n        this.updateNTeams = this.updateNTeams.bind(this);\r\n        this.updateNTables = this.updateNTables.bind(this);\r\n        this.updateStartTime = this.updateStartTime.bind(this);\r\n        this.updateEndTime = this.updateEndTime.bind(this);\r\n        this.updateNDays = this.updateNDays.bind(this);\r\n        this.updateDays = this.updateDays.bind(this);\r\n        this.updatePilot = this.updatePilot.bind(this);\r\n        this.updateTeamNames = this.updateTeamNames.bind(this);\r\n        this.updateNPracs = this.updateNPracs.bind(this);\r\n\r\n        this.handleChange = this.handleChange.bind(this);\r\n    }\r\n\r\n    getDataGrid() {\r\n        let grid = [];\r\n        for (let i = 0; i < this.props.event.days.length; i++) {\r\n            grid.push([]);\r\n            grid[i].push({value: \"Name of Day \" + (i + 1), readOnly: true});\r\n            grid[i].push({value: this.props.event.days[i]});\r\n        }\r\n        return grid;\r\n    }\r\n\r\n    updateTitle(newTitle) {\r\n        let data = this.props.event;\r\n        data.title = newTitle;\r\n        this.handleChange(data);\r\n    }\r\n\r\n    updateNTeams(newN) {\r\n        let data = this.props.event;\r\n        data.nTeams = newN;\r\n        this.handleChange(data);\r\n    }\r\n\r\n    updateNPracs(newN) {\r\n        let data = this.props.event;\r\n        data.nPracs = newN;\r\n        this.handleChange(data);\r\n    }\r\n\r\n    updateStartTime(newTime) {\r\n        let data = this.props.event;\r\n        data.startTime = newTime;\r\n        this.handleChange(data);\r\n    }\r\n\r\n    updateEndTime(newTime) {\r\n        let data = this.props.event;\r\n        data.endTime = newTime;\r\n        this.handleChange(data);\r\n    }\r\n\r\n    updateDays(changes) {\r\n        const grid = this.state.grid.map(row => [...row]);\r\n        changes.forEach(({cell, row, col, value}) => {\r\n            grid[row][col] = {...grid[row][col], value}\r\n        });\r\n        this.setState({grid});\r\n        let A = [];\r\n        for (let i = 0; i < grid.length; i++) {\r\n            A.push(grid[i][1].value);\r\n        }\r\n        let S = this.props.event;\r\n        S.days = A;\r\n        this.props.onChange(S);\r\n    }\r\n\r\n    updateNDays(value) {\r\n        let E = this.props.event;\r\n        E.nDays = value;\r\n        E.endTime.mins = (E.endTime.mins % (24 * 60)) + ((value - 1) * 24 * 60);\r\n        this.setState({grid: this.getDataGrid()});\r\n        this.handleChange(E);\r\n    }\r\n\r\n    updateNTables(value) {\r\n        let E = this.props.event;\r\n        E.nTables = value;\r\n        this.handleChange(E);\r\n    }\r\n\r\n    updatePilot(value) {\r\n        let E = this.props.event;\r\n        E.pilot = value;\r\n        this.handleChange(E);\r\n    }\r\n\r\n    updateTeamNames(e) {\r\n        let E = this.props.event;\r\n        E.tempNames = e;\r\n        this.handleChange(E);\r\n    }\r\n\r\n    handleChange(data) {\r\n        if (this.props.onChange) this.props.onChange(data);\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <Container>\r\n                <Form onSubmit={this.handleSubmit}>\r\n                    <TextInput large label=\"Title: \" value={this.props.event.title} onChange={this.updateTitle}/>\r\n                    <NumberInput large min=\"4\" label=\"Number of teams: \" value={this.props.event.nTeams}\r\n                                 onChange={this.updateNTeams}/>\r\n                    <NumberInput large min=\"2\" step=\"2\" label=\"Number of competition tables: \"\r\n                                 value={this.props.event.nTables} onChange={this.updateNTables}/>\r\n                    <NumberInput large min=\"0\" step=\"1\" label=\"Number of practice rounds: \"\r\n                                 value={this.props.event.nPracs} onChange={this.updateNPracs}/>\r\n                    {/*<BooleanInput label=\"Pilot judging program?\" large value={this.props.event.pilot}\r\n                                  onChange={this.updatePilot}/>*/}\r\n                    <NumberInput label=\"Number of days\" large min={1} value={this.props.event.days.length}\r\n                                 onChange={this.updateNDays}/>\r\n                    <ReactDataSheet\r\n                        data={this.state.grid}\r\n                        valueRenderer={(cell) => cell.value}\r\n                        sheetRenderer={(props) => (\r\n                            <Table className=\"datagrid-custom\">\r\n                                <tbody>\r\n                                {props.children}\r\n                                </tbody>\r\n                            </Table>\r\n                        )}\r\n                        onCellsChanged={(changes) => this.updateDays(changes)}\r\n                    />\r\n                    <DateTimeInput large label=\"Start time: \" value={this.props.event.startTime}\r\n                                   onChange={this.updateStartTime}/>\r\n                    <DateTimeInput large label=\"End time: \" value={this.props.event.endTime}\r\n                                   onChange={this.updateEndTime}/>\r\n                    <TextAreaInput large label=\"Team names:\" rows={10}\r\n                                   placeholder=\"List of teams: (Name) OR (Number,Name) OR (Number,Name,Affiliation) OR (Number,Name,Affiliation,Pit)\"\r\n                                   onChange={this.updateTeamNames}/>\r\n                </Form>\r\n            </Container>\r\n        );\r\n    }\r\n}\r\n","import { DateTime } from './DateTime';\r\n\r\nexport class TeamParams {\r\n  constructor(id, number) {\r\n    this.number = number;\r\n    this.name = 'Team ' + number;\r\n\r\n    // this.id = new ShortUniqueId();\r\n    this.id = id;\r\n\r\n    // So far unused\r\n    this.affiliation = number;\r\n    this.pitNum = number;\r\n    this.extraTime = false;\r\n    this.excludeJudging = false;\r\n    this.startTime = new DateTime(null);\r\n    this.endTime = new DateTime(null);\r\n    this.isSurrogate = false;\r\n    this.schedule = [];\r\n  }\r\n\r\n  get name() {\r\n    return this._name;\r\n  }\r\n\r\n  set name(value) {\r\n    this._name = value.replace(/\\s+/g, ' ');\r\n  }\r\n\r\n  get number() {\r\n    return this._number;\r\n  }\r\n\r\n  set number(value) {\r\n    this._number = value;\r\n  }\r\n\r\n  static freeze(o) {\r\n    return {\r\n      _class: 'TeamParams',\r\n      number: o.number,\r\n      name: o.name,\r\n      id: o.id,\r\n      affiliation: o.affiliation,\r\n      pitNum: o.pitNum,\r\n      extraTime: o.extraTime,\r\n      excludeJudging: o.excludeJudging,\r\n      startTime: o.startTime,\r\n      endTime: o.endTime,\r\n      isSurrogate: o.isSurrogate,\r\n      schedule: o.schedule\r\n    };\r\n  }\r\n\r\n  static thaw(o) {\r\n    let T = new TeamParams(o.id, o.number);\r\n    T.name = o.name;\r\n    T.affiliation = o.affiliation;\r\n    T.pitNum = o.pitNum;\r\n    T.extraTime = o.extraTime;\r\n    T.excludeJudging = o.excludeJudging;\r\n    T.startTime = o.startTime;\r\n    T.endTime = o.endTime;\r\n    T.isSurrogate = o.isSurrogate;\r\n    T.schedule = o.schedule;\r\n    return T;\r\n  }\r\n}\r\n","export class SessionType {\r\n  constructor(\r\n    uid,\r\n    name,\r\n    priority,\r\n    defaultTitle,\r\n    defaultLocs,\r\n    fillerPolicy = POLICIES.blank\r\n  ) {\r\n    this._name = name;\r\n    this._priority = priority;\r\n    this._defaultTitle = defaultTitle;\r\n    this._fillerPolicy = fillerPolicy;\r\n    this._defaultLocs = defaultLocs;\r\n  }\r\n\r\n  get name() {\r\n    return this._name;\r\n  }\r\n\r\n  get priority() {\r\n    return this._priority;\r\n  }\r\n\r\n  get defaultTitle() {\r\n    return this._defaultTitle;\r\n  }\r\n\r\n  get fillerPolicy() {\r\n    return this._fillerPolicy;\r\n  }\r\n\r\n  get defaultLocs() {\r\n    return this._defaultLocs;\r\n  }\r\n\r\n  static freeze(o) {\r\n    return {\r\n      _class: 'SessionType',\r\n      _name: o.name\r\n    };\r\n  }\r\n\r\n  static thaw(o) {\r\n    // console.log(TYPES);\r\n    // console.log(Object.keys(TYPES));\r\n    console.log('Object name:');\r\n    console.log(o._name);\r\n    let V = null;\r\n    Object.values(TYPES).forEach(v => {\r\n      if (o._name === v.name) console.log('MATCH');\r\n      if (o._name === v.name) V = v;\r\n    });\r\n    return V;\r\n  }\r\n}\r\n\r\nexport const POLICIES = { blank: 'Leave blanks', surrogates: 'Use surrogates' };\r\n\r\nexport const TYPES = {\r\n  JUDGING: new SessionType(16, 'Judging', 8, 'Judging', 'Room'),\r\n  INSPECTION: new SessionType(24, 'Inspection', 12, 'Inspection', 'Room'),\r\n  MATCH_ROUND: new SessionType(\r\n    32,\r\n    'Rounds',\r\n    16,\r\n    'Round',\r\n    'Table',\r\n    POLICIES.surrogates\r\n  ),\r\n  MATCH_ROUND_PRACTICE: new SessionType(\r\n    33,\r\n    'Practice Rounds',\r\n    128,\r\n    'Practice Round',\r\n    'Table',\r\n    POLICIES.surrogates\r\n  ),\r\n  MATCH_FILLER: new SessionType(\r\n    48,\r\n    'Matches',\r\n    32,\r\n    'Qualifying Match',\r\n    'Field',\r\n    POLICIES.surrogates\r\n  ),\r\n  MATCH_FILLER_PRACTICE: new SessionType(\r\n    49,\r\n    'Practice Matches',\r\n    129,\r\n    'Practice Match',\r\n    'Field',\r\n    POLICIES.surrogates\r\n  ),\r\n  BREAK: new SessionType(64, 'Breaks', 0, 'Break', 'Everywhere')\r\n};\r\n","import { TYPES } from \"./SessionTypes\";\r\n\r\nexport default class SessionParams {\r\n  constructor(\r\n    uid,\r\n    type,\r\n    name,\r\n    nLocs = 4,\r\n    startTime = null,\r\n    endTime = null,\r\n    noPractice = false\r\n  ) {\r\n    this._id = uid;\r\n    this._type = type;\r\n\r\n    this.name = name ? name : this.type.defaultTitle + \" \" + this._id;\r\n    this._noprac = noPractice;\r\n\r\n    let A = [];\r\n    for (let i = 1; i <= nLocs; i++) A.push(this.type.defaultLocs + \" \" + i);\r\n    this.locations = A;\r\n\r\n    this.universal = false;\r\n\r\n    this.startTime = startTime;\r\n    this.endTime = endTime;\r\n    if (this.startTime) this.actualStartTime = startTime.clone();\r\n    if (this.endTime) this.actualEndTime = endTime.clone();\r\n\r\n    this.nSims = this.locations.length;\r\n    this.len = 30;\r\n    this.buf = 10;\r\n    this.overlap = 0;\r\n\r\n    this.schedule = []; // To be filled in later\r\n    this.errors = 0;\r\n\r\n    this.instances = 1; // Can be changed in later versions, specifically for TYPE_MATCH_FILLER.\r\n    this.extraTimeFirst = false; // Should the first round be a little longer?\r\n    this.extraTimeEvery = 0; // Extra time every N round\r\n    this.appliesTo = []; // Which sessions a break applies to\r\n    this.usesSurrogates = false;\r\n  }\r\n\r\n  // These are immutable\r\n  get type() {\r\n    return this._type;\r\n  }\r\n\r\n  get id() {\r\n    return this._id;\r\n  }\r\n\r\n  get name() {\r\n    return this._name;\r\n  }\r\n\r\n  set name(value) {\r\n    this._name = value;\r\n  }\r\n\r\n  get nLocs() {\r\n    return this._locations.length;\r\n  }\r\n\r\n  set nLocs(value) {\r\n    while (this.nLocs < value)\r\n      this._locations.push(this.type.defaultLocs + \" \" + (this.nLocs + 1));\r\n    while (this.nLocs > value) this._locations.pop();\r\n    if (this.type === TYPES.JUDGING) this.nSims = this.nLocs;\r\n  }\r\n\r\n  get locations() {\r\n    return this._locations;\r\n  }\r\n\r\n  set locations(value) {\r\n    this._locations = value;\r\n  }\r\n\r\n  get schedule() {\r\n    return this._schedule;\r\n  }\r\n\r\n  set schedule(value) {\r\n    this._schedule = value;\r\n  }\r\n\r\n  get nSims() {\r\n    return this._nSims;\r\n  }\r\n\r\n  set nSims(value) {\r\n    this._nSims = value;\r\n  }\r\n\r\n  get startTime() {\r\n    return this._startTime;\r\n  }\r\n\r\n  // TODO clone value here so we don't have to everywhere else.\r\n  set startTime(value) {\r\n    this._startTime = value;\r\n    if (value) this._actualStartTime = value.clone();\r\n  }\r\n\r\n  get endTime() {\r\n    return this._endTime;\r\n  }\r\n\r\n  set endTime(value) {\r\n    this._endTime = value;\r\n  }\r\n\r\n  get actualEndTime() {\r\n    if (this.type === TYPES.BREAK) return this._endTime;\r\n    return this._actualEndTime;\r\n  }\r\n\r\n  set actualEndTime(value) {\r\n    this._actualEndTime = value;\r\n  }\r\n\r\n  get actualStartTime() {\r\n    if (this.type === TYPES.BREAK) return this._startTime;\r\n    return this._actualStartTime;\r\n  }\r\n\r\n  set actualStartTime(value) {\r\n    this._actualStartTime = value;\r\n  }\r\n\r\n  get len() {\r\n    return this._type === TYPES.BREAK ? 0 : this._len;\r\n  }\r\n\r\n  set len(value) {\r\n    this._len = value;\r\n  }\r\n\r\n  get overlap() {\r\n    return this._overlap;\r\n  }\r\n\r\n  set overlap(value) {\r\n    if (value >= 0) this._overlap = value;\r\n  }\r\n\r\n  get buf() {\r\n    return this._type === TYPES.BREAK\r\n      ? this.endTime.mins - this.startTime.mins\r\n      : this._buf;\r\n  }\r\n\r\n  set buf(value) {\r\n    this._buf = value;\r\n  }\r\n\r\n  get errors() {\r\n    return this._errors;\r\n  }\r\n\r\n  set errors(value) {\r\n    this._errors = value;\r\n  }\r\n\r\n  get instances() {\r\n    return this._instances;\r\n  }\r\n\r\n  set instances(value) {\r\n    this._instances = value;\r\n  }\r\n\r\n  get extraTimeFirst() {\r\n    return this._extraTimeFirst;\r\n  }\r\n\r\n  set extraTimeFirst(value) {\r\n    this._extraTimeFirst = value;\r\n  }\r\n\r\n  get extraTimeEvery() {\r\n    return this._extraTimeEvery;\r\n  }\r\n\r\n  set extraTimeEvery(value) {\r\n    this._extraTimeEvery = value;\r\n  }\r\n\r\n  get universal() {\r\n    return this._universal;\r\n  }\r\n\r\n  set universal(value) {\r\n    this._universal = value;\r\n  }\r\n\r\n  get appliesTo() {\r\n    return this._appliesTo;\r\n  }\r\n\r\n  set appliesTo(value) {\r\n    this._appliesTo = value;\r\n  }\r\n\r\n  get noPractice() {\r\n    return this._noprac;\r\n  }\r\n\r\n  set noPractice(value) {\r\n    this._noprac = value;\r\n  }\r\n\r\n  // Does this session apply to id?\r\n  applies(id) {\r\n    if (this.universal) return true;\r\n    else return this.appliesTo.includes(id);\r\n  }\r\n\r\n  get usesSurrogates() {\r\n    return this._usesSurrogates;\r\n  }\r\n\r\n  set usesSurrogates(value) {\r\n    this._usesSurrogates = value;\r\n  }\r\n\r\n  static freeze(o) {\r\n    return {\r\n      _class: \"SessionParams\",\r\n      _id: o._id,\r\n      _type: o._type,\r\n      _name: o._name,\r\n      _locations: o._locations,\r\n      _universal: o._universal,\r\n      _startTime: o._startTime,\r\n      _endTime: o._endTime,\r\n      _actualStartTime: o._actualStartTime,\r\n      _actualEndTime: o._actualEndTime,\r\n      _nSims: o._nSims,\r\n      _len: o._len,\r\n      _buf: o._buf,\r\n      _overlap: o._overlap,\r\n      _schedule: o._schedule,\r\n      _errors: o._errors,\r\n      _instances: o._instances,\r\n      _extraTimeFirst: o._extraTimeFirst,\r\n      _extraTimeEvery: o._extraTimeEvery,\r\n      _appliesTo: o._appliesTo,\r\n      _noprac: o._noprac,\r\n      _usesSurrogates: o._usesSurrogates,\r\n    };\r\n  }\r\n\r\n  static thaw(o) {\r\n    let S = new SessionParams(o._id, o._type, o._name);\r\n    S._locations = o._locations;\r\n    S._universal = o._universal;\r\n    S._startTime = o._startTime;\r\n    S._endTime = o._endTime;\r\n    if (S._endTime.mins === null && o._actualEndTime.mins === null)\r\n      S._endTime = S._startTime.clone(30);\r\n    else if (S._endTime.mins === null) {\r\n      S._endTime = o._actualEndTime.clone();\r\n    }\r\n    S._actualStartTime = o._actualStartTime;\r\n    S._actualEndTime = o._actualEndTime;\r\n    S._nSims = o._nSims;\r\n    S._len = o._len;\r\n    S._buf = o._buf;\r\n    S._overlap = o._overlap;\r\n    if (typeof o._overlap === \"undefined\") S._overlap = 0;\r\n    S._schedule = o._schedule;\r\n    S._errors = o._errors;\r\n    S._instances = o._instances;\r\n    S._extraTimeFirst = o._extraTimeFirst;\r\n    S._extraTimeEvery = o._extraTimeEvery;\r\n    S._appliesTo = o._appliesTo;\r\n    S._noprac = o._noprac;\r\n    S._usesSurrogates = o._usesSurrogates;\r\n    return S;\r\n  }\r\n}\r\n","/**\r\n num: Count of instance\r\n time: Time (mins) of instance\r\n teams: List of teams in instance\r\n loc: Location offset (i.e. for staggered sessions, location index of where the teams begin)\r\n extra: true/false if extra time is allocated\r\n */\r\nexport default class Instance {\r\n  constructor(session_id, num, time, teams, loc) {\r\n    this.session_id = session_id;\r\n    this.num = num;\r\n    this.time = time;\r\n    this.teams = teams;\r\n    this.loc = loc;\r\n    this.surrogates = 0;\r\n    this.standins = 0;\r\n    this.extra = false;\r\n  }\r\n\r\n  static freeze(o) {\r\n    return {\r\n      _class: 'Instance',\r\n      session_id: o.session_id,\r\n      num: o.num,\r\n      time: o.time,\r\n      teams: o.teams,\r\n      loc: o.loc,\r\n      surrogates: o.surrogates,\r\n      standins: o.standins,\r\n      extra: o.extra\r\n    };\r\n  }\r\n\r\n  static thaw(o) {\r\n    let I = new Instance(o.session_id, o.num, o.time, o.teams, o.loc);\r\n    I.surrogates = o.surrogates;\r\n    I.standins = o.standins;\r\n    I.extra = o.extra;\r\n    return I;\r\n  }\r\n}\r\n","//import {toDataUrl} from \"../scheduling/utilities\";\r\n// import header from \"../resources/FIRST_header.png\";\r\n// import flllogo from \"../resources/flllogo.jpg\";\r\n// import gamelogo from \"../resources/gamelogo.jpg\";\r\n// import mqlogo from \"../resources/mqlogo.png\";\r\n// import firstlogo from \"../resources/firstlogo.png\";\r\n\r\nimport PreComputedImages from \"../resources/images.json\";\r\n\r\nexport class PageFormat {\r\n    constructor() {\r\n        this._header = null;\r\n        this.logoTopLeft = null;\r\n        this.logoTopRight = null;\r\n        this.logoBotLeft = null;\r\n        this.logoBotRight = null;\r\n        this.titleFontSize = 22;\r\n        this.baseFontSize = 12;\r\n        this.footerText = 'www.firstaustralia.org';\r\n\r\n        if (PreComputedImages.header)\r\n            this._header = PreComputedImages.header;\r\n        // else\r\n        //    toDataUrl(header, (base) => {this.header= base;});\r\n        if (PreComputedImages.flllogo)\r\n            this._logoTopLeft = PreComputedImages.flllogo;\r\n        // else\r\n        //     toDataUrl(flllogo, (base) => {this.logoTopLeft = base;});\r\n        if (PreComputedImages.gamelogo)\r\n            this._logoTopRight = PreComputedImages.gamelogo;\r\n        // else\r\n        //     toDataUrl(gamelogo, (base) => {this.logoTopRight = base;});\r\n        if (PreComputedImages.mqlogo)\r\n            this._logoBotLeft = PreComputedImages.mqlogo;\r\n        // else\r\n        //    toDataUrl(mqlogo, (base) => {this.logoBotLeft = base;});\r\n        if (PreComputedImages.firstlogo)\r\n            this._logoBotRight = PreComputedImages.firstlogo;\r\n        // else\r\n        //     toDataUrl(firstlogo, (base) => {this.logoBotRight = base;});\r\n\r\n        this.customLogos = false;\r\n\r\n        console.log(this.customLogos);\r\n    }\r\n\r\n    get footerText() {\r\n        return this._footer;\r\n    }\r\n\r\n    set footerText(x) {\r\n        this._footer = x;\r\n    }\r\n\r\n    get baseFontSize() {\r\n        return this._baseFontSize;\r\n    }\r\n\r\n    set baseFontSize(x) {\r\n        this._baseFontSize = x;\r\n    }\r\n\r\n    get titleFontSize() {\r\n        return this._titleFontSize;\r\n    }\r\n\r\n    set titleFontSize(x) {\r\n        this._titleFontSize = x;\r\n    }\r\n\r\n    get logoTopLeft() {\r\n        return this._logoTopLeft\r\n    }\r\n\r\n    set logoTopLeft(x) {\r\n        this.customLogos = (this._logoTopLeft !== x || this.customLogos);\r\n        this._logoTopLeft = x;\r\n    }\r\n\r\n    get logoBotLeft() {\r\n        return this._logoBotLeft\r\n    }\r\n\r\n    set logoBotLeft(x) {\r\n        this.customLogos = (this._logoBotLeft !== x || this.customLogos);\r\n        this._logoBotLeft = x;\r\n    }\r\n\r\n    get logoTopRight() {\r\n        return this._logoTopRight\r\n    }\r\n\r\n    set logoTopRight(x) {\r\n        this.customLogos = (this._logoTopRight !== x || this.customLogos);\r\n        this._logoTopRight = x;\r\n    }\r\n\r\n    get logoBotRight() {\r\n        return this._logoBotRight\r\n    }\r\n\r\n    set logoBotRight(x) {\r\n        this.customLogos = (this._logoBotRight !== x || this.customLogos);\r\n        this._logoBotRight = x;\r\n    }\r\n\r\n    get header() {\r\n        return this._header\r\n    }\r\n\r\n    set header(x) {\r\n        this.customLogos = (this._header !== x || this.customLogos);\r\n        this._header = x;\r\n    }\r\n\r\n    static freeze(o) {\r\n        console.log(\"Custom logos\" + o.customLogos);\r\n        return o.customLogos ? {\r\n            _class: 'PageFormat',\r\n            _titleFontSize: o._titleFontSize,\r\n            _baseFontSize: o._baseFontSize,\r\n            _header: o._header,\r\n            _logoTopLeft: o._logoTopLeft,\r\n            _logoBotLeft: o._logoBotLeft,\r\n            _logoTopRight: o._logoTopRight,\r\n            _logoBotRight: o._logoBotRight,\r\n            _footer: o._footer\r\n        } : {\r\n            _class: 'PageFormat',\r\n            _titleFontSize: o._titleFontSize,\r\n            _baseFontSize: o._baseFontSize,\r\n            _footer: o._footer\r\n        };\r\n    }\r\n\r\n    static thaw(o) {\r\n        console.log(\"THAW\");\r\n        console.log(o);\r\n        console.log(o._header);\r\n        let E = new PageFormat();\r\n        E._baseFontSize = o._baseFontSize;\r\n        E._titleFontSize = o._titleFontSize;\r\n        if (o._header) E._header = o._header;\r\n        if (o._logoTopLeft) E._logoTopLeft = o._logoTopLeft;\r\n        if (o._logoBotLeft) E._logoBotLeft = o._logoBotLeft;\r\n        if (o._logoTopRight) E._logoTopRight = o._logoTopRight;\r\n        if (o._logoBotRight) E._logoBotRight = o._logoBotRight;\r\n        E._footer = o._footer;\r\n        return E;\r\n    }\r\n\r\n}\r\n","import { DateTime } from '../api/DateTime';\r\nimport { EventParams } from '../api/EventParams';\r\nimport SessionParams from '../api/SessionParams';\r\nimport { TeamParams } from '../api/TeamParams';\r\nimport Instance from '../scheduling/Instance';\r\nimport { SessionType } from '../api/SessionTypes';\r\nimport { PageFormat } from '../api/PageFormat';\r\n\r\n//https://stackoverflow.com/questions/6832596/how-to-compare-software-version-number-using-js-only-number, LeJared\r\nexport function cmpVersions(a, b) {\r\n  var i, diff;\r\n  var regExStrip0 = /(\\.0+)+$/;\r\n  var segmentsA = a.replace(regExStrip0, '').split('.');\r\n  var segmentsB = b.replace(regExStrip0, '').split('.');\r\n  var l = Math.min(segmentsA.length, segmentsB.length);\r\n\r\n  for (i = 0; i < l; i++) {\r\n    diff = parseInt(segmentsA[i], 10) - parseInt(segmentsB[i], 10);\r\n    if (diff) {\r\n      return diff;\r\n    }\r\n  }\r\n  return segmentsA.length - segmentsB.length;\r\n}\r\n\r\n/**\r\n * Shuffles array in place.\r\n * @param {Array} a items The array containing the items.\r\n */\r\nexport function shuffle(a) {\r\n  var j, x, i;\r\n  for (i = a.length; i; i--) {\r\n    j = Math.floor(Math.random() * i);\r\n    x = a[i - 1];\r\n    a[i - 1] = a[j];\r\n    a[j] = x;\r\n  }\r\n\r\n  return a;\r\n}\r\n\r\n/** Checks if two session overlap at all **/\r\nexport function overlaps(a, b) {\r\n  if (\r\n    a.actualStartTime.mins === b.actualStartTime.mins ||\r\n    a.actualEndTime.mins === b.actualEndTime.mins\r\n  )\r\n    return true;\r\n  if (\r\n    a.actualStartTime.mins < b.actualStartTime.mins &&\r\n    a.actualEndTime.mins > b.actualStartTime.mins\r\n  )\r\n    return true;\r\n  return (\r\n    b.actualStartTime.mins < a.actualStartTime.mins &&\r\n    b.actualEndTime.mins > a.actualStartTime.mins\r\n  );\r\n}\r\n\r\n/**\r\n Returns how many times a team has done a given session\r\n **/\r\nexport function hasDone(team, id) {\r\n  return team.schedule.filter(i => i.session_id === id).length;\r\n}\r\n\r\nexport function saveToFile_json(filename, content) {\r\n  let file = new Blob([content], { type: 'application/json' });\r\n  if (window.navigator.msSaveOrOpenBlob)\r\n    // IE10+\r\n    window.navigator.msSaveOrOpenBlob(file, filename);\r\n  else {\r\n    // Others\r\n    var a = document.createElement('a'),\r\n      url = URL.createObjectURL(file);\r\n    a.href = url;\r\n    a.download = filename;\r\n    document.body.appendChild(a);\r\n    a.click();\r\n    setTimeout(function() {\r\n      document.body.removeChild(a);\r\n      window.URL.revokeObjectURL(url);\r\n    }, 0);\r\n  }\r\n}\r\n\r\nexport function saveToFile_csv(filename, content) {\r\n  let file = new Blob([content], { type: 'application/csv' });\r\n  if (window.navigator.msSaveOrOpenBlob)\r\n    // IE10+\r\n    window.navigator.msSaveOrOpenBlob(file, filename);\r\n  else {\r\n    // Others\r\n    var a = document.createElement('a'),\r\n      url = URL.createObjectURL(file);\r\n    a.href = url;\r\n    a.download = filename;\r\n    document.body.appendChild(a);\r\n    a.click();\r\n    setTimeout(function() {\r\n      document.body.removeChild(a);\r\n      window.URL.revokeObjectURL(url);\r\n    }, 0);\r\n  }\r\n}\r\n\r\n// Replacer function for JSON.stringify\r\n// Saves any class instance as an object with its data and a class descriptor.\r\nexport function freeze(key, object) {\r\n  if (object instanceof DateTime) {\r\n    return DateTime.freeze(object);\r\n  } else if (object instanceof EventParams) {\r\n    return EventParams.freeze(object);\r\n  } else if (object instanceof SessionParams) {\r\n    return SessionParams.freeze(object);\r\n  } else if (object instanceof TeamParams) {\r\n    return TeamParams.freeze(object);\r\n  } else if (object instanceof Instance) {\r\n    return Instance.freeze(object);\r\n  } else if (object instanceof SessionType) {\r\n    return SessionType.freeze(object);\r\n  } else if (object instanceof PageFormat) {\r\n    return PageFormat.freeze(object);\r\n  } else return object;\r\n}\r\n\r\n// Reviver function for JSON.parse\r\n// Returns any object as an instance of its class descriptor and data\r\nexport function thaw(key, value) {\r\n  if (value instanceof Object && value._class) {\r\n    switch (value._class) {\r\n      case 'DateTime':\r\n        return DateTime.thaw(value);\r\n      case 'EventParams':\r\n        return EventParams.thaw(value);\r\n      case 'SessionParams':\r\n        return SessionParams.thaw(value);\r\n      case 'TeamParams':\r\n        return TeamParams.thaw(value);\r\n      case 'Instance':\r\n        return Instance.thaw(value);\r\n      case 'SessionType':\r\n        return SessionType.thaw(value);\r\n      case 'PageFormat':\r\n        return PageFormat.thaw(value);\r\n      default:\r\n        return value;\r\n    }\r\n  } else {\r\n    return value;\r\n  }\r\n}\r\n\r\nexport function getBase64Image(img) {\r\n  // console.log(\"Image source\");\r\n  // console.log(img.src);\r\n  if (img.src.substring(0, 4) === 'data') return img.src;\r\n  // Create an empty canvas element\r\n  let canvas = document.createElement('canvas');\r\n  canvas.width = img.naturalWidth;\r\n  canvas.height = img.naturalHeight;\r\n\r\n  // Copy the image contents to the canvas\r\n  let ctx = canvas.getContext('2d');\r\n  ctx.drawImage(img, 0, 0);\r\n\r\n  // Get the data-URL formatted image\r\n  // Firefox supports PNG and JPEG. You could check img.src to\r\n  // guess the original format, but be aware the using \"image/jpg\"\r\n  // will re-encode the image.\r\n\r\n  let dataURL = '';\r\n  if (img.src.search(new RegExp('.png', 'i')) !== -1) {\r\n    dataURL = canvas.toDataURL('image/png');\r\n  } else if (img.src.search(new RegExp('.jpe?g', 'i')) !== -1) {\r\n    dataURL = canvas.toDataURL('image/jpeg');\r\n  }\r\n  if (img.src.substring(0, 4) === 'data') dataURL = img.src;\r\n  console.log(dataURL);\r\n  return dataURL;\r\n}\r\n\r\nexport function toDataUrl(url, callback) {\r\n  var xhr = new XMLHttpRequest();\r\n  xhr.onload = function() {\r\n    var reader = new FileReader();\r\n    reader.onloadend = function() {\r\n      callback(reader.result);\r\n    };\r\n    reader.readAsDataURL(xhr.response);\r\n  };\r\n  xhr.open('GET', url);\r\n  xhr.responseType = 'blob';\r\n  xhr.send();\r\n}\r\n","import { TeamParams } from \"./TeamParams\";\r\nimport { TYPES } from \"./SessionTypes\";\r\nimport { DateTime } from \"./DateTime\";\r\nimport SessionParams from \"./SessionParams\";\r\n\r\n//import {toDataUrl} from \"../scheduling/utilities\";\r\n\r\nimport Instance from \"../scheduling/Instance\";\r\nimport { overlaps, shuffle } from \"../scheduling/utilities\";\r\n\r\nimport { PageFormat } from \"./PageFormat\";\r\n\r\n// National sponsors\r\n// import mqlogo from \"../resources/national-sponsors/mq.png\";\r\n// import fordlogo from \"../resources/national-sponsors/ford.png\";\r\n// import googlelogo from \"../resources/national-sponsors/google.jpg\";\r\n// import legoedlogo from \"../resources/national-sponsors/legoEd.png\";\r\nimport PreComputedImages from \"../resources/images.json\";\r\nimport Volunteers from \"../templates/volunteers.json\";\r\n\r\nexport class EventParams {\r\n  static AWARD_STYLES = [\r\n    \"Champion only\",\r\n    \"Required only\",\r\n    \"Required and optional (winner only)\",\r\n    \"Required and optional (1 finalist )\",\r\n    \"Required and optional (2 finalist )\",\r\n    \"Required and optional (3 finalist )\",\r\n  ];\r\n\r\n  static AWARD_NAMES = [\r\n    [\"Champion's Award\"],\r\n    [\r\n      \"Coach/Mentor Award\",\r\n      \"Robot Performance Award\",\r\n      \"Robot Design Award\",\r\n      \"Innovation Project Award\",\r\n      \"Core Values Award\",\r\n      \"Champion's Award\",\r\n    ],\r\n    [\r\n      \"Motivate Award\",\r\n      \"Rising All-Star Award\",\r\n      \"Engineering Excellence Award\",\r\n      \"Breakthrough Award\",\r\n      \"Coach/Mentor Award\",\r\n      \"Robot Performance Award\",\r\n      \"Robot Design Award\",\r\n      \"Innovation Project Award\",\r\n      \"Core Values Award\",\r\n      \"Champion's Award\",\r\n    ],\r\n    [\r\n      \"Motivate Award Finalist\",\r\n      \"Motivate Award Winner\",\r\n      \"Rising All-Star Award Finalist\",\r\n      \"Rising All-Star Award Winner\",\r\n      \"Engineering Excellence Award Finalist\",\r\n      \"Engineering Excellence Award Winner\",\r\n      \"Breakthrough Award Finalist\",\r\n      \"Breakthrough Award Winner\",\r\n      \"Coach/Mentor Award Finalist\",\r\n      \"Coach/Mentor Award Winner\",\r\n      \"Robot Performance Award Finalist\",\r\n      \"Robot Performance Award Winner\",\r\n      \"Robot Design Award Finalist\",\r\n      \"Robot Design Award Winner\",\r\n      \"Innovation Project Award Finalist\",\r\n      \"Innovation Project Award Winner\",\r\n      \"Core Values Award Finalist\",\r\n      \"Core Values Award Winner\",\r\n      \"Champion's Award Finalist\",\r\n      \"Champion's Award Winner\",\r\n    ],\r\n    [\r\n      \"Motivate Award Finalist\",\r\n      \"Motivate Award Finalist\",\r\n      \"Motivate Award Winner\",\r\n      \"Rising All-Star Award Finalist\",\r\n      \"Rising All-Star Award Finalist\",\r\n      \"Rising All-Star Award Winner\",\r\n      \"Engineering Excellence Award Finalist\",\r\n      \"Engineering Excellence Award Finalist\",\r\n      \"Engineering Excellence Award Winner\",\r\n      \"Breakthrough Award Finalist\",\r\n      \"Breakthrough Award Finalist\",\r\n      \"Breakthrough Award Winner\",\r\n      \"Coach/Mentor Award Finalist\",\r\n      \"Coach/Mentor Award Finalist\",\r\n      \"Coach/Mentor Award Winner\",\r\n      \"Robot Performance Award Finalist\",\r\n      \"Robot Performance Award Finalist\",\r\n      \"Robot Performance Award Winner\",\r\n      \"Robot Design Award Finalist\",\r\n      \"Robot Design Award Finalist\",\r\n      \"Robot Design Award Winner\",\r\n      \"Innovation Project Award Finalist\",\r\n      \"Innovation Project Award Finalist\",\r\n      \"Innovation Project Award Winner\",\r\n      \"Core Values Award Finalist\",\r\n      \"Core Values Award Finalist\",\r\n      \"Core Values Award Winner\",\r\n      \"Champion's Award Finalist\",\r\n      \"Champion's Award Finalist\",\r\n      \"Champion's Award Winner\",\r\n    ],\r\n    [\r\n      \"Motivate Award Finalist\",\r\n      \"Motivate Award Finalist\",\r\n      \"Motivate Award Finalist\",\r\n      \"Motivate Award Winner\",\r\n      \"Rising All-Star Award Finalist\",\r\n      \"Rising All-Star Award Finalist\",\r\n      \"Rising All-Star Award Finalist\",\r\n      \"Rising All-Star Award Winner\",\r\n      \"Engineering Excellence Award Finalist\",\r\n      \"Engineering Excellence Award Finalist\",\r\n      \"Engineering Excellence Award Finalist\",\r\n      \"Engineering Excellence Award Winner\",\r\n      \"Breakthrough Award Finalist\",\r\n      \"Breakthrough Award Finalist\",\r\n      \"Breakthrough Award Finalist\",\r\n      \"Breakthrough Award Winner\",\r\n      \"Coach/Mentor Award Finalist\",\r\n      \"Coach/Mentor Award Finalist\",\r\n      \"Coach/Mentor Award Finalist\",\r\n      \"Coach/Mentor Award Winner\",\r\n      \"Robot Performance Award Finalist\",\r\n      \"Robot Performance Award Finalist\",\r\n      \"Robot Performance Award Finalist\",\r\n      \"Robot Performance Award Winner\",\r\n      \"Robot Design Award Finalist\",\r\n      \"Robot Design Award Finalist\",\r\n      \"Robot Design Award Finalist\",\r\n      \"Robot Design Award Winner\",\r\n      \"Innovation Project Award Finalist\",\r\n      \"Innovation Project Award Finalist\",\r\n      \"Innovation Project Award Finalist\",\r\n      \"Innovation Project Award Winner\",\r\n      \"Core Values Award Finalist\",\r\n      \"Core Values Award Finalist\",\r\n      \"Core Values Award Finalist\",\r\n      \"Core Values Award Winner\",\r\n      \"Champion's Award Finalist\",\r\n      \"Champion's Award Finalist\",\r\n      \"Champion's Award Finalist\",\r\n      \"Champion's Award Winner\",\r\n    ],\r\n  ];\r\n\r\n  constructor(\r\n    version,\r\n    title = \"Tournament\",\r\n    nTeams = 24,\r\n    startTime = new DateTime(9 * 60),\r\n    endTime = new DateTime(9 * 17)\r\n  ) {\r\n    this._version = version;\r\n    this.title = title;\r\n    let id = Math.floor(Math.random() * 100 + 1);\r\n    let A = [];\r\n    while (nTeams > 0) {\r\n      A.push(new TeamParams(id, nTeams));\r\n      nTeams--;\r\n      id += Math.floor(Math.random() * 100 + 1);\r\n    }\r\n\r\n    this.uid_counter = 1;\r\n\r\n    this.teams = A.sort((a, b) => {\r\n      return parseInt(a.number, 10) - parseInt(b.number, 10);\r\n    });\r\n\r\n    this.startTime = startTime;\r\n    this.endTime = endTime;\r\n\r\n    this.minTravel = 10;\r\n    this.extraTime = 5;\r\n    this.sessions = [];\r\n    this.days = [\"Day 1\"];\r\n    this.startTime.days = this.days;\r\n    this.endTime.days = this.days;\r\n    this.pilot = false;\r\n    this.consolidatedAwards = false;\r\n    this.awardStyle = EventParams.AWARD_STYLES[2];\r\n    this.judgesAwards = 0;\r\n    this.awards = EventParams.AWARD_NAMES[2];\r\n    this.nTables = 4;\r\n    this.nPracs = 0;\r\n    this.sponsors = {\r\n      national: [],\r\n      local: [],\r\n    };\r\n    PreComputedImages.nationalSponsors.forEach((x) =>\r\n      this.addNationalSponsor(x)\r\n    );\r\n\r\n    this._volunteers = null;\r\n    this.tempNames = null;\r\n    this.pageFormat = null;\r\n\r\n    // console.log(this.logoBotRight);\r\n    this.errors = Infinity;\r\n    // this.populateFLL();\r\n  }\r\n\r\n  populateFLL() {\r\n    // Set team names\r\n    if (this.tempNames) {\r\n      let lines = this.tempNames.split(\"\\n\");\r\n      this.teams.forEach((t) => {\r\n        let savedName = t.name;\r\n        let savedNum = t.number;\r\n        let savedAffil = t.affiliation;\r\n        let savedPit = t.pitNum;\r\n        if (lines.length > 0) {\r\n          let l = lines.shift().replace(/,/g, \"\\t\");\r\n          let fields = l.split(\"\\t\");\r\n          if (fields.length > 3) {\r\n            t.number = fields[0];\r\n            t.name = fields[1];\r\n            t.affiliation = fields[2];\r\n            t.pitNum = fields[3];\r\n          } else if (fields.length > 2) {\r\n            t.number = fields[0];\r\n            t.name = fields[1];\r\n            t.affiliation = fields[2];\r\n          } else if (fields.length > 1) {\r\n            t.number = fields[0];\r\n            t.name = fields[1];\r\n          } else {\r\n            t.name = l;\r\n          }\r\n        }\r\n        if (t.name === \"\") t.name = savedName;\r\n        if (t.number === \"\") t.number = savedNum;\r\n        if (t.affiliation === \"\") t.affiliation = savedAffil;\r\n        if (t.pitNum === \"\") t.pitNum = savedPit;\r\n      });\r\n    }\r\n    // toDataUrl(mqlogo, (base) => {this.addNationalSponsor(base);});\r\n    // toDataUrl(googlelogo, (base) => {this.addNationalSponsor(base);});\r\n    // toDataUrl(fordlogo, (base) => {this.addNationalSponsor(base);});\r\n    // toDataUrl(legoedlogo, (base) => {this.addNationalSponsor(base);});\r\n    this.pageFormat = new PageFormat();\r\n    console.log(\"B\");\r\n\r\n    this.teams = this.teams.sort((a, b) => {\r\n      return parseInt(a.number, 10) - parseInt(b.number, 10);\r\n    });\r\n\r\n    const nAwardsNeeded = this.nTeams * 0.4;\r\n    const distances = EventParams.AWARD_NAMES.map((a) =>\r\n      Math.abs(a.length - nAwardsNeeded)\r\n    );\r\n    console.log(distances);\r\n    const closestIdx = distances.findIndex((d) => d === Math.min(...distances));\r\n    this.awardStyleIdx = closestIdx;\r\n    // this.consolidatedAwards = this.nTeams * 0.4 < 8;\r\n    // console.log(this.consolidatedAwards);\r\n    // console.log(this.nTeams * 0.4);\r\n    // let nCoreAwards = this.consolidatedAwards ? 4 : 10;\r\n    // this.judgesAwards = Math.min(\r\n    //   Math.max(Math.ceil(this.nTeams * 0.4) - nCoreAwards, 0),\r\n    //   6\r\n    // );\r\n\r\n    // First guesses at all schedule parameters.  User can then tweak to their hearts' content without auto updates\r\n    let actualStart = this.startTime.clone(30);\r\n    let actualEnd = this.endTime.clone(this.consolidatedAwards ? -30 : -60);\r\n    let nLocs = Math.ceil(this.nTeams / 4); // At a guess, see 4 teams each\r\n    let nJudgings = Math.ceil(this.nTeams / nLocs);\r\n\r\n    let startLunch = new DateTime(\r\n      Math.max(actualStart.mins + nJudgings * 15, 12 * 60),\r\n      this.days\r\n    );\r\n    let endLunch = startLunch.clone(30);\r\n\r\n    this.sessions.push(\r\n      new SessionParams(\r\n        this.uid_counter++,\r\n        TYPES.BREAK,\r\n        \"Opening Ceremony\",\r\n        1,\r\n        this.startTime.clone(),\r\n        actualStart.clone(),\r\n        true\r\n      )\r\n    );\r\n    this.getSession(this.uid_counter - 1).universal = true;\r\n    this.sessions.push(\r\n      new SessionParams(\r\n        this.uid_counter++,\r\n        TYPES.BREAK,\r\n        \"Lunch\" + (this.nDays > 1 ? \" 1\" : \"\"),\r\n        1,\r\n        startLunch.clone(),\r\n        endLunch.clone()\r\n      )\r\n    );\r\n    this.getSession(this.uid_counter - 1).universal = true;\r\n    this.sessions.push(\r\n      new SessionParams(\r\n        this.uid_counter++,\r\n        TYPES.BREAK,\r\n        \"Closing Ceremony\",\r\n        1,\r\n        actualEnd.clone(),\r\n        this.endTime.clone(),\r\n        true\r\n      )\r\n    );\r\n    this.getSession(this.uid_counter - 1).universal = true;\r\n\r\n    let nightStart = new DateTime(this.endTime.mins % (24 * 60), this.days);\r\n    let nightEnd = this.startTime.clone();\r\n\r\n    for (let i = 1; i < this.days.length; i++) {\r\n      nightEnd = nightEnd.clone(24 * 60);\r\n      this.sessions.push(\r\n        new SessionParams(\r\n          this.uid_counter++,\r\n          TYPES.BREAK,\r\n          \"Night\" + (this.nDays > 2 ? \" \" + i : \"\"),\r\n          1,\r\n          nightStart.clone(),\r\n          nightEnd.clone(),\r\n          true\r\n        )\r\n      );\r\n      this.getSession(this.uid_counter - 1).universal = true;\r\n      nightStart = nightStart.clone(24 * 60);\r\n\r\n      this.sessions.push(\r\n        new SessionParams(\r\n          this.uid_counter++,\r\n          TYPES.BREAK,\r\n          \"Lunch \" + (i + 1),\r\n          1,\r\n          startLunch.clone(24 * 60),\r\n          endLunch.clone(24 * 60)\r\n        )\r\n      );\r\n      this.getSession(this.uid_counter - 1).universal = true;\r\n    }\r\n\r\n    let timeAvailable = this.endTime.mins - this.startTime.mins;\r\n    this.sessions\r\n      .filter((s) => s.type === TYPES.BREAK)\r\n      .forEach((s) => {\r\n        timeAvailable = timeAvailable - (s.endTime.mins - s.startTime.mins);\r\n      });\r\n\r\n    if (this.pilot) {\r\n      // let rdLen = matchLen + matchBuf;\r\n      // let rdBuf = 0;\r\n      let rdLen = 10;\r\n      let rdBuf = 5;\r\n      let rdOverlap =\r\n        this.nTables === 2 ? 0 : 15 - Math.ceil(30 / this.nTables);\r\n\r\n      timeAvailable =\r\n        timeAvailable - (this.nTeams / 2) * (rdLen + rdBuf - rdOverlap);\r\n      let timePerMatch = Math.floor(\r\n        timeAvailable / ((this.nTeams * (2 + this.nPracs)) / 2)\r\n      );\r\n\r\n      let matchLen = Math.min(timePerMatch, 4);\r\n      let matchBuf = Math.max(timePerMatch - matchLen - 1, 0);\r\n      let matchOverlap = 0; //If matches need an overlap, set it here.\r\n\r\n      let nSims = 2;\r\n      for (let i = 1; i <= this.nPracs; i++) {\r\n        let S = new SessionParams(\r\n          this.uid_counter++,\r\n          TYPES.MATCH_ROUND_PRACTICE,\r\n          \"Practice Round \" + i,\r\n          this.nTables,\r\n          actualStart.clone(),\r\n          actualEnd.clone()\r\n        );\r\n        S.nSims = nSims;\r\n        S.len = matchLen;\r\n        S.buf = matchBuf;\r\n        S.overlap = 0;\r\n        this.sessions.push(S);\r\n      }\r\n      for (let i = 1; i <= 3; i++) {\r\n        let S = new SessionParams(\r\n          this.uid_counter++,\r\n          TYPES.MATCH_ROUND,\r\n          \"Round \" + i,\r\n          this.nTables,\r\n          actualStart.clone(),\r\n          actualEnd.clone()\r\n        );\r\n        S.nSims = nSims;\r\n        S.len = i === 1 ? rdLen : matchLen;\r\n        S.buf = i === 1 ? rdBuf : matchBuf;\r\n        S.overlap = i === 1 ? rdOverlap : matchOverlap;\r\n        this.sessions.push(S);\r\n      }\r\n      let roundOneLength = (rdLen + rdBuf - rdOverlap) * (this.nTeams / 2);\r\n      let roundOneEnd = actualStart.mins + roundOneLength;\r\n      console.log(this.sessions[1]);\r\n      console.log(roundOneEnd);\r\n      let dif = Math.ceil(roundOneEnd - this.sessions[1].startTime.mins);\r\n      console.log(dif);\r\n      if (dif > 0) {\r\n        this.sessions[1].startTime = this.sessions[1].startTime.clone(dif);\r\n        this.sessions[1].endTime = this.sessions[1].endTime.clone(dif);\r\n      }\r\n    } else {\r\n      let timePerMatch = Math.floor(\r\n        timeAvailable / ((this.nTeams * (3 + this.nPracs)) / 2)\r\n      );\r\n\r\n      let matchLen = Math.min(timePerMatch, 4);\r\n      let matchBuf = Math.max(timePerMatch - matchLen - 1, 0);\r\n      let matchOverlap = 0; //If matches need an overlap, set it here.\r\n\r\n      let bufDiff = 3 + this.nPracs - 1; // Make the first round slower than the rest\r\n\r\n      let nSims = 2;\r\n      let first = true;\r\n      for (let i = 1; i <= this.nPracs; i++) {\r\n        let S = new SessionParams(\r\n          this.uid_counter++,\r\n          TYPES.MATCH_ROUND_PRACTICE,\r\n          \"Practice Round \" + i,\r\n          this.nTables,\r\n          actualStart.clone(),\r\n          actualEnd.clone()\r\n        );\r\n        S.nSims = nSims;\r\n        S.len = matchLen;\r\n        S.buf = first ? matchBuf + bufDiff : matchBuf - 1;\r\n        S.overlap = matchOverlap;\r\n        this.sessions.push(S);\r\n        first = false;\r\n      }\r\n      for (let i = 1; i <= 3; i++) {\r\n        let S = new SessionParams(\r\n          this.uid_counter++,\r\n          TYPES.MATCH_ROUND,\r\n          \"Round \" + i,\r\n          this.nTables,\r\n          actualStart.clone(),\r\n          actualEnd.clone()\r\n        );\r\n        S.nSims = nSims;\r\n        S.len = matchLen;\r\n        S.buf = first ? matchBuf + bufDiff : matchBuf - 1;\r\n        S.overlap = matchOverlap;\r\n        this.sessions.push(S);\r\n        first = false;\r\n      }\r\n      // this.sessions.push(new SessionParams(this.uid_counter++, TYPES.JUDGING, \"Robot Design Judging\", nLocs,\r\n      //     actualStart.clone(), actualEnd.clone()));\r\n      // this.sessions.push(new SessionParams(this.uid_counter++, TYPES.JUDGING, \"Core Values Judging\", nLocs,\r\n      //     actualStart.clone(), actualEnd.clone()));\r\n    }\r\n    this.sessions.push(\r\n      new SessionParams(\r\n        this.uid_counter++,\r\n        TYPES.JUDGING,\r\n        \"Judging\",\r\n        nLocs,\r\n        actualStart.clone(),\r\n        actualEnd.clone()\r\n      )\r\n    );\r\n\r\n    this.sessions.sort((a, b) => {\r\n      return a.startTime === b.startTime\r\n        ? a.id - b.id\r\n        : a.startTime.mins - b.startTime.mins;\r\n    });\r\n\r\n    this.volunteers = [];\r\n    this.buildVolunteerSheet();\r\n  }\r\n\r\n  buildVolunteerSheet(nJudges) {\r\n    if (!nJudges) {\r\n      nJudges = this.sessions.find((s) => {\r\n        return s.type === TYPES.JUDGING;\r\n      }).nLocs;\r\n    }\r\n    // NOTE: Have to make sure that if volunters have already been designed, we just update the numbers.\r\n    if (this.volunteers.length > 0) {\r\n      // Just recalculate the number of volunteers\r\n      this.volunteers.forEach((v) => {\r\n        let numberOfVols = v.count;\r\n        if (v.per === \"1\") numberOfVols *= 1;\r\n        else if (v.per === \"RDJ\")\r\n          // Volunteers per robot design judging session\r\n          numberOfVols *= nJudges;\r\n        else if (v.per === \"CVJ\")\r\n          // Volunteers per core values judging session\r\n          numberOfVols *= nJudges;\r\n        else if (v.per === \"RPJ\")\r\n          // Volunteers per project judging session\r\n          numberOfVols *= nJudges;\r\n        else if (v.per === \"T\")\r\n          // Volunteers per robot table\r\n          numberOfVols *= this.nTables;\r\n        nJudges = this.sessions.find((s) => {\r\n          return s.type === TYPES.JUDGING;\r\n        }).nLocs;\r\n        while (v.staff.length < numberOfVols) v.staff.push(\"\");\r\n        while (v.staff.length > numberOfVols) {\r\n          let S = v.staff.pop();\r\n          if (S !== \"\") {\r\n            v.staff.push(S);\r\n            break;\r\n          }\r\n        }\r\n      });\r\n    } else {\r\n      Volunteers.roles.forEach((v) => {\r\n        let vol = { name: v.name, count: v.count, per: v.per };\r\n        vol.staff = [];\r\n        let numberOfVols = v.count;\r\n        if (v.per === \"1\") numberOfVols *= 1;\r\n        else if (v.per === \"RDJ\")\r\n          // Volunteers per robot design judging session\r\n          numberOfVols *= nJudges;\r\n        else if (v.per === \"CVJ\")\r\n          // Volunteers per core values judging session\r\n          numberOfVols *= nJudges;\r\n        else if (v.per === \"RPJ\")\r\n          // Volunteers per project judging session\r\n          numberOfVols *= nJudges;\r\n        else if (v.per === \"T\")\r\n          // Volunteers per robot table\r\n          numberOfVols *= this.nTables;\r\n        for (let i = 0; i < numberOfVols; i++) vol.staff.push(\"\");\r\n        this.volunteers.push(vol);\r\n      });\r\n    }\r\n  }\r\n\r\n  get nJudges() {\r\n    return this.sessions.find((s) => {\r\n      return s.type === TYPES.JUDGING;\r\n    }).nLocs;\r\n  }\r\n\r\n  get nTeams() {\r\n    return this._teams.length;\r\n  }\r\n\r\n  //Given a new number of teams, update things...\r\n  set nTeams(value) {\r\n    while (this.teams.length < value) {\r\n      let maxId = 0;\r\n      this.teams.forEach((t) => {\r\n        maxId = maxId > t.id ? maxId : t.id;\r\n      });\r\n      maxId += Math.floor(Math.random() * 100 + 1);\r\n      this.teams.push(new TeamParams(maxId, this.teams.length + 1));\r\n    }\r\n    while (this.teams.length > value) this.teams.pop();\r\n    this.teams = this.teams.sort((a, b) => {\r\n      return parseInt(a.number, 10) - parseInt(b.number, 10);\r\n    });\r\n  }\r\n\r\n  getTeam(id) {\r\n    for (let i = 0; i < this.teams.length; i++) {\r\n      if (this.teams[i].id === id) return this.teams[i];\r\n    }\r\n    return null;\r\n  }\r\n\r\n  getSession(id) {\r\n    for (let i = 0; i < this.sessions.length; i++) {\r\n      if (this.sessions[i].id === id) return this.sessions[i];\r\n    }\r\n    return null;\r\n  }\r\n\r\n  getSessions(type) {\r\n    let A = [];\r\n    for (let i = 0; i < this.sessions.length; i++) {\r\n      if (this.sessions[i].type === type) A.push(this.sessions[i]);\r\n    }\r\n    return A;\r\n  }\r\n\r\n  getSessionDataGrid(id, pdf = false) {\r\n    let session = this.getSession(id);\r\n    let grid = [];\r\n    let cols = [{ value: \"#\" }, { value: \"Time\" }];\r\n    session.locations.forEach((x) => cols.push({ value: x }));\r\n    grid.push(cols);\r\n\r\n    let applyingBreaks = [];\r\n    this.sessions\r\n      .filter((S) => S.type === TYPES.BREAK && S.applies(session.id))\r\n      .forEach((S) => {\r\n        if (overlaps(S, session)) applyingBreaks.push(S);\r\n      });\r\n    let schedule = session.schedule.slice();\r\n    applyingBreaks.forEach((br) =>\r\n      schedule.push(new Instance(br.id, \"\", br.actualStartTime, null))\r\n    );\r\n\r\n    schedule\r\n      .sort((a, b) => a.time.mins - b.time.mins)\r\n      .forEach((instance) => {\r\n        let A = [];\r\n        A.push({ value: instance.num });\r\n        A.push({ value: instance.time.time });\r\n        if (this.getSession(instance.session_id).type === TYPES.BREAK) {\r\n          A.push({\r\n            value: this.getSession(instance.session_id).name,\r\n            colSpan: session.nLocs,\r\n          });\r\n          grid.push(A);\r\n        } else {\r\n          let diff = session.nLocs;\r\n          for (let dummy = 0; dummy < instance.loc; dummy++) {\r\n            diff--;\r\n            A.push({ value: \"\" });\r\n          }\r\n          for (let i = 0; i < instance.teams.length; i++) {\r\n            let x = instance.teams[i];\r\n            diff--;\r\n            if (pdf)\r\n              A.push({\r\n                value: x\r\n                  ? this.getTeam(x).number + \"\\n\" + this.getTeam(x).name\r\n                  : \" X \",\r\n              });\r\n            else\r\n              A.push({\r\n                value: x ? this.getTeam(x).number : \" X \",\r\n                id: x ? x : null,\r\n              });\r\n          }\r\n          while (diff-- > 0) A.push({ value: \"\" });\r\n          grid.push(A);\r\n        }\r\n      });\r\n    return grid;\r\n  }\r\n\r\n  getPilotDataGrid() {\r\n    let T = [];\r\n    this.teams.forEach((t) => T.push(t));\r\n    shuffle(T);\r\n    let grid = [];\r\n    let w = this.nJudges;\r\n    while (T.length > 0) {\r\n      let row = [];\r\n      for (let i = 0; i < w; i++) {\r\n        let x = T.pop();\r\n        row.push({ value: x ? x.number + \"\\n\" + x.name : \" X \" });\r\n      }\r\n      grid.push(row);\r\n    }\r\n    return grid;\r\n  }\r\n\r\n  getIndivDataGrid(compact = false) {\r\n    // Always sort before doing things if you need a particular order.\r\n    this.teams.sort((a, b) => a.number - b.number);\r\n    this.sessions.sort((a, b) => {\r\n      return a.id - b.id;\r\n    });\r\n    this.teams.forEach((team) => {\r\n      team.schedule.sort((a, b) => {\r\n        return (\r\n          this.getSession(a.session_id).id - this.getSession(b.session_id).id\r\n        );\r\n      });\r\n    });\r\n\r\n    let grid = [];\r\n    let usesSurrogates = false;\r\n    this.sessions.forEach((s) => {\r\n      if (s.usesSurrogates) usesSurrogates = true;\r\n    });\r\n    grid[0] = [{ value: \"Team\", colSpan: 2 }];\r\n    for (let i = 0; i < this.sessions.length; i++) {\r\n      if (this.sessions[i].type === TYPES.BREAK) continue;\r\n      grid[0].push({ colSpan: compact ? 2 : 3, value: this.sessions[i].name });\r\n    }\r\n    grid[0].push({ value: \"Min. Travel time\" });\r\n    if (usesSurrogates)\r\n      grid[0].push({ colSpan: compact ? 2 : 3, value: \"Surrogate\" });\r\n    grid[1] = [{ value: \"#\" }, { value: \"Name\" }];\r\n    for (let i = 0; i < this.sessions.length; i++) {\r\n      if (this.sessions[i].type === TYPES.BREAK) continue;\r\n      for (let j = 0; j < this.sessions[i].instances; j++) {\r\n        if (!compact) grid[1].push({ value: \"#\" });\r\n        grid[1].push({ value: \"Time\" });\r\n        grid[1].push({ value: \"Loc\" });\r\n      }\r\n    }\r\n    grid[1].push({ value: \"\" });\r\n    if (usesSurrogates) {\r\n      if (!compact) grid[1].push({ value: \"#\" });\r\n      grid[1].push({ value: \"Time\" });\r\n      grid[1].push({ value: \"Loc\" });\r\n    }\r\n\r\n    for (let i = 0; i < this.teams.length; i++) {\r\n      let row = [];\r\n      let team = this.teams[i];\r\n      row.push({ value: team.number });\r\n      row.push({ value: team.name });\r\n      for (let j = 0; j < team.schedule.length; j++) {\r\n        if (this.getSession(team.schedule[j].session_id).type === TYPES.BREAK)\r\n          continue;\r\n        if (\r\n          team.schedule[j].teams &&\r\n          team.schedule[j].teams.length -\r\n            team.schedule[j].teams.indexOf(team.id) <=\r\n            team.schedule[j].surrogates\r\n        )\r\n          continue; // Surrogate\r\n        if (!team.schedule[j].teams) {\r\n          row.push({ value: \"\" });\r\n          row.push({ value: \"\" });\r\n          row.push({ value: \"\" });\r\n        } else {\r\n          if (!compact) row.push({ value: team.schedule[j].num });\r\n          row.push({ value: team.schedule[j].time.time });\r\n          if (team.schedule[j].loc === -1) row.push({ value: \"--\" });\r\n          else\r\n            row.push({\r\n              value: this.getSession(team.schedule[j].session_id).locations[\r\n                team.schedule[j].teams.indexOf(team.id) + team.schedule[j].loc\r\n              ],\r\n            });\r\n        }\r\n      }\r\n      // row.push({value: \"?\"});\r\n      row.push({ value: \"\" + this.minTravelTime(team) });\r\n      let hadASurrogate = false;\r\n      for (let j = 0; j < team.schedule.length; j++) {\r\n        if (!team.schedule[j].teams) continue;\r\n        if (\r\n          !(\r\n            team.schedule[j].teams.length -\r\n              team.schedule[j].teams.indexOf(team.uid) >\r\n            team.schedule[j].surrogates\r\n          )\r\n        ) {\r\n          hadASurrogate = true;\r\n          if (!compact) row.push({ value: team.schedule[j].num });\r\n          row.push({ value: team.schedule[j].time.time });\r\n          if (team.schedule[j].loc === -1) row.push({ value: \"--\" });\r\n          else\r\n            row.push({\r\n              value: this.getSession(team.schedule[j].session_id).locations[\r\n                team.schedule[j].teams.indexOf(team.id) + team.schedule[j].loc\r\n              ],\r\n            });\r\n        }\r\n      }\r\n      if (!hadASurrogate && usesSurrogates) {\r\n        if (!compact) row.push({ value: \"\" });\r\n        row.push({ value: \"\" });\r\n        row.push({ value: \"\" });\r\n      }\r\n      grid.push(row);\r\n    }\r\n    return grid;\r\n  }\r\n\r\n  /**\r\n     Increments given time, skipping breaks.\r\n     @return Returns the incremented time.\r\n     */\r\n  timeInc(time, inc, sessionID) {\r\n    let filt = sessionID\r\n      ? (x) => x.type === TYPES.BREAK && x.applies(sessionID)\r\n      : (x) => x.type === TYPES.BREAK;\r\n    let newMins = time.mins + inc;\r\n    this.sessions.filter(filt).forEach((x) => {\r\n      if (\r\n        time.mins + inc >= x.actualStartTime.mins &&\r\n        time.mins < x.actualEndTime.mins\r\n      )\r\n        newMins = x.actualEndTime.mins;\r\n    });\r\n    return newMins;\r\n  }\r\n\r\n  /**\r\n     Increments given time, ceremonies and nights.\r\n     @return Returns the incremented time.\r\n     */\r\n  timeIncPrac(time, inc) {\r\n    let filt = (x) => x.type === TYPES.BREAK && x.noPractice;\r\n    let newMins = time.mins + inc;\r\n    this.sessions.filter(filt).forEach((x) => {\r\n      if (\r\n        time.mins + inc >= x.actualStartTime.mins &&\r\n        time.mins < x.actualEndTime.mins\r\n      )\r\n        newMins = x.actualEndTime.mins;\r\n    });\r\n    return newMins;\r\n  }\r\n\r\n  /** Assuming the given session has the most up-to-date location names, synchronise other session to this **/\r\n  syncLocs(S) {\r\n    console.log(\"Sync\");\r\n    if (S.type !== TYPES.MATCH_ROUND && S.type !== TYPES.MATCH_ROUND_PRACTICE)\r\n      return;\r\n    this.sessions\r\n      .filter(\r\n        (x) =>\r\n          x.type === TYPES.MATCH_ROUND || x.type === TYPES.MATCH_ROUND_PRACTICE\r\n      )\r\n      .forEach((x) => {\r\n        x.locations = S.locations;\r\n        console.log(x);\r\n      });\r\n  }\r\n\r\n  get version() {\r\n    return this._version;\r\n  }\r\n\r\n  get title() {\r\n    return this._title;\r\n  }\r\n\r\n  set title(value) {\r\n    this._title = value;\r\n  }\r\n\r\n  get startTime() {\r\n    return this._startTime;\r\n  }\r\n\r\n  set startTime(value) {\r\n    this._startTime = value;\r\n  }\r\n\r\n  get endTime() {\r\n    return this._endTime;\r\n  }\r\n\r\n  set endTime(value) {\r\n    this._endTime = value;\r\n  }\r\n\r\n  get sessions() {\r\n    return this._sessions;\r\n  }\r\n\r\n  set sessions(value) {\r\n    this._sessions = value;\r\n  }\r\n\r\n  get teams() {\r\n    return this._teams;\r\n  }\r\n\r\n  set teams(value) {\r\n    this._teams = value;\r\n  }\r\n\r\n  get awards() {\r\n    return this._awards;\r\n  }\r\n\r\n  set awards(value) {\r\n    this._awards = value;\r\n  }\r\n\r\n  get judgesAwards() {\r\n    return this._judgesAwards;\r\n  }\r\n\r\n  set judgesAwards(value) {\r\n    this._judgesAwards = value;\r\n  }\r\n\r\n  get consolidatedAwards() {\r\n    return this._consolidatedAwards;\r\n  }\r\n\r\n  set consolidatedAwards(value) {\r\n    this._consolidatedAwards = value;\r\n  }\r\n\r\n  get awardStyle() {\r\n    return this._awardStyle;\r\n  }\r\n\r\n  set awardStyle(value) {\r\n    this._awardStyle = value;\r\n  }\r\n\r\n  get awardStyleIdx() {\r\n    return EventParams.AWARD_STYLES.findIndex((x) => {\r\n      return x === this._awardStyle;\r\n    });\r\n  }\r\n\r\n  set awardStyleIdx(value) {\r\n    console.log(value);\r\n    this._awardStyle = EventParams.AWARD_STYLES[value];\r\n    this._awards = EventParams.AWARD_NAMES[value];\r\n    console.log(this._awards);\r\n  }\r\n\r\n  get awardPerc() {\r\n    let idx = this.awardStyleIdx;\r\n    console.log(\"Award style index: \" + this.awardStyleIdx);\r\n    console.log(\"Award style: \" + this._awardStyle);\r\n\r\n    let nTrophies = this.awards.length;\r\n    //   EventParams.AWARD_NAMES[this.awardStyleIdx].length + this.judgesAwards;\r\n    return Math.round((100 * nTrophies) / this.nTeams);\r\n  }\r\n\r\n  get minTravel() {\r\n    return this._minTravel;\r\n  }\r\n\r\n  set minTravel(value) {\r\n    this._minTravel = value;\r\n  }\r\n\r\n  get extraTime() {\r\n    return this._extraTime;\r\n  }\r\n\r\n  set extraTime(value) {\r\n    this._extraTime = value;\r\n  }\r\n\r\n  get nTables() {\r\n    return this._nTables;\r\n  }\r\n\r\n  set nTables(value) {\r\n    this._nTables = value;\r\n  }\r\n\r\n  get display() {\r\n    return this._display;\r\n  }\r\n\r\n  set display(d) {\r\n    this._display = d;\r\n  }\r\n\r\n  get pilot() {\r\n    return this._pilot;\r\n  }\r\n\r\n  set pilot(p) {\r\n    this._pilot = p;\r\n  }\r\n\r\n  get volunteers() {\r\n    return this._volunteers;\r\n  }\r\n\r\n  set volunteers(p) {\r\n    this._volunteers = p;\r\n  }\r\n\r\n  get nDays() {\r\n    return this._days.length;\r\n  }\r\n\r\n  set nDays(value) {\r\n    let A = this.days;\r\n    while (A.length < value) A.push(\"Day \" + (this.days.length + 1));\r\n    while (A.length > value) A.pop();\r\n    this.days = A;\r\n  }\r\n\r\n  get days() {\r\n    return this._days;\r\n  }\r\n\r\n  // When changing the days, we have to make sure every DateTime gets the updated reference.\r\n  set days(value) {\r\n    this._days = value;\r\n    this.startTime.days = this._days;\r\n    this.endTime.days = this._days;\r\n    this.sessions.forEach((S) => {\r\n      S.startTime.days = this._days;\r\n      S.actualStartTime.days = this._days;\r\n      S.endTime.days = this._days;\r\n      S.actualEndTime.days = this._days;\r\n    });\r\n    this.teams.forEach((T) => {\r\n      T.startTime.days = this._days;\r\n      T.endTime.days = this._days;\r\n    });\r\n  }\r\n\r\n  addLocalSponsor(value) {\r\n    this.sponsors.local.push(value);\r\n  }\r\n\r\n  addNationalSponsor(value) {\r\n    this.sponsors.national.push(value);\r\n  }\r\n\r\n  deleteLocalSponsor(idx) {\r\n    this.sponsors.local.splice(idx, 1);\r\n  }\r\n\r\n  static freeze(o) {\r\n    return {\r\n      _class: \"EventParams\",\r\n      _version: o._version,\r\n      _title: o._title,\r\n      _teams: o._teams,\r\n      uid_counter: o.uid_counter,\r\n      _startTime: o._startTime,\r\n      _endTime: o._endTime,\r\n      _sessions: o._sessions,\r\n      _days: o._days,\r\n      _pilot: o._pilot,\r\n      _nTables: o._nTables,\r\n      errors: o.errors,\r\n      _extraTime: o._extraTime,\r\n      _minTravel: o._minTravel,\r\n      _judgesAwards: o._judgesAwards,\r\n      _awards: o._awards,\r\n      _consolidatedAwards: o._consolidatedAwards,\r\n      _awardStyle: o._awardStyle,\r\n      _volunteers: o._volunteers,\r\n      pageFormat: o.pageFormat,\r\n      sponsors: o.sponsors.local,\r\n    };\r\n  }\r\n\r\n  static thaw(o) {\r\n    let E = new EventParams(o._version, o._title);\r\n    console.log(\"Saved object:\");\r\n    console.log(o);\r\n    E._teams = o._teams;\r\n    E.uid_counter = o.uid_counter;\r\n    E._startTime = o._startTime;\r\n    E._endTime = o._endTime;\r\n    E._minTravel = o._minTravel;\r\n    E._extraTime = o._extraTime;\r\n    E._sessions = o._sessions;\r\n    E._days = o._days;\r\n    E._pilot = o._pilot;\r\n    E._nTables = o._nTables || 4;\r\n    E.errors = o.errors;\r\n    E._judgesAwards = o._judgesAwards;\r\n    E._awards = o._awards;\r\n    E._consolidatedAwards = o._consolidatedAwards;\r\n    E._awardStyle = o._awardStyle || EventParams.AWARD_STYLES[2];\r\n    E._volunteers = o._volunteers;\r\n    E.sponsors.local = o.sponsors;\r\n    E.pageFormat = o.pageFormat;\r\n    if (!E.errors) E.errors = Infinity;\r\n    console.log(E);\r\n    return E;\r\n  }\r\n\r\n  /** ========================== UTILITIES ========================== **/\r\n\r\n  /**\r\n     Return true if the team can do the given instance.\r\n     Returns false if they don't have time to come from a previous instance or go to a later one.\r\n     if 'excl' is given, do not consider that session ID when checking this.\r\n     **/\r\n  canDo(team, instance, excl) {\r\n    if (\r\n      team.extraTime &&\r\n      !instance.extra &&\r\n      this.getSession(instance.session_id).type !== TYPES.BREAK\r\n    )\r\n      return false;\r\n    if (\r\n      team.excludeJudging &&\r\n      this.getSession(instance.session_id).type === TYPES.JUDGING\r\n    )\r\n      return false;\r\n    for (let i = 0; i < team.schedule.length; i++) {\r\n      if (this.getSession(team.schedule[i].session_id).type === TYPES.BREAK) {\r\n        if (\r\n          !this.getSession(team.schedule[i].session_id).applies(\r\n            instance.session_id\r\n          )\r\n        )\r\n          continue;\r\n        if (this.getSession(instance.session_id).type === TYPES.BREAK) continue;\r\n      }\r\n      let startA = team.schedule[i].time.mins;\r\n      if (excl && team.schedule[i].session_id === excl) continue;\r\n      let extra = 0;\r\n      if (team.schedule[i].extra) extra = this.extraTime;\r\n      let endA = 0;\r\n      if (this.getSession(team.schedule[i].session_id).type === TYPES.BREAK)\r\n        endA = startA + this.getSession(team.schedule[i].session_id).len;\r\n      else\r\n        endA =\r\n          startA +\r\n          this.getSession(team.schedule[i].session_id).len +\r\n          extra +\r\n          this.minTravel;\r\n      let startB = instance.time.mins;\r\n      extra = 0;\r\n      if (instance.extra) extra = this.extraTime;\r\n\r\n      let endB = 0;\r\n      if (this.getSession(team.schedule[i].session_id).type === TYPES.BREAK)\r\n        endB = startB + this.getSession(instance.session_id).len;\r\n      else\r\n        endB =\r\n          startB +\r\n          this.getSession(instance.session_id).len +\r\n          this.minTravel +\r\n          extra;\r\n      if (\r\n        (team.startTime.mins && startB < team.startTime.mins) ||\r\n        (team.endTime.mins && endB > team.endTime.mins)\r\n      )\r\n        return false;\r\n      if (\r\n        startA === startB ||\r\n        (startA < startB && endA > startB) ||\r\n        (startB < startA && endB > startA)\r\n      )\r\n        return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  swapTeams(sId, teamA, teamB) {\r\n    let a = this.getTeam(teamA);\r\n    let b = this.getTeam(teamB);\r\n    let iA = null;\r\n    let iB = null;\r\n    let canA = false;\r\n    let canB = false;\r\n    console.log(a);\r\n    a.schedule.forEach((i) => {\r\n      if (i.session_id === sId) iA = i;\r\n    });\r\n    console.log(b);\r\n    b.schedule.forEach((i) => {\r\n      if (i.session_id === sId) iB = i;\r\n    });\r\n\r\n    if (this.canDo(a, iB, sId)) canA = true;\r\n    if (this.canDo(b, iA, sId)) canB = true;\r\n\r\n    if (canA && canB) {\r\n      let locA = iA.teams.indexOf(teamA);\r\n      let locB = iB.teams.indexOf(teamB);\r\n      iA.teams[locA] = teamB;\r\n      iB.teams[locB] = teamA;\r\n      a.schedule.splice(a.schedule.indexOf(iA), 1);\r\n      a.schedule.push(iB);\r\n      b.schedule.splice(b.schedule.indexOf(iB), 1);\r\n      b.schedule.push(iA);\r\n      console.log(iA.teams);\r\n      console.log(iB.teams);\r\n      return null;\r\n    } else if (canA) {\r\n      return \"Team \" + b.number + \" can't do that swap.\";\r\n    } else if (canB) {\r\n      return \"Team \" + a.number + \" can't do that swap.\";\r\n    } else {\r\n      return \"Neither team can do that\";\r\n    }\r\n  }\r\n\r\n  minTravelTime(team) {\r\n    let minTravel = Infinity;\r\n    team.schedule\r\n      .filter((i) => this.getSession(i.session_id).type !== TYPES.BREAK)\r\n      .forEach((i) => {\r\n        team.schedule\r\n          .filter((i) => this.getSession(i.session_id).type !== TYPES.BREAK)\r\n          .forEach((j) => {\r\n            if (i !== j) {\r\n              let sA = i.time.mins;\r\n              let eA =\r\n                i.time.mins +\r\n                this.getSession(i.session_id).len +\r\n                (i.extraTime ? this.extraTime : 0);\r\n              let sB = j.time.mins;\r\n              let eB =\r\n                j.time.mins +\r\n                this.getSession(j.session_id).len +\r\n                (i.extraTime ? this.extraTime : 0);\r\n              let dA = sB - eA;\r\n              let dB = sA - eB;\r\n              let d = dA < 0 ? dB : dA;\r\n              minTravel = minTravel > d ? d : minTravel;\r\n            }\r\n          });\r\n      });\r\n    return minTravel;\r\n  }\r\n}\r\n","import React from 'react';\r\n\r\nimport { FormGroup, Label, Button, Col } from 'reactstrap';\r\nimport uniqueId from 'react-html-id';\r\n\r\nexport default class BooleanInput extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.toggleChecked = this.toggleChecked.bind(this);\r\n    uniqueId.enableUniqueIds(this);\r\n  }\r\n\r\n  toggleChecked() {\r\n    this.props.onChange(!this.props.value);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <FormGroup row>\r\n        <Label sm={this.props.large ? 2 : 6} for={this.nextUniqueId()}>\r\n          {this.props.label}\r\n        </Label>\r\n        <Col sm={this.props.large ? 10 : 6}>\r\n          <Button\r\n            disabled={this.props.disabled}\r\n            color={this.props.value ? 'success' : 'danger'}\r\n            onClick={this.toggleChecked}\r\n          >\r\n            {this.props.value ? 'Yes' : 'No'}\r\n          </Button>\r\n        </Col>\r\n      </FormGroup>\r\n    );\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport TextInput from \"../inputs/TextInput\";\r\nimport NumberInput from \"../inputs/NumberInput\";\r\n//import BooleanInput from '../inputs/BooleanInput';\r\n\r\nimport { EventParams } from \"../api/EventParams\";\r\n\r\nimport {\r\n  Container,\r\n  Table,\r\n  UncontrolledDropdown,\r\n  DropdownToggle,\r\n  DropdownItem,\r\n  DropdownMenu,\r\n  FormGroup,\r\n  Label,\r\n  Col,\r\n} from \"reactstrap\";\r\n\r\nimport ReactDataSheet from \"react-datasheet\";\r\nimport BooleanInput from \"../inputs/BooleanInput\";\r\n\r\nexport default class BasicsForm extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      grid: this.getDataGrid(),\r\n      awards: this.props.event.awards.map((a) => ({\r\n        name: a,\r\n        checked: true,\r\n      })),\r\n      selectedIdx: EventParams.AWARD_STYLES.findIndex((x) => {\r\n        return x === this.props.event.awardStyle;\r\n      }),\r\n    };\r\n\r\n    this.updateTitle = this.updateTitle.bind(this);\r\n    this.updateMinTravel = this.updateMinTravel.bind(this);\r\n    this.updateExtraTime = this.updateExtraTime.bind(this);\r\n    this.updateNDays = this.updateNDays.bind(this);\r\n    this.updateDays = this.updateDays.bind(this);\r\n    // this.updateJudgesAwards = this.updateJudgesAwards.bind(this);\r\n    this.updateAwardStyle = this.updateAwardStyle.bind(this);\r\n    this.toggleAward = this.toggleAward.bind(this);\r\n    this.updateConsolidatedAwards = this.updateConsolidatedAwards.bind(this);\r\n    this.handleChange = this.handleChange.bind(this);\r\n    this.getDataGrid = this.getDataGrid.bind(this);\r\n  }\r\n\r\n  getDataGrid() {\r\n    let grid = [];\r\n    for (let i = 0; i < this.props.event.days.length; i++) {\r\n      grid.push([]);\r\n      grid[i].push({ value: \"Day \" + (i + 1), readOnly: true });\r\n      grid[i].push({ value: this.props.event.days[i] });\r\n    }\r\n    return grid;\r\n  }\r\n\r\n  updateTitle(newTitle) {\r\n    let data = this.props.event;\r\n    data.title = newTitle;\r\n    this.handleChange(data);\r\n  }\r\n\r\n  updateMinTravel(value) {\r\n    let data = this.props.event;\r\n    data.minTravel = value;\r\n    this.handleChange(data);\r\n  }\r\n\r\n  // updateJudgesAwards(value) {\r\n  //     let data = this.props.event;\r\n  //     data.judgesAwards = value;\r\n  //     this.handleChange(data);\r\n  // }\r\n\r\n  updateConsolidatedAwards(value) {\r\n    let data = this.props.event;\r\n    data.consolidatedAwards = value;\r\n    this.handleChange(data);\r\n  }\r\n\r\n  updateAwardStyle(value) {\r\n    let data = this.props.event;\r\n    data.awardStyleIdx = value;\r\n    data.awards = EventParams.AWARD_NAMES[value];\r\n    this.setState({\r\n      selectedIdx: value,\r\n      awards: EventParams.AWARD_NAMES[value].map((a) => ({\r\n        name: a,\r\n        checked: true,\r\n      })),\r\n    });\r\n    this.handleChange(data);\r\n  }\r\n\r\n  toggleAward(name) {\r\n    const updatedAwards = this.state.awards.map((a) =>\r\n      a.name === name ? { ...a, checked: !a.checked } : a\r\n    );\r\n\r\n    let data = this.props.event;\r\n    data.awards = updatedAwards.filter((a) => a.checked).map((a) => a.name);\r\n\r\n    this.setState({\r\n      awards: updatedAwards,\r\n    });\r\n  }\r\n\r\n  updateExtraTime(value) {\r\n    let data = this.props.event;\r\n    data.extraTime = value;\r\n    this.handleChange(data);\r\n  }\r\n\r\n  updateDays(changes) {\r\n    const grid = this.state.grid.map((row) => [...row]);\r\n    changes.forEach(({ cell, row, col, value }) => {\r\n      grid[row][col] = { ...grid[row][col], value };\r\n    });\r\n    this.setState({ grid });\r\n    let A = [];\r\n    for (let i = 0; i < grid.length; i++) {\r\n      A.push(grid[i][1].value);\r\n    }\r\n    let S = this.props.event;\r\n    S.days = A;\r\n    this.props.onChange(S);\r\n  }\r\n\r\n  updateNDays(value) {\r\n    let E = this.props.event;\r\n    E.nDays = value;\r\n    this.setState({ grid: this.getDataGrid() });\r\n    this.handleChange(E);\r\n  }\r\n\r\n  handleChange(data) {\r\n    this.props.onChange(data);\r\n  }\r\n\r\n  render() {\r\n    let dayInput = (\r\n      <div>\r\n        {/*<NumberInput label=\"Number of days\" large value={this.props.event.days.length} onChange={this.updateNDays}/>*/}\r\n        <ReactDataSheet\r\n          data={this.state.grid}\r\n          valueRenderer={(cell) => cell.value}\r\n          sheetRenderer={(props) => (\r\n            <Table className=\"datagrid-custom\">\r\n              <thead>\r\n                <tr>\r\n                  <th>Day number</th>\r\n                  <th>Name</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>{props.children}</tbody>\r\n            </Table>\r\n          )}\r\n          onCellsChanged={(changes) => this.updateDays(changes)}\r\n        />\r\n      </div>\r\n    );\r\n    return (\r\n      <Container>\r\n        <TextInput\r\n          large\r\n          label=\"Title: \"\r\n          value={this.props.event.title}\r\n          onChange={this.updateTitle}\r\n        />\r\n        <hr />\r\n        {this.props.cosmetic || (\r\n          <NumberInput\r\n            label=\"Min. travel (mins)\"\r\n            large\r\n            value={this.props.event.minTravel}\r\n            onChange={this.updateMinTravel}\r\n          />\r\n        )}\r\n        {this.props.advanced && !this.props.cosmetic && (\r\n          <NumberInput\r\n            label=\"Extra time (mins)\"\r\n            large\r\n            value={this.props.event.extraTime}\r\n            onChange={this.updateExtraTime}\r\n          />\r\n        )}\r\n        <hr />\r\n        <h3>Days:</h3>\r\n        {dayInput}\r\n        <br />\r\n        <hr />\r\n        <h3>Awards:</h3>\r\n        <br />\r\n        <FormGroup row>\r\n          <Label sm={2} for={\"awardStyleDropDown\"}>\r\n            Preset\r\n          </Label>\r\n          <Col sm={10}>\r\n            <UncontrolledDropdown>\r\n              <DropdownToggle caret>\r\n                {EventParams.AWARD_STYLES[this.state.selectedIdx]}\r\n              </DropdownToggle>\r\n              <DropdownMenu>\r\n                {EventParams.AWARD_STYLES.map((x, i) => {\r\n                  return (\r\n                    <DropdownItem\r\n                      key={i}\r\n                      onClick={() => {\r\n                        this.updateAwardStyle(i);\r\n                      }}\r\n                    >\r\n                      {x}\r\n                    </DropdownItem>\r\n                  );\r\n                })}\r\n              </DropdownMenu>\r\n            </UncontrolledDropdown>\r\n          </Col>\r\n        </FormGroup>\r\n        {this.props.event.awardPerc}% of teams will receive awards\r\n        <FormGroup>\r\n          <Label sm={2} for={\"awardStyleDropDown\"}>\r\n            Awards\r\n          </Label>\r\n          <Table>\r\n            <tbody>\r\n              {this.state.awards.map(({ name, checked }, aIdx) => (\r\n                <tr key={aIdx}>\r\n                  <td>\r\n                    {name}{\" \"}\r\n                    {[\"Motiv\", \"Risin\", \"Engin\", \"Break\"].includes(\r\n                      name.substring(0, 5)\r\n                    ) && \"(optional)\"}\r\n                  </td>\r\n                  <td>\r\n                    {[\"Motiv\", \"Risin\", \"Engin\", \"Break\"].includes(\r\n                      name.substring(0, 5)\r\n                    ) && (\r\n                      <BooleanInput\r\n                        onChange={() => this.toggleAward(name)}\r\n                        value={checked}\r\n                      />\r\n                    )}\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </Table>\r\n        </FormGroup>\r\n        {/*<BooleanInput large label=\"Award format\" value={this.props.event.consolidatedAwards}\r\n                              onChange={this.updateConsolidatedAwards}/>*/}\r\n        {/* <NumberInput large label=\"Number of judges awards\" value={this.props.event.judgesAwards}\r\n                             onChange={this.updateJudgesAwards} min={0}/> */}\r\n      </Container>\r\n    );\r\n  }\r\n}\r\n","import React from 'react';\r\n// import ReactDOM from 'react-dom';\r\nimport {TYPES} from '../api/SessionTypes';\r\n\r\nimport MdRemoveCircleOutline from 'react-icons/lib/md/remove-circle-outline';\r\n\r\nimport {Form, Table, Button} from 'reactstrap';\r\nimport TextInput from '../inputs/TextInput';\r\nimport DateTimeInput from \"../inputs/DateTimeInput\";\r\nimport NumberInput from \"../inputs/NumberInput\";\r\nimport BooleanInput from \"../inputs/BooleanInput\";\r\n\r\nimport ReactDataSheet from 'react-datasheet';\r\n\r\nexport default class SessionForm extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        // Default values....\r\n        this.updateName = this.updateName.bind(this);\r\n        this.updateStartTime = this.updateStartTime.bind(this);\r\n        this.updateEndTime = this.updateEndTime.bind(this);\r\n        this.updateLen = this.updateLen.bind(this);\r\n        this.updateOverlap = this.updateOverlap.bind(this);\r\n        this.updateBuf = this.updateBuf.bind(this);\r\n        this.updateNSims = this.updateNSims.bind(this);\r\n        this.updateNLocs = this.updateNLocs.bind(this);\r\n        this.updateExtraFirst = this.updateExtraFirst.bind(this);\r\n        this.updateExtraEvery = this.updateExtraEvery.bind(this);\r\n        this.getDataGrid = this.getDataGrid.bind(this);\r\n        this.updateLocs = this.updateLocs.bind(this);\r\n        this.updateNoprac = this.updateNoprac.bind(this);\r\n        this.handleDelete = this.handleDelete.bind(this);\r\n    }\r\n\r\n    updateName(value) {\r\n        let S = this.props.session;\r\n        S.name = value;\r\n        this.props.onChange(S);\r\n    }\r\n\r\n    updateStartTime(value) {\r\n        let S = this.props.session;\r\n        S.startTime = value;\r\n        this.props.onChange(S);\r\n    }\r\n\r\n    updateEndTime(value) {\r\n        let S = this.props.session;\r\n        S.endTime = value;\r\n        this.props.onChange(S);\r\n    }\r\n\r\n    updateLen(value) {\r\n        let S = this.props.session;\r\n        S.len = value;\r\n        S.overlap = Math.floor(Math.min(S.overlap, (S.len + S.buf) - (S.len + S.buf) * S.nSims / S.nLocs));\r\n        this.props.onChange(S);\r\n    }\r\n\r\n    updateOverlap(value) {\r\n        let S = this.props.session;\r\n\r\n        // If overlap means matches will happen too quickly, don't update it.\r\n        if (value > (S.len + S.buf) - (S.len + S.buf) * S.nSims / S.nLocs) {\r\n            alert(\"Overlap is too large\");\r\n        } else {\r\n            S.overlap = value;\r\n            this.props.onChange(S);\r\n        }\r\n    }\r\n\r\n    updateBuf(value) {\r\n        let S = this.props.session;\r\n        S.buf = value;\r\n        S.overlap = Math.floor(Math.min(S.overlap, (S.len + S.buf) - (S.len + S.buf) * S.nSims / S.nLocs));\r\n        this.props.onChange(S);\r\n    }\r\n\r\n    updateNSims(value) {\r\n        let S = this.props.session;\r\n        S.nSims = value;\r\n        S.overlap = Math.floor(Math.min(S.overlap, (S.len + S.buf) - (S.len + S.buf) * S.nSims / S.nLocs));\r\n        this.props.onChange(S);\r\n    }\r\n\r\n    updateNoprac(value) {\r\n        let S = this.props.session;\r\n        S.noPractice = value;\r\n        this.props.onChange(S);\r\n    }\r\n\r\n    updateNLocs(value) {\r\n        let S = this.props.session;\r\n        S.nLocs = value;\r\n\r\n        S.overlap = Math.floor(Math.min(S.overlap, (S.len + S.buf) - (S.len + S.buf) * S.nSims / S.nLocs));\r\n        this.setState({grid: this.getDataGrid()});\r\n        this.props.onChange(S);\r\n    }\r\n\r\n    updateExtraFirst(value) {\r\n        let S = this.props.session;\r\n        S.extraTimeFirst = value;\r\n        this.props.onChange(S);\r\n    }\r\n\r\n    updateExtraEvery(value) {\r\n        let S = this.props.session;\r\n        S.extraTimeEvery = value;\r\n        this.props.onChange(S);\r\n    }\r\n\r\n    getDataGrid() {\r\n        let grid = [];\r\n        for (let i = 0; i < this.props.session.nLocs; i++) {\r\n            grid.push([]);\r\n            grid[i].push({value: \"Name of \" + this.props.session.type.defaultLocs + \" \" + (i + 1), readOnly: true});\r\n            grid[i].push({value: this.props.session.locations[i]});\r\n        }\r\n        return grid;\r\n    }\r\n\r\n    updateLocs(changes) {\r\n        const grid = this.getDataGrid().map(row => [...row]);\r\n        changes.forEach(({cell, row, col, value}) => {\r\n            grid[row][col] = {...grid[row][col], value}\r\n        });\r\n        this.setState({grid});\r\n        let A = [];\r\n        for (let i = 0; i < grid.length; i++) {\r\n            A.push(grid[i][1].value);\r\n        }\r\n        let S = this.props.session;\r\n        S.locations = A;\r\n        this.props.onChange(S);\r\n    }\r\n\r\n    handleDelete() {\r\n        this.props.onDelete(this.props.session);\r\n    }\r\n\r\n    render() {\r\n        let truth = this.props.session.startTime.mins < this.props.session.actualStartTime.mins;\r\n        if (this.props.cosmetic) {\r\n            return (\r\n                <div className=\"session-form\">\r\n                    <Form>\r\n                        <TextInput label=\"Title\" nolabel value={this.props.session.name} onChange={this.updateName}/>\r\n                        {this.props.session.type !== TYPES.BREAK && <ReactDataSheet\r\n                            data={this.getDataGrid()}\r\n                            valueRenderer={(cell) => cell.value}\r\n                            sheetRenderer={(props) => (\r\n                                <Table className=\"datagrid-custom\">\r\n                                    <tbody>\r\n                                    {props.children}\r\n                                    </tbody>\r\n                                </Table>\r\n                            )}\r\n                            onCellsChanged={(changes) => this.updateLocs(changes)}\r\n                        />}\r\n\r\n                    </Form>\r\n                </div>\r\n            );\r\n        } else {\r\n            return (\r\n                <div className=\"session-form\">\r\n                    <Form>\r\n                        {this.props.advanced ?\r\n                            <TextInput label=\"Title\" nolabel value={this.props.session.name}\r\n                                       onChange={this.updateName}/> :\r\n                            <h3>{this.props.session.name}</h3>\r\n                        }\r\n                        <DateTimeInput label={\"Start time\" + ((truth) ? \"*\" : \"\")} value={this.props.session.startTime}\r\n                                       onChange={this.updateStartTime}/>\r\n                        <DateTimeInput label=\"Will be done by\" immutable={this.props.session.type !== TYPES.BREAK}\r\n                                       value={(this.props.session.type !== TYPES.BREAK) ? this.props.session.actualEndTime : this.props.session.endTime}\r\n                                       onChange={this.updateEndTime}/>\r\n                        {this.props.session.type !== TYPES.BREAK &&\r\n                        <NumberInput label=\"Duration (mins)\" min={1} value={this.props.session.len}\r\n                                     onChange={this.updateLen}/>}\r\n                        {this.props.session.type !== TYPES.BREAK &&\r\n                        <NumberInput label=\"Buffer/cleanup time (mins)\" min={0} value={this.props.session.buf}\r\n                                     onChange={this.updateBuf}/>}\r\n                        {(this.props.session.type === TYPES.MATCH_ROUND || this.props.session.type === TYPES.MATCH_ROUND_PRACTICE) &&\r\n                        <NumberInput label=\"Overlap (mins)\" min={0} value={this.props.session.overlap}\r\n                                     onChange={this.updateOverlap}/>}\r\n                        {this.props.session.type !== TYPES.BREAK && (\r\n                            this.props.session.type === TYPES.JUDGING ?\r\n                                <NumberInput label=\"Number of rooms\" min={1} value={this.props.session.locations.length}\r\n                                             onChange={this.updateNLocs}/> :\r\n                                <NumberInput label=\"Number of tables\" min={1}\r\n                                             value={this.props.session.locations.length} onChange={this.updateNLocs}/>)}\r\n                        {(this.props.session.type === TYPES.MATCH_ROUND || this.props.session.type === TYPES.MATCH_ROUND_PRACTICE) &&\r\n                        <NumberInput label=\"Simultaneous Teams\" min={1} value={this.props.session.nSims}\r\n                                     onChange={this.updateNSims}/>\r\n                        }\r\n                        {this.props.advanced && this.props.session.type !== TYPES.BREAK &&\r\n                        <BooleanInput label=\"Extra time first?\" value={this.props.session.extraTimeFirst}\r\n                                      onChange={this.updateExtraFirst}/>}\r\n                        {this.props.advanced && this.props.session.type === TYPES.BREAK &&\r\n                        <BooleanInput label=\"Apply to practice times?\" value={this.props.session.noPractice}\r\n                                      onChange={this.updateNoprac}/>}\r\n                        {this.props.advanced && this.props.session.type !== TYPES.BREAK &&\r\n                        <NumberInput label=\"Extra time every N\" value={this.props.session.extraTimeEvery} min={0}\r\n                                     onChange={this.updateExtraEvery}/>}\r\n                        {this.props.session.type !== TYPES.BREAK && <strong>Locations</strong>}\r\n                        {this.props.session.type !== TYPES.BREAK && <ReactDataSheet\r\n                            data={this.getDataGrid()}\r\n                            valueRenderer={(cell) => cell.value}\r\n                            sheetRenderer={(props) => (\r\n                                <Table className=\"datagrid-custom\">\r\n                                    <tbody>\r\n                                    {props.children}\r\n                                    </tbody>\r\n                                </Table>\r\n                            )}\r\n                            onCellsChanged={(changes) => this.updateLocs(changes)}\r\n                        />}\r\n                        {this.props.session.type === TYPES.BREAK &&\r\n                        <Button color='primary' onClick={this.props.onToggle}>Break applies to...</Button>}\r\n                        {truth && <span>* Will actually start at {this.props.session.actualStartTime.time}</span>}\r\n                        <br/>\r\n                        {this.props.advanced &&\r\n                        <Button onClick={this.handleDelete} color='danger'><MdRemoveCircleOutline/> Delete</Button>}\r\n\r\n                    </Form>\r\n                    <br/>\r\n                </div>\r\n            );\r\n        }\r\n    }\r\n}\r\n","import React from 'react';\r\n\r\nimport ReactDataSheet from 'react-datasheet';\r\n\r\nimport {\r\n  Table,\r\n  Button,\r\n  Modal,\r\n  ModalHeader,\r\n  ModalBody,\r\n  ModalFooter\r\n} from 'reactstrap';\r\nimport { TeamParams } from '../api/TeamParams';\r\n\r\nimport MdAddCircleOutline from 'react-icons/lib/md/add-circle-outline';\r\nimport FaCheckCircleO from 'react-icons/lib/fa/check-circle-o';\r\nimport FaTimesCircleO from 'react-icons/lib/fa/times-circle-o';\r\nimport BooleanInput from './BooleanInput';\r\nimport DateTimeInput from './DateTimeInput';\r\n\r\nexport default class TeamList extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      toAdd: 1,\r\n      selectedTeam: 0,\r\n      modal: false\r\n    };\r\n\r\n    this.toggle = this.toggle.bind(this);\r\n\r\n    this.updateCells = this.updateCells.bind(this);\r\n    this.deleteTeam = this.deleteTeam.bind(this);\r\n    this.changeToAdd = this.changeToAdd.bind(this);\r\n    this.addTeams = this.addTeams.bind(this);\r\n\r\n    this.setTeamExclude = this.setTeamExclude.bind(this);\r\n    this.setTeamExtra = this.setTeamExtra.bind(this);\r\n    this.setTeamStartTime = this.setTeamStartTime.bind(this);\r\n    this.setTeamEndTime = this.setTeamEndTime.bind(this);\r\n  }\r\n\r\n  toggle() {\r\n    this.setState({\r\n      modal: !this.state.modal\r\n    });\r\n  }\r\n\r\n  changeToAdd(ev) {\r\n    this.setState({\r\n      toAdd: ev.target.value\r\n    });\r\n  }\r\n\r\n  getDataGrid() {\r\n    let grid = [];\r\n    for (let i = 0; i < this.props.teams.length; i++) {\r\n      grid.push([]);\r\n      grid[i].push({ value: this.props.teams[i].number });\r\n      grid[i].push({ value: this.props.teams[i].name });\r\n      grid[i].push({ value: this.props.teams[i].affiliation });\r\n      grid[i].push({ value: this.props.teams[i].pitNum });\r\n      if (this.props.advanced) {\r\n        grid[i].push({\r\n          value: this.props.teams[i].excludeJudging ? (\r\n            <FaCheckCircleO size={20} />\r\n          ) : (\r\n            <FaTimesCircleO size={20} />\r\n          )\r\n        });\r\n        grid[i].push({\r\n          value: this.props.teams[i].extraTime ? (\r\n            <FaCheckCircleO size={20} />\r\n          ) : (\r\n            <FaTimesCircleO size={20} />\r\n          )\r\n        });\r\n        grid[i].push({\r\n          value: this.props.teams[i].startTime\r\n            ? this.props.teams[i].startTime.time\r\n            : '--'\r\n        });\r\n        grid[i].push({\r\n          value: this.props.teams[i].endTime\r\n            ? this.props.teams[i].endTime.time\r\n            : '--'\r\n        });\r\n      }\r\n    }\r\n    return grid;\r\n  }\r\n\r\n  updateCells(changes) {\r\n    const grid = this.getDataGrid().map(row => [...row]);\r\n    let T = this.props.teams;\r\n    changes.forEach(({ cell, row, col, value }) => {\r\n      grid[row][col] = { ...grid[row][col], value };\r\n    });\r\n    for (let row = 0; row < grid.length; row++) {\r\n      T[row].number = grid[row][0].value;\r\n      T[row].name = grid[row][1].value;\r\n      T[row].affiliation = grid[row][2].value;\r\n    }\r\n    this.props.onChange(T);\r\n  }\r\n\r\n  addTeams() {\r\n    let T = this.props.teams;\r\n    for (let i = 0; i < this.state.toAdd; i++) {\r\n      T.push(new TeamParams(T.length + 1));\r\n    }\r\n    this.props.onChange(T);\r\n    this.setState({ grid: this.getDataGrid() });\r\n  }\r\n\r\n  deleteTeam(idx) {\r\n    let T = this.props.teams;\r\n    T.splice(idx, 1);\r\n    this.props.onChange(T);\r\n    this.setState({ grid: this.getDataGrid() });\r\n  }\r\n\r\n  setTeamExclude(b) {\r\n    let T = this.props.teams;\r\n    T[this.state.selectedTeam].excludeJudging = b;\r\n    this.props.onChange(T);\r\n  }\r\n\r\n  setTeamExtra(b) {\r\n    let T = this.props.teams;\r\n    T[this.state.selectedTeam].extraTime = b;\r\n    this.props.onChange(T);\r\n  }\r\n\r\n  setTeamStartTime(t) {\r\n    let T = this.props.teams;\r\n    T[this.state.selectedTeam].startTime = t;\r\n    this.props.onChange(T);\r\n  }\r\n\r\n  setTeamEndTime(t) {\r\n    let T = this.props.teams;\r\n    T[this.state.selectedTeam].endTime = t;\r\n    this.props.onChange(T);\r\n  }\r\n\r\n  buildModal(team) {\r\n    return (\r\n      <div>\r\n        {team.number}: {team.name}\r\n        <BooleanInput\r\n          label='Exclude from judging?'\r\n          value={team.excludeJudging}\r\n          onChange={this.setTeamExclude}\r\n        />\r\n        <BooleanInput\r\n          label='Extra time needed?'\r\n          value={team.extraTime}\r\n          onChange={this.setTeamExtra}\r\n        />\r\n        <DateTimeInput\r\n          label='Arrives at: '\r\n          value={team.startTime}\r\n          onChange={this.setTeamStartTime}\r\n        />\r\n        <DateTimeInput\r\n          label='Must leave by: '\r\n          value={team.endTime}\r\n          onChange={this.setTeamEndTime}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <Modal\r\n          isOpen={this.state.modal}\r\n          toggle={this.toggle}\r\n          className={this.props.className}\r\n        >\r\n          <ModalHeader toggle={this.toggle}>Advanced edit</ModalHeader>\r\n          <ModalBody>\r\n            {this.buildModal(this.props.teams[this.state.selectedTeam])}\r\n          </ModalBody>\r\n          <ModalFooter>\r\n            <Button color='secondary' onClick={this.toggle}>\r\n              Close\r\n            </Button>\r\n          </ModalFooter>\r\n        </Modal>\r\n        {this.props.cosmetic || (\r\n          <div>\r\n            <Button onClick={this.addTeams}>\r\n              <MdAddCircleOutline /> Add\r\n            </Button>\r\n            &nbsp;\r\n            <input\r\n              type='number'\r\n              value={this.state.toAdd}\r\n              min='1'\r\n              onChange={this.changeToAdd}\r\n            />\r\n            &nbsp; team{this.state.toAdd > 1 && 's'}&nbsp;\r\n            <br />\r\n            Number of teams: {this.props.teams.length}\r\n            <br />\r\n          </div>\r\n        )}\r\n        &nbsp;\r\n        <ReactDataSheet\r\n          data={this.getDataGrid()}\r\n          valueRenderer={cell => cell.value}\r\n          sheetRenderer={props => (\r\n            <Table className='datagrid-custom'>\r\n              <thead>\r\n                <tr>\r\n                  <th>Team number</th>\r\n                  <th>Team name</th>\r\n                  <th>Affiliation</th>\r\n                  <th>Pit No</th>\r\n                  {this.props.advanced && <th>Exclude from judging?</th>}\r\n                  {this.props.advanced && <th>Extra time?</th>}\r\n                  {this.props.advanced && <th>Arrives</th>}\r\n                  {this.props.advanced && <th>Leaves</th>}\r\n                  {this.props.advanced && <th>Advanced</th>}\r\n                  {this.props.cosmetic || <th width='20'></th>}\r\n                </tr>\r\n              </thead>\r\n              <tbody>{props.children}</tbody>\r\n            </Table>\r\n          )}\r\n          rowRenderer={props => (\r\n            <tr>\r\n              {props.children}\r\n              {this.props.advanced && (\r\n                <td className='cell'>\r\n                  <Button\r\n                    className='btn-sm'\r\n                    onClick={() => {\r\n                      this.setState({ selectedTeam: props.row });\r\n                      this.toggle();\r\n                    }}\r\n                  >\r\n                    Edit...\r\n                  </Button>\r\n                </td>\r\n              )}\r\n              {this.props.cosmetic || (\r\n                <td className='cell'>\r\n                  <Button\r\n                    color='danger'\r\n                    className='btn-sm'\r\n                    onClick={() => this.deleteTeam(props.row)}\r\n                  >\r\n                    <FaTimesCircleO size={20} />\r\n                  </Button>\r\n                </td>\r\n              )}\r\n            </tr>\r\n          )}\r\n          onCellsChanged={changes => this.updateCells(changes)}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React from 'react';\r\nimport {\r\n    Nav, NavItem, NavLink, TabContent, TabPane,\r\n    Container, Col, Row, Button,\r\n    Modal, ModalHeader, ModalBody, ModalFooter\r\n} from 'reactstrap';\r\n\r\nimport MdAddCircleOutline from 'react-icons/lib/md/add-circle-outline';\r\n\r\nimport {TYPES} from '../api/SessionTypes';\r\nimport BasicsForm from \"./BasicsForm\";\r\nimport SessionForm from \"./SessionForm\"\r\nimport TeamList from \"../inputs/TeamList\";\r\nimport BooleanInput from \"../inputs/BooleanInput\";\r\nimport SessionParams from \"../api/SessionParams\";\r\n\r\nimport ToggleButton from 'react-toggle-button';\r\n\r\nexport default class DetailView extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.toggle = this.toggle.bind(this);\r\n        this.state = {\r\n            activeTab: 'judging',\r\n            advanced: false,\r\n            modal: false,\r\n            selectedSession: null\r\n        };\r\n\r\n        this.handleScheduleChange = this.handleScheduleChange.bind(this);\r\n        this.updateSessions = this.updateSessions.bind(this);\r\n        this.updateTeams = this.updateTeams.bind(this);\r\n        this.toggleAdvanced = this.toggleAdvanced.bind(this);\r\n        this.toggleModal = this.toggleModal.bind(this);\r\n        this.toggleApplies = this.toggleApplies.bind(this);\r\n        this.updateUniversal = this.updateUniversal.bind(this);\r\n        this.deleteSession = this.deleteSession.bind(this);\r\n        this.addSession = this.addSession.bind(this);\r\n    }\r\n\r\n    toggleAdvanced() {\r\n        this.setState({\r\n            advanced: !this.state.advanced\r\n        });\r\n    }\r\n\r\n    toggle(tab) {\r\n        if (this.state.activeTab !== tab) {\r\n            this.setState({\r\n                activeTab: tab\r\n            });\r\n        }\r\n    }\r\n\r\n    handleScheduleChange(s) {\r\n        this.props.onChange(s);\r\n    }\r\n\r\n    updateTeams(T) {\r\n        let E = this.props.event;\r\n        E.teams = T;\r\n        this.props.onChange(E);\r\n        console.log(this.props.event);\r\n    }\r\n\r\n    updateSessions(S) {\r\n        let E = this.props.event;\r\n        for (let i = 0; i < E.sessions.length; i++) {\r\n            if (E.sessions[i].id === S.id) {\r\n                E.sessions[i] = S;\r\n                break;\r\n            }\r\n        }\r\n        E.syncLocs(S);\r\n        this.props.onChange(E);\r\n    }\r\n\r\n    toggleModal(session) {\r\n        let value = !this.state.modal;\r\n        let s = (value) ? session : null;\r\n        this.setState({modal: value, selectedSession: s});\r\n    }\r\n\r\n    toggleApplies(container, session, include) {\r\n        if (include && !container.applies(session.id)) {\r\n            container.appliesTo.push(session.id);\r\n        }\r\n        if (!include && container.applies(session.id)) {\r\n            container.appliesTo.splice(container.appliesTo.indexOf(session.id), 1);\r\n        }\r\n        this.updateSessions(container);\r\n    }\r\n\r\n    updateUniversal(value) {\r\n        let S = this.state.selectedSession;\r\n        if (!S) return;\r\n        S.universal = value;\r\n        this.updateSessions(S);\r\n    }\r\n\r\n    deleteSession(S) {\r\n        let E = this.props.event;\r\n        console.log(S);\r\n        E.sessions.splice(E.sessions.indexOf(S), 1);\r\n        this.props.onChange(E);\r\n    }\r\n\r\n    addSession() {\r\n        let E = this.props.event;\r\n        let S = null;\r\n        if (this.state.activeTab === 'judging')\r\n            S = new SessionParams(E.uid_counter + 1, TYPES.JUDGING, \"Judging\", 4, E.startTime.clone(), E.endTime.clone());\r\n        else if (this.state.activeTab === 'rounds') {\r\n            S = new SessionParams(E.uid_counter + 1, TYPES.MATCH_ROUND, \"Round X\", 4, E.startTime.clone(), E.endTime.clone());\r\n            S.locations = E.sessions.filter(s => s.type === TYPES.MATCH_ROUND)[0].locations;\r\n        }\r\n        else if (this.state.activeTab === 'breaks') {\r\n            S = new SessionParams(E.uid_counter + 1, TYPES.BREAK, \"Break\", 1, E.startTime.clone(), E.endTime.clone());\r\n            S.universal = true;\r\n        } else if (this.state.activeTab === 'practice') {\r\n            S = new SessionParams(E.uid_counter + 1, TYPES.MATCH_ROUND_PRACTICE, \"Practice Round X\", 4, E.startTime.clone(), E.endTime.clone());\r\n            S.locations = E.sessions.filter(s => s.type === TYPES.MATCH_ROUND)[0].locations;\r\n        }\r\n        else return;\r\n        E.sessions.push(S);\r\n        E.uid_counter = E.uid_counter + 1;\r\n        this.props.onChange(E);\r\n    }\r\n\r\n    buildModal() {\r\n        let S = this.state.selectedSession;\r\n        if (!S) return;\r\n        return (\r\n            <div>\r\n                {S.name} applies to...<br/>\r\n                {S.type === TYPES.BREAK &&\r\n                <BooleanInput label=\"All?\" value={S.universal} onChange={this.updateUniversal}/>}\r\n                <hr/>\r\n                {this.props.event.sessions.filter(S => S.type !== TYPES.BREAK).map(session =>\r\n                    <BooleanInput key={session.id} disabled={S.universal} label={session.name}\r\n                                  value={S.applies(session.id)} onChange={(x) => this.toggleApplies(S, session, x)}/>\r\n                )}\r\n            </div>\r\n        );\r\n    }\r\n\r\n\r\n    renderSessions(type) {\r\n        return (\r\n            <Row>\r\n                {this.props.event.sessions.filter(S => S.type === type).sort((a, b) => {\r\n                    return a.id - b.id;\r\n                }).map(S => (\r\n                    <Col lg={6} md={12} key={S.id}>\r\n                        <SessionForm onDelete={this.deleteSession} onToggle={() => this.toggleModal(S)}\r\n                                     advanced={this.state.advanced}\r\n                                     session={S} onChange={this.updateSessions}/>\r\n                    </Col>\r\n                ))}\r\n            </Row>\r\n        )\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <Container>\r\n                <Modal isOpen={this.state.modal} toggle={this.toggle} className={this.props.className}>\r\n                    <ModalHeader toggle={this.toggleModal}>Advanced edit</ModalHeader>\r\n                    <ModalBody>\r\n                        {this.buildModal()}\r\n                    </ModalBody>\r\n                    <ModalFooter>\r\n                        <Button color=\"secondary\" onClick={this.toggleModal}>Close</Button>\r\n                    </ModalFooter>\r\n                </Modal>\r\n\r\n                <Nav pills>\r\n                    <NavItem>\r\n                        <NavLink href=\"#\" className={(this.state.activeTab === 'basics') ? \"active\" : \"\"}\r\n                                 onClick={() => {\r\n                                     this.toggle('basics')\r\n                                 }}>\r\n                            Basics\r\n                        </NavLink>\r\n                    </NavItem>\r\n                    <NavItem>\r\n                        <NavLink href=\"#\" className={(this.state.activeTab === 'teams') ? \"active\" : \"\"}\r\n                                 onClick={() => {\r\n                                     this.toggle('teams')\r\n                                 }}>\r\n                            Teams\r\n                        </NavLink>\r\n                    </NavItem>\r\n                    <NavItem>\r\n                        <NavLink href=\"#\" className={(this.state.activeTab === 'judging') ? \"active\" : \"\"}\r\n                                 onClick={() => {\r\n                                     this.toggle('judging')\r\n                                 }}>\r\n                            Judging\r\n                        </NavLink>\r\n                    </NavItem>\r\n                    <NavItem>\r\n                        <NavLink href=\"#\" className={this.state.activeTab === 'rounds' ? \"active\" : \"\"}\r\n                                 onClick={() => {\r\n                                     this.toggle('rounds')\r\n                                 }}>\r\n                            Rounds\r\n                        </NavLink>\r\n                    </NavItem>\r\n                    <NavItem>\r\n                        <NavLink href=\"#\" className={this.state.activeTab === 'practice' ? \"active\" : \"\"}\r\n                                 onClick={() => {\r\n                                     this.toggle('practice')\r\n                                 }}>\r\n                            Practice\r\n                        </NavLink>\r\n                    </NavItem>\r\n                    <NavItem>\r\n                        <NavLink href=\"#\" className={(this.state.activeTab === 'breaks') ? \"active\" : \"\"}\r\n                                 onClick={() => {\r\n                                     this.toggle('breaks')\r\n                                 }}>\r\n                            Breaks\r\n                        </NavLink>\r\n                    </NavItem>\r\n                    &nbsp;\r\n                    <div onClick={this.toggleAdvanced}>\r\n                        <small className=\"not-text\">Advanced</small>\r\n                        <ToggleButton value={this.state.advanced} onToggle={this.toggleAdvanced}/>\r\n                    </div>\r\n                    {this.state.advanced && this.state.activeTab !== 'basics' && this.state.activeTab !== 'teams' && (\r\n                        <NavItem>\r\n                            <NavLink href=\"#\" onClick={this.addSession}>\r\n                                <MdAddCircleOutline/>\r\n                            </NavLink>\r\n                        </NavItem>)\r\n                    }\r\n\r\n                </Nav>\r\n                <TabContent activeTab={this.state.activeTab}>\r\n                    <TabPane tabId=\"basics\">\r\n                        &nbsp;\r\n                        <BasicsForm advanced={this.state.advanced} event={this.props.event}\r\n                                    onChange={this.handleScheduleChange}/>\r\n                    </TabPane>\r\n                    <TabPane tabId=\"teams\">\r\n                        &nbsp;\r\n                        <TeamList advanced={this.state.advanced} teams={this.props.event.teams}\r\n                                  onChange={this.updateTeams}/>\r\n                    </TabPane>\r\n                    <TabPane tabId=\"judging\">\r\n                        &nbsp;\r\n                        {this.renderSessions(TYPES.JUDGING)}\r\n                    </TabPane>\r\n                    <TabPane tabId=\"rounds\">\r\n                        &nbsp;\r\n                        {this.renderSessions(TYPES.MATCH_ROUND)}\r\n                    </TabPane>\r\n                    <TabPane tabId=\"practice\">\r\n                        &nbsp;\r\n                        {this.renderSessions(TYPES.MATCH_ROUND_PRACTICE)}\r\n                    </TabPane>\r\n                    <TabPane tabId=\"breaks\">\r\n                        &nbsp;\r\n                        {this.renderSessions(TYPES.BREAK)}\r\n                    </TabPane>\r\n                </TabContent>\r\n            </Container>\r\n        );\r\n    }\r\n}\r\n","import React from 'react';\r\n\r\nimport {\r\n    Navbar,\r\n    NavbarBrand,\r\n    NavbarToggler,\r\n    Collapse,\r\n    Nav,\r\n    NavItem,\r\n    NavLink,\r\n    UncontrolledDropdown,\r\n    DropdownToggle,\r\n    DropdownMenu,\r\n    DropdownItem\r\n} from 'reactstrap';\r\n\r\nimport ReactTooltip from 'react-tooltip'\r\n\r\nimport MdInfoOutline from 'react-icons/lib/md/info-outline'\r\nimport MdFileDownload from 'react-icons/lib/md/file-download'\r\nimport MdFileUpload from 'react-icons/lib/md/file-upload'\r\n\r\n// import firstlogo from \"../resources/firstlogo.png\"\r\nimport PreComputedImages from \"../resources/images.json\";\r\n\r\nexport default class TopBar extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            isOpen: false,\r\n            advanced: false,\r\n        };\r\n\r\n        this.toggle = this.toggle.bind(this);\r\n        this.onFileChange = this.onFileChange.bind(this);\r\n    }\r\n\r\n    toggle() {\r\n        this.setState({\r\n            isOpen: !this.state.isOpen\r\n        });\r\n    }\r\n\r\n    onFileChange(e, f) {\r\n        let file = f || e.target.files[0];\r\n        let reader = new FileReader();\r\n        console.log(file);\r\n\r\n        reader.onload = () => {\r\n            this.props.onLoad(reader.result);\r\n        };\r\n        reader.readAsText(file);\r\n        // reader.readAsDataURL(file);\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <Navbar color=\"light\" light expand=\"md\">\r\n                <NavbarBrand><img alt=\"\" width=\"80px\" src={PreComputedImages.firstlogo}/></NavbarBrand>\r\n                <NavbarBrand>FLL in a Box\r\n                    <small>Version {this.props.version}</small>\r\n                </NavbarBrand>\r\n                <NavbarToggler onClick={this.toggle}/>\r\n                <Collapse isOpen={this.state.isOpen} navbar>\r\n                    <Nav className=\"ml-auto\" navbar>\r\n                        <NavItem>\r\n                            <NavLink>\r\n                            </NavLink>\r\n                        </NavItem>\r\n                        <UncontrolledDropdown nav inNavbar>\r\n                            <DropdownToggle data-tip=\"Info\" nav caret>\r\n                                <MdInfoOutline size={20}/>\r\n                            </DropdownToggle>\r\n                            <DropdownMenu right>\r\n                                <a target=\"_blank\" rel=\"noopener noreferrer\"\r\n                                   href={\"https://github.com/frewes/tournament-in-a-box\"}>\r\n                                    <DropdownItem>Manual</DropdownItem>\r\n                                </a>\r\n                                <a target=\"_blank\" rel=\"noopener noreferrer\"\r\n                                   href={\"https://goo.gl/forms/rJOM0xa24MVZqVhh2\"}>\r\n                                    <DropdownItem>Report an issue...</DropdownItem>\r\n                                </a>\r\n                                <DropdownItem divider/>\r\n                                <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"mailto:fred@firstaustralia.org\">\r\n                                    <DropdownItem>Contact developer</DropdownItem>\r\n                                </a>\r\n                            </DropdownMenu>\r\n                        </UncontrolledDropdown>\r\n                        <NavItem data-tip=\"Save current progress\" onClick={() => {\r\n                            this.props.onSave();\r\n                        }}><NavLink><MdFileDownload size={20}/></NavLink></NavItem>\r\n                        <ReactTooltip place=\"bottom\" type=\"light\" effect=\"solid\"/>\r\n                        <NavItem data-tip=\"Load previous schedule\"><NavLink><label><MdFileUpload size={20}/><input\r\n                            type=\"file\" accept=\".schedule\" onChange={this.onFileChange} hidden\r\n                            ref=\"input\"/></label></NavLink></NavItem>\r\n                    </Nav>\r\n                </Collapse>\r\n            </Navbar>\r\n        );\r\n    }\r\n}\r\n","import { TYPES } from '../api/SessionTypes';\r\nimport { DateTime } from '../api/DateTime';\r\n\r\nimport Instance from './Instance';\r\nimport { shuffle, hasDone } from './utilities';\r\n\r\nexport class Scheduler {\r\n  constructor(E) {\r\n    this.event = E;\r\n  }\r\n\r\n  empty() {\r\n    this.event.sessions.forEach(session => {\r\n      session.schedule = [];\r\n      session.usesSurrogates = false;\r\n    });\r\n    this.event.teams.forEach(team => {\r\n      team.schedule = [];\r\n      team.isSurrogate = false;\r\n    });\r\n  }\r\n\r\n  evaluate() {\r\n    this.event.errors = 0;\r\n    // Add errors for each session (errors due to empty spots)\r\n    this.event.sessions.forEach(session => {\r\n      session.errors = 0;\r\n      session.schedule.forEach(instance => {\r\n        session.errors +=\r\n          instance.teams.length - instance.teams.filter(t => t).length;\r\n      });\r\n      this.event.errors += session.errors;\r\n    });\r\n    // Adelaide Ken bug: Teams getting assigned weirdly. Count the number of these errors.\r\n    this.event.teams.forEach(team => {\r\n      for (let j = 0; j < team.schedule.length; j++) {\r\n        if (team.schedule[j].teams.indexOf(team.id) === -1) {\r\n          this.event.errors++;\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  buildAllTables() {\r\n    this.empty();\r\n    let willWork = null;\r\n    this.event.sessions.sort((a, b) => {\r\n      if (a.id === b.id) {\r\n        if (a.type.priority === b.type.priority)\r\n          return a.startTime.mins - b.startTime.mins;\r\n        return a.type.priority - b.type.priority;\r\n      } else {\r\n        return a.id - b.id;\r\n      }\r\n    });\r\n    this.event.sessions.forEach(session => {\r\n      // Make sure the start time isn't in a break\r\n      if (session.type !== TYPES.BREAK)\r\n        session.actualStartTime.mins = this.event.timeInc(\r\n          session.startTime,\r\n          0,\r\n          session.id\r\n        );\r\n      let end = -Infinity;\r\n      if (\r\n        !(\r\n          session.type === TYPES.MATCH_ROUND ||\r\n          session.type === TYPES.MATCH_ROUND_PRACTICE\r\n        )\r\n      ) {\r\n        end = this.tableSession(session);\r\n        session.actualEndTime.mins = end;\r\n        if (session.type !== TYPES.BREAK && end > session.endTime.mins) {\r\n          if (willWork) willWork = willWork + ', ' + session.name;\r\n          else willWork = session.name;\r\n        }\r\n      }\r\n    });\r\n    let T = TYPES.MATCH_ROUND_PRACTICE;\r\n    let end = -Infinity;\r\n    let offset = 0;\r\n    let locOffset = 0;\r\n    this.event.sessions\r\n      .filter(s => s.type === T)\r\n      .forEach(session => {\r\n        if (session.actualStartTime.mins < end)\r\n          session.actualStartTime.mins = end;\r\n        end = this.tableSession(session, offset, locOffset);\r\n        session.actualEndTime.mins = end;\r\n        if (session.schedule[session.schedule.length - 1].loc === 0)\r\n          locOffset = 1;\r\n        else locOffset = 0;\r\n        offset += session.schedule.length;\r\n        if (end > session.endTime.mins) {\r\n          if (willWork) willWork = willWork + ', ' + session.name;\r\n          else willWork = session.name;\r\n        }\r\n      });\r\n    T = TYPES.MATCH_ROUND;\r\n    this.event.sessions\r\n      .filter(s => s.type === T)\r\n      .forEach(session => {\r\n        if (session.actualStartTime.mins < end)\r\n          session.actualStartTime.mins = end;\r\n        end = this.tableSession(session, offset, locOffset);\r\n        session.actualEndTime.mins = end;\r\n        if (session.schedule[session.schedule.length - 1].loc === 0)\r\n          locOffset = 1;\r\n        else locOffset = 0;\r\n        offset += session.schedule.length;\r\n        if (end > session.endTime.mins) {\r\n          if (willWork) willWork = willWork + ', ' + session.name;\r\n          else willWork = session.name;\r\n        }\r\n      });\r\n  }\r\n\r\n  /**\r\n     Sets up all the timeslots for the given session.\r\n     numOffset: offset at which to start counting (facilitates round numbering)\r\n     @return Returns the time the schedule is finished (i.e. the end time of the last event)\r\n     */\r\n  tableSession(session, numOffset = 0, locD = 0) {\r\n    let teams = [];\r\n    this.event.teams.forEach(team => {\r\n      if (session.type !== TYPES.JUDGING || !team.excludeJudging)\r\n        teams.push(team);\r\n    });\r\n    if (session.type === TYPES.BREAK) session.nSims = teams.length;\r\n    let now = new DateTime(session.actualStartTime.mins);\r\n    let L = Math.ceil(teams.length / session.nSims);\r\n    let lastNTeams = teams.length % session.nSims;\r\n    lastNTeams = lastNTeams === 0 ? session.nSims : lastNTeams;\r\n    session.schedule = new Array(L);\r\n\r\n    // Figure out how many rounds to make extra long\r\n    let everyN = session.extraTimeEvery > 0 ? session.extraTimeEvery : Infinity;\r\n    let extraTimeTeams = teams.filter(x => x.extraTime).length;\r\n\r\n    let roundsSinceExtra = 0;\r\n    let flag = false;\r\n\r\n    let extraRoundsNeeded = Math.ceil(extraTimeTeams / session.nSims);\r\n    let extraRoundsMade =\r\n      (session.extraTimeFirst ? 1 : 0) +\r\n      (session.extraTimeEvery > 0 ? L / everyN : 0);\r\n    if (extraRoundsMade < extraRoundsNeeded) {\r\n      everyN = (L + 1) / (extraRoundsNeeded + 1);\r\n      everyN += Math.round(Math.random() * 2);\r\n      roundsSinceExtra += Math.floor(Math.random() * L);\r\n      flag = true;\r\n    }\r\n    let extraRounds = 0;\r\n    if (session.type === TYPES.BREAK) everyN = Infinity;\r\n    for (let i = 0; i < L; i++) {\r\n      let d = Math.floor(session.nLocs / session.nSims);\r\n      let locOffset = ((i + locD) % d) * session.nSims;\r\n      if (i % L < L - 1) {\r\n        // Check that the schedule will finish...\r\n        let whenDone = this.event.timeInc(now, session.len, session.id);\r\n        if (whenDone !== now.mins + session.len) now = new DateTime(whenDone);\r\n        session.schedule[i] = new Instance(\r\n          session.id,\r\n          i + 1 + numOffset,\r\n          now,\r\n          new Array(session.nSims),\r\n          locOffset\r\n        );\r\n        now = new DateTime(\r\n          this.event.timeInc(\r\n            now,\r\n            session.len + session.buf - session.overlap,\r\n            session.id\r\n          )\r\n        );\r\n        roundsSinceExtra++;\r\n        if ((i === 0 && session.extraTimeFirst) || roundsSinceExtra >= everyN) {\r\n          if (!(flag && extraRounds >= extraRoundsNeeded)) {\r\n            session.schedule[i].extra = true;\r\n            now = new DateTime(\r\n              this.event.timeInc(now, this.event.extraTime, session.id)\r\n            );\r\n            roundsSinceExtra = 0;\r\n            extraRounds++;\r\n          }\r\n        }\r\n      } else {\r\n        session.schedule[i] = new Instance(\r\n          session.id,\r\n          i + 1 + numOffset,\r\n          now,\r\n          new Array(lastNTeams),\r\n          locOffset\r\n        );\r\n        now = new DateTime(\r\n          now.mins + session.len + session.buf - session.overlap\r\n        );\r\n        roundsSinceExtra++;\r\n        if (roundsSinceExtra >= everyN) {\r\n          if (flag && extraRounds >= extraRoundsNeeded) {\r\n            console.log('Enough rounds added');\r\n          } else {\r\n            session.schedule[i].extra = true;\r\n            now = new DateTime(now.mins + this.event.extraTime);\r\n          }\r\n        }\r\n      }\r\n      // Not sure why this existed\r\n      // for (var t = 0; t < session.schedule[i].teams.length; t++) {\r\n      //     session.schedule[i].teams[t] = null;\r\n      // }\r\n    }\r\n    this.sortThingsOut();\r\n    return now.mins;\r\n  }\r\n\r\n  // Make sure everything is consistent.\r\n  sortThingsOut() {\r\n    this.event.sessions.forEach(session => {\r\n      session.schedule.forEach(instance => {\r\n        instance.time.days = this.event.days;\r\n      });\r\n    });\r\n  }\r\n\r\n  fillAllTables() {\r\n    this.initialFill();\r\n    this.swapFill();\r\n  }\r\n\r\n  initialFill() {\r\n    let oneSetOfTeams = this.event.teams.slice();\r\n    shuffle(oneSetOfTeams);\r\n    this.event.sessions.forEach(session => {\r\n      let teams = [];\r\n      shuffle(oneSetOfTeams).forEach(team => {\r\n        if (session.type !== TYPES.JUDGING || !team.excludeJudging)\r\n          teams.push(team);\r\n      });\r\n      session.schedule.forEach(instance => this.fillInstance(instance, teams));\r\n    });\r\n  }\r\n\r\n  fillInstance(instance, teams) {\r\n    for (let t = 0; t < instance.teams.length; t++) {\r\n      let T = -1;\r\n      for (let k = 0; k < teams.length; k++) {\r\n        if (this.event.canDo(teams[k], instance)) {\r\n          T = k;\r\n          break;\r\n        }\r\n      }\r\n      if (T !== -1) {\r\n        let team = teams.splice(T, 1)[0];\r\n        instance.teams[t] = team.id;\r\n        team.schedule.push(instance);\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n     Go through all sessions in the event and fix up errors through first-order swapping.\r\n     **/\r\n  swapFill(event) {\r\n    // 10 attempts.  Why not?\r\n    for (let j = 0; j < 10; j++) {\r\n      let fixed = 0;\r\n      this.evaluate();\r\n      this.event.sessions\r\n        .filter(s => s.errors > 0)\r\n        .forEach(s => {\r\n          fixed += this.swapFillSession(s, this.event.teams);\r\n        });\r\n      if (fixed === 0) break;\r\n    }\r\n  }\r\n\r\n  /**\r\n     Go through a given session, fix all errors with first-order swapping.\r\n     TODO: deal with the case where instances > 1?  How to do this?\r\n     @return Number of errors fixed\r\n     **/\r\n  swapFillSession(session, teams) {\r\n    let fixed = 0;\r\n    // Make list of teams that aren't in this session enough (lost set)\r\n    let lostTeams = [];\r\n    for (let i = 0; i < teams.length; i++)\r\n      if (hasDone(teams[i], session.id) < session.instances)\r\n        lostTeams.push(teams[i]);\r\n    // Find every empty slot in the schedule\r\n    session.schedule.forEach(instance_A => {\r\n      for (let j = 0; j < instance_A.teams.length; j++) {\r\n        if (instance_A.teams[j] != null) continue;\r\n        // Found empty slot!\r\n        // Now find a team A from the full set that can do this time\r\n        for (let tA = 0; tA < teams.length; tA++) {\r\n          if (!this.event.canDo(teams[tA], instance_A, session.id)) continue;\r\n          // Now, find a team B from the lost set that can take team A's instance\r\n          let instance_B = null;\r\n          for (let x = 0; x < teams[tA].schedule.length; x++) {\r\n            if (teams[tA].schedule[x].session_id === instance_A.session_id) {\r\n              instance_B = teams[tA].schedule.splice(x, 1)[0];\r\n              break;\r\n            }\r\n          }\r\n          let f = fixed;\r\n          if (instance_B == null) {\r\n            continue;\r\n            // Team A can just do instance A; no swap required, add the team in.\r\n            // instance_A.teams[j] = teams[tA].uid;\r\n            // teams[tA].schedule.push(instance_A);\r\n            // fixed++;\r\n            // break;\r\n          }\r\n          for (let tB = 0; tB < lostTeams.length; tB++) {\r\n            if (!this.event.canDo(lostTeams[tB], instance_B)) continue;\r\n            // Found a team that can swap with A!\r\n            // Now, swap teams A and B\r\n            // Add instanceA to teamA\r\n            instance_A.teams[j] = teams[tA].id;\r\n            teams[tA].schedule.push(instance_A);\r\n            // Add instanceB to teamB\r\n            for (let idx = 0; idx < instance_B.teams.length; idx++) {\r\n              if (instance_B.teams[idx] === teams[tA].id) {\r\n                instance_B.teams[idx] = lostTeams[tB].id;\r\n              }\r\n            }\r\n            lostTeams[tB].schedule.push(instance_B);\r\n            lostTeams.splice(tB, 1);\r\n            fixed++;\r\n            break;\r\n          }\r\n          if (f === fixed) teams[tA].schedule.push(instance_B);\r\n          else break;\r\n        }\r\n      }\r\n    });\r\n    return fixed;\r\n  }\r\n}\r\n","import React from 'react';\r\n\r\nimport {Table} from 'reactstrap';\r\n\r\nimport { TYPES } from '../api/SessionTypes';\r\n\r\nexport default class DayScheduleView extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.getItems = this.getItems.bind(this);\r\n    }\r\n\r\n\r\n    getItems() {\r\n        let sessions = this.props.event.sessions;\r\n        let sorted = sessions.sort((a, b) => {\r\n            return a.actualStartTime.mins - b.actualStartTime.mins\r\n        });\r\n        let items = [];\r\n        for (let i = 0; i < sorted.length; i++) {\r\n            items.push({\r\n                _id: i + 1,\r\n                sTime: sorted[i].actualStartTime.time,\r\n                eTime: sorted[i].actualEndTime.time,\r\n                contents: sorted[i].name,\r\n                break: sorted[i].type === TYPES.BREAK\r\n            });\r\n        }\r\n        return items;\r\n    }\r\n\r\n    render() {\r\n        let items = this.getItems();\r\n        return (<div>\r\n            <Table>\r\n                <thead>\r\n                <tr>\r\n                    <th>Start</th>\r\n                    <th>End</th>\r\n                    <th>Event</th>\r\n                </tr>\r\n                </thead>\r\n                <tbody>\r\n                {items.map(x => {\r\n                    return (\r\n                        <tr key={x._id} className={x.break ? \"break\" : \"\"}>\r\n                            <td>{x.sTime}</td>\r\n                            <td>{x.eTime}</td>\r\n                            <td>{x.contents}</td>\r\n                        </tr>);\r\n                })}\r\n                </tbody>\r\n            </Table>\r\n        </div>)\r\n    }\r\n}\r\n","import React from 'react';\r\nimport ReactDataSheet from 'react-datasheet';\r\n\r\nimport {Table} from 'reactstrap';\r\n\r\n\r\nexport default class SingleScheduleView extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            swapee: null\r\n        }\r\n\r\n        this.select = this.select.bind(this);\r\n    }\r\n\r\n    select(i, j) {\r\n        if (!this.props.editable) return; // Only swap if \"editable\"\r\n        if (i === 0 || j < 2) return; // Don't swap headers or times\r\n        let g = this.props.data;\r\n        let x = g[i][j];\r\n        if (!this.state.swapee) {\r\n            this.setState({swapee: x});\r\n        } else if (this.state.swapee === x) {\r\n            this.setState({swapee: null});\r\n        } else {\r\n            // SWAP\r\n            this.props.onSwap(this.props.id, this.state.swapee, x);\r\n            this.setState({swapee: null});\r\n            // alert(\"Not yet implemented\");\r\n        }\r\n    }\r\n\r\n    renderAsDataGrid() {\r\n        return (\r\n            <div>\r\n                <strong>{this.props.session.name}</strong>\r\n                <ReactDataSheet\r\n                    data={this.props.data}\r\n                    valueRenderer={(cell) => cell.value}\r\n                    sheetRenderer={(props) => (\r\n                        <Table className=\"datagrid-custom\">\r\n                            <tbody>\r\n                            {props.children}\r\n                            </tbody>\r\n                        </Table>\r\n                    )}\r\n                />\r\n            </div>\r\n        );\r\n    }\r\n\r\n    renderAsTable() {\r\n        return (\r\n            <div>\r\n                <strong>{this.props.session.name}</strong>\r\n                <Table className={this.props.editable ? \"datagrid-custom unselectable\" : \"datagrid-custom\"}>\r\n                    <tbody>\r\n                    {this.props.data.map((x, i) =>\r\n                        <tr key={i}>{x.map((y, j) =>\r\n                            <td onClick={() => this.select(i, j)} colSpan={y.colSpan}\r\n                                className={(this.state.swapee === y) ? y.className + \" selected\" : y.className}\r\n                                key={j}>{y.value}</td>)\r\n                        }</tr>)\r\n                    }\r\n                    </tbody>\r\n                </Table>\r\n            </div>\r\n        );\r\n\r\n    }\r\n\r\n    render() {\r\n        return this.renderAsTable();\r\n    }\r\n}","import React from 'react';\r\nimport ReactDataSheet from 'react-datasheet';\r\n\r\nimport {Table} from 'reactstrap';\r\n\r\n\r\nexport default class IndivScheduleView extends React.Component {\r\n\r\n    renderAsDataSheet() {\r\n        return (\r\n            <div>\r\n                <strong>Individual Schedules</strong>\r\n                <ReactDataSheet\r\n                    data={this.props.data}\r\n                    valueRenderer={(cell) => cell.value}\r\n                    sheetRenderer={(props) => (\r\n                        <Table className=\"datagrid-custom\">\r\n                            <tbody>\r\n                            {props.children}\r\n                            </tbody>\r\n                        </Table>\r\n                    )}\r\n                />\r\n            </div>\r\n        );\r\n    }\r\n\r\n    renderAsTable() {\r\n        return (\r\n            <div>\r\n                <strong>Individual Schedules</strong>\r\n                <Table className={\"datagrid-custom\"}>\r\n                    <tbody>\r\n                    {this.props.data.map((x, i) =>\r\n                        <tr key={i}>{x.map((y, j) =>\r\n                            <td colSpan={y.colSpan} className={y.className} key={j}>{y.value}</td>)\r\n                        }</tr>)\r\n                    }\r\n                    </tbody>\r\n                </Table>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    render() {\r\n        return this.renderAsTable();\r\n    }\r\n\r\n}","import React from 'react';\r\n\r\nimport { Input, Col, FormGroup, Label, Button } from 'reactstrap';\r\nimport uniqueId from 'react-html-id';\r\nimport FaTimesCircleO from 'react-icons/lib/fa/times-circle-o';\r\n\r\nexport default class VolunteerInput extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.handleCountChange = this.handleCountChange.bind(this);\r\n    this.handleNameChange = this.handleNameChange.bind(this);\r\n    this.updateVol = this.updateVol.bind(this);\r\n\r\n    uniqueId.enableUniqueIds(this);\r\n  }\r\n\r\n  handleCountChange(event) {\r\n    let V = this.props.vol;\r\n    let newCount = event.target.value;\r\n    V.staff = V.staff.slice(0, newCount - 1);\r\n    newCount -= V.staff.length;\r\n    while (newCount-- > 0) V.staff.push('');\r\n    this.props.onChange(V);\r\n  }\r\n\r\n  handleNameChange(event) {\r\n    let V = this.props.vol;\r\n    V.name = event.target.value;\r\n    this.props.onChange(V);\r\n  }\r\n\r\n  updateVol(key, event) {\r\n    let V = this.props.vol;\r\n    V.staff[key] = event.target.value;\r\n    this.props.onChange(V);\r\n  }\r\n\r\n  render() {\r\n    return this.props.editable ? (\r\n      <FormGroup>\r\n        <FormGroup row>\r\n          <Col sm={3}>\r\n            <Input\r\n              type='text'\r\n              value={this.props.vol.name}\r\n              onChange={this.handleNameChange}\r\n            />\r\n          </Col>\r\n          <Col sm={3}>\r\n            <Input\r\n              type='number'\r\n              min={1}\r\n              value={this.props.vol.staff.length}\r\n              onChange={this.handleCountChange}\r\n            />\r\n          </Col>\r\n          <Col sm={5}>\r\n            {this.props.vol.staff.map((v, i) => {\r\n              return (\r\n                <Input\r\n                  key={i}\r\n                  type='text'\r\n                  value={v ? v : ''}\r\n                  onChange={e => {\r\n                    this.updateVol(i, e);\r\n                  }}\r\n                />\r\n              );\r\n            })}\r\n          </Col>\r\n          <Col sm={1}>\r\n            <Button color='danger' onClick={this.props.onDelete}>\r\n              <FaTimesCircleO size={20} />\r\n            </Button>\r\n          </Col>\r\n        </FormGroup>\r\n      </FormGroup>\r\n    ) : (\r\n      <FormGroup>\r\n        <FormGroup row>\r\n          <Label sm={4} for={this.nextUniqueId()}>\r\n            {this.props.vol.name} ({this.props.vol.staff.length})\r\n          </Label>\r\n          <Col sm={8}>\r\n            {this.props.vol.staff.map((v, i) => {\r\n              return (\r\n                <Input\r\n                  key={i}\r\n                  type='text'\r\n                  value={v ? v : ''}\r\n                  onChange={e => {\r\n                    this.updateVol(i, e);\r\n                  }}\r\n                />\r\n              );\r\n            })}\r\n          </Col>\r\n        </FormGroup>\r\n      </FormGroup>\r\n    );\r\n  }\r\n}\r\n","import React, {Component} from 'react';\r\n\r\nimport {Container, FormGroup, Alert, Col, Row} from 'reactstrap';\r\nimport VolunteerInput from \"../inputs/VolunteerInput\";\r\nimport {saveToFile_csv} from \"../scheduling/utilities.js\";\r\n\r\nexport default class VolunteerView extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            editable: false\r\n        };\r\n\r\n        this.toggleEditable = this.toggleEditable.bind(this);\r\n        this.onChange = this.onChange.bind(this);\r\n        this.downloadTemplate = this.downloadTemplate.bind(this);\r\n        this.deleteVol = this.deleteVol.bind(this);\r\n        this.importVols = this.importVols.bind(this);\r\n    }\r\n\r\n    toggleEditable() {\r\n        this.setState({editable: !this.state.editable});\r\n    }\r\n\r\n    onChange(v, i) {\r\n        let V = this.props.data;\r\n\r\n        V[i] = v;\r\n        this.props.onChange(V);\r\n    }\r\n\r\n    downloadTemplate() {\r\n        let content = \"role,names\\n\";\r\n        this.props.data.forEach(v => {\r\n            content += v.name + \",\"\r\n            v.staff.forEach((s, i) => {\r\n                if (s === \"\")\r\n                    content += \"Name \" + (i + 1) + \",\";\r\n                else\r\n                    content += s + \",\"\r\n            });\r\n            content += \"\\n\";\r\n        });\r\n        saveToFile_csv(\"volunteer_template.csv\", content);\r\n    }\r\n\r\n    deleteVol(idx) {\r\n        let V = this.props.data;\r\n        V.splice(idx, 1);\r\n        this.props.onChange(V);\r\n    }\r\n\r\n    importVols(e, f) {\r\n        let file = f || e.target.files[0];\r\n        let reader = new FileReader();\r\n        reader.onload = (e) => {\r\n            let V = [];\r\n            let lines = reader.result.split(\"\\n\");\r\n            if (lines[0].startsWith(\"role,names\"))\r\n                lines.shift();\r\n            lines.forEach(l => {\r\n                let fields = l.split(',');\r\n                if (!fields) return;\r\n                console.log(fields);\r\n                let name = fields.shift();\r\n                console.log(fields);\r\n                if (!name) return;\r\n                V.push({name: name, staff: fields.filter(f => f !== \"\")});\r\n            });\r\n            console.log(lines);\r\n            this.props.onChange(V);\r\n        };\r\n        reader.readAsText(file);\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <Container>\r\n                <br/>\r\n                <FormGroup>\r\n                    <Row>\r\n                        <Col sm={4}>\r\n                            <Alert onClick={this.toggleEditable}\r\n                                   color={this.state.editable ? \"success\" : \"danger\"}>Editable?</Alert>\r\n                        </Col>\r\n                        <Col sm={4}>\r\n                            <label onClick={this.downloadTemplate}>\r\n                                <Alert color=\"info\">Download sample template</Alert>\r\n                            </label>\r\n                        </Col>\r\n                        <Col sm={4}>\r\n                            <label>\r\n                                <Alert>Import from template</Alert>\r\n                                <input type=\"file\" accept=\".csv\" hidden ref=\"input\" onChange={this.importVols}/>\r\n                            </label>\r\n                        </Col>\r\n                    </Row>\r\n                    {this.props.data.map((vol, i) => {\r\n\r\n                        return (\r\n                            <VolunteerInput key={i} vol={vol} editable={this.state.editable}\r\n                                            onDelete={() => this.deleteVol(i)} onChange={(v) => this.onChange(v, i)}/>\r\n                        );\r\n                    })}\r\n                </FormGroup>\r\n            </Container>\r\n        );\r\n    }\r\n}\r\n","import React, {Component} from 'react';\r\n\r\nimport {Container, Row, Alert, Card} from 'reactstrap';\r\n\r\nexport default class SponsorView extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.addSponsor = this.addSponsor.bind(this);\r\n        this.deleteSponsor = this.deleteSponsor.bind(this);\r\n    }\r\n\r\n    addSponsor(e, f) {\r\n        let file = f || e.target.files[0];\r\n        console.log(file);\r\n        let reader = new FileReader();\r\n        reader.onload = (e) => {\r\n            let E = this.props.data;\r\n            let arr = file.name.split('.');\r\n            let extension = arr.pop();\r\n            E.addLocalSponsor({\r\n                name: arr.join('.'),\r\n                data: reader.result,\r\n                extension: extension\r\n            });\r\n            console.log(E.sponsors);\r\n            this.props.handleChange(E.sponsors);\r\n        };\r\n        reader.readAsDataURL(file);\r\n    }\r\n\r\n    deleteSponsor(i) {\r\n        // let i = e.target.idx;\r\n        // console.log(e.target);\r\n        console.log(i);\r\n        let E = this.props.data;\r\n        E.deleteLocalSponsor(i);\r\n        this.props.handleChange(E.sponsors);\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <Container>\r\n                <Row><h1>National sponsors</h1></Row>\r\n                <Row>\r\n                    {this.props.data.sponsors.national.map((img, i) => {\r\n                        return (\r\n                            <Card key={i} sm={3}>\r\n                                <img idx={i} alt={img.name} src={img.data} height={100}/>\r\n                            </Card>\r\n                        );\r\n                    })}\r\n                    <br/>\r\n                </Row>\r\n                <Row><h1>Local sponsors</h1></Row>\r\n                <Row>\r\n                    <small>Click logo to delete (local only)</small>\r\n                </Row>\r\n                <Row>\r\n                    {this.props.data.sponsors.local.map((img, i) => {\r\n                        return (\r\n                            <Card onClick={() => this.deleteSponsor(i)} key={i} sm={12}>\r\n                                <img idx={i} alt={img.name} src={img.data} height={100}/>\r\n                            </Card>\r\n                        );\r\n                    })}\r\n                </Row>\r\n                <Row sm={12}>\r\n                    <label>\r\n                        <Alert color=\"success\">Add!</Alert>\r\n                        <input type=\"file\" accept=\"image/*\" hidden ref=\"input\" onChange={this.addSponsor}/>\r\n                    </label>\r\n                </Row>\r\n            </Container>\r\n        );\r\n    }\r\n}\r\n","import pdfMake from 'pdfmake/build/pdfmake';\r\nimport pdfFonts from 'pdfmake/build/vfs_fonts';\r\n\r\npdfMake.vfs = pdfFonts.pdfMake.vfs;\r\n\r\nexport class PdfDoc {\r\n  constructor(format, title, landscape) {\r\n    this._format = format;\r\n    this.imageDict = {\r\n      header: this._format.header,\r\n      logo1: this._format.logoTopLeft,\r\n      logo2: this._format.logoTopRight,\r\n      logo3: this._format.logoBotLeft,\r\n      logo4: this._format.logoBotRight\r\n    };\r\n    this.styleDict = {\r\n      header: {\r\n        fontSize: this._format.titleFontSize,\r\n        bold: true,\r\n        alignment: 'center'\r\n      },\r\n      footer: {\r\n        fontSize: this._format.baseFontSize + 2,\r\n        bold: true,\r\n        alignment: 'center',\r\n        color: 'grey'\r\n      },\r\n      header2: {\r\n        fontSize: this._format.titleFontSize + 2,\r\n        bold: true,\r\n        alignment: 'center'\r\n      },\r\n      signTitle: { fontSize: 64, bold: true, alignment: 'center' },\r\n      signSubtitle: {\r\n        fontSize: 44,\r\n        bold: true,\r\n        alignment: 'center',\r\n        color: 'grey'\r\n      },\r\n      certTitle: { fontSize: 52, bold: true, alignment: 'center' },\r\n      certSubtitle: {\r\n        fontSize: 36,\r\n        bold: true,\r\n        alignment: 'center',\r\n        color: 'grey'\r\n      },\r\n      tablebody: {\r\n        fontSize: this._format.baseFontSize - 4,\r\n        alignment: 'center'\r\n      },\r\n      extraTime: { alignment: 'center', color: 'red' },\r\n      tablehead: {\r\n        fontSize: this._format.baseFontSize - 2,\r\n        bold: true,\r\n        alignment: 'center'\r\n      },\r\n      breakrow: { bold: true, alignment: 'center', fillColor: '#eeeeee' },\r\n      teamEntry: { fontSize: this._format.baseFontSize, alignment: 'center' }\r\n    };\r\n    // \"Doc\" object is used by pdf generator.\r\n    this.doc = {};\r\n    this.doc.content = [];\r\n    this.doc.header = {\r\n      text: title,\r\n      style: 'header',\r\n      //Left, top, right, bottom\r\n      margin: [0, 50, 0, 20]\r\n    };\r\n    this.doc.background = this.portraitBackground();\r\n    this.doc.footer = {\r\n      text: this.format.footerText,\r\n      style: 'footer',\r\n      margin: [0, 50, 0, 0]\r\n    };\r\n    this.doc.pageMargins = [40, 120, 40, 130];\r\n    this.doc.pageSize = 'A4';\r\n    this.doc.images = this.imageDict;\r\n    this.doc.styles = this.styleDict;\r\n    if (landscape) {\r\n      this.doc.pageOrientation = 'landscape';\r\n      this.doc.background = this.landscapeBackground();\r\n    }\r\n    this.filename = 'file';\r\n    this.blob = null;\r\n  }\r\n\r\n  get format() {\r\n    return this._format;\r\n  }\r\n\r\n  addContent(content) {\r\n    this.doc.content.push(content);\r\n  }\r\n\r\n  set filename(x) {\r\n    this._filename = x;\r\n  }\r\n\r\n  get filename() {\r\n    return this._filename;\r\n  }\r\n\r\n  empty() {\r\n    return this.doc.content.length === 0;\r\n  }\r\n\r\n  addPageBreak() {\r\n    this.doc.content.push({ text: ' ', pageBreak: 'after' });\r\n  }\r\n\r\n  DrawLine() {\r\n    this.doc.content.push({\r\n      canvas: [{ type: 'line', x1: 100, y1: 5, x2: 660, y2: 5, lineWidth: 3 }],\r\n      margin: [0, 60, 0, 10]\r\n    });\r\n  }\r\n\r\n  download(filename) {\r\n    if (!filename) filename = this.filename;\r\n    try {\r\n      pdfMake.createPdf(this.doc).download(filename);\r\n    } catch (err) {\r\n      alert('Error printing: ' + err.message);\r\n    }\r\n  }\r\n\r\n  open() {\r\n    try {\r\n      pdfMake.createPdf(this.doc).open();\r\n    } catch (err) {\r\n      alert('Error opening: ' + err.message);\r\n    }\r\n  }\r\n\r\n  getBlobPromise() {\r\n    return new Promise((resolve, reject) => {\r\n      pdfMake.createPdf(this.doc).getBlob(blob => {\r\n        resolve(blob);\r\n      });\r\n    });\r\n  }\r\n\r\n  chomp() {\r\n    this.doc.content.splice(this.doc.content.length - 1);\r\n  }\r\n\r\n  portraitBackground() {\r\n    return [\r\n      // margin: [left, top, right, bottom]\r\n      {\r\n        image: 'header',\r\n        width: 530,\r\n        height: 20,\r\n        alignment: 'center',\r\n        margin: [0, 10, 0, 0]\r\n      },\r\n      {\r\n        table: {\r\n          widths: ['*', 'auto', '*'],\r\n          body: [\r\n            [\r\n              {\r\n                image: 'logo1',\r\n                fit: [100, 65],\r\n                margin: [50, 0, 0, 0],\r\n                alignment: 'left'\r\n              }, // Top left?\r\n              { text: '' },\r\n              {\r\n                image: 'logo2',\r\n                fit: [100, 65],\r\n                margin: [50, 0, 0, 0],\r\n                alignment: 'right'\r\n              } // Top right\r\n            ]\r\n          ]\r\n        },\r\n        layout: 'noBorders'\r\n      },\r\n      { text: '', margin: 310, alignment: 'center' },\r\n      {\r\n        table: {\r\n          widths: ['*', 'auto', '*'],\r\n          body: [\r\n            [\r\n              {\r\n                image: 'logo3',\r\n                fit: [100, 65],\r\n                margin: [50, 0, 0, 0],\r\n                alignment: 'left'\r\n              }, // Top left?\r\n              { text: '' },\r\n              {\r\n                image: 'logo4',\r\n                fit: [100, 65],\r\n                margin: [50, 0, 0, 0],\r\n                alignment: 'right'\r\n              } // Top right\r\n            ]\r\n          ]\r\n        },\r\n        layout: 'noBorders'\r\n      },\r\n      { image: 'header', width: 530, height: 20, alignment: 'center' }\r\n    ];\r\n  }\r\n\r\n  landscapeBackground() {\r\n    return [\r\n      // margin: [left, top, right, bottom]\r\n      {\r\n        image: 'header',\r\n        width: 800,\r\n        height: 20,\r\n        alignment: 'center',\r\n        margin: [0, 10, 0, 0]\r\n      },\r\n      {\r\n        table: {\r\n          widths: ['*', 'auto', '*'],\r\n          body: [\r\n            [\r\n              {\r\n                image: 'logo1',\r\n                fit: [100, 65],\r\n                margin: [50, 0, 0, 0],\r\n                alignment: 'left'\r\n              }, // Top left?\r\n              { text: '' },\r\n              {\r\n                image: 'logo2',\r\n                fit: [100, 65],\r\n                margin: [50, 0, 0, 0],\r\n                alignment: 'right'\r\n              } // Top right\r\n            ]\r\n          ]\r\n        },\r\n        layout: 'noBorders'\r\n      },\r\n      { text: '', margin: 190, alignment: 'center' },\r\n      {\r\n        table: {\r\n          widths: ['*', 'auto', '*'],\r\n          body: [\r\n            [\r\n              {\r\n                image: 'logo3',\r\n                fit: [100, 65],\r\n                margin: [50, 0, 0, 0],\r\n                alignment: 'left'\r\n              }, // Top left?\r\n              { text: '' },\r\n              {\r\n                image: 'logo4',\r\n                fit: [100, 65],\r\n                margin: [50, 0, 0, 0],\r\n                alignment: 'right'\r\n              } // Top right\r\n            ]\r\n          ]\r\n        },\r\n        layout: 'noBorders'\r\n      },\r\n      { image: 'header', width: 800, height: 20, alignment: 'center' }\r\n    ];\r\n  }\r\n}\r\n","import { PdfDoc } from '../templates/PdfDoc';\r\nimport { DateTime } from '../api/DateTime';\r\nimport { TYPES } from '../api/SessionTypes';\r\n\r\nexport function MakeSessionPDF(event, type) {\r\n  let maxLocs = 0;\r\n  event.sessions\r\n    .filter(s => s.type === type)\r\n    .forEach(session => (maxLocs = Math.max(maxLocs, session.nLocs)));\r\n  let doc = new PdfDoc(event.pageFormat, event.title, maxLocs > 4);\r\n\r\n  event.sessions\r\n    .filter(s => s.type === type)\r\n    .forEach(session => {\r\n      try {\r\n        doc.addContent({\r\n          text: session.name + ' Schedule',\r\n          style: 'header2',\r\n          margin: [0, 10]\r\n        });\r\n        doc.addContent(\r\n          sessionPage(session, event.getSessionDataGrid(session.id, true))\r\n        );\r\n        doc.addPageBreak();\r\n      } catch (err) {\r\n        alert('Error: ' + err.message);\r\n      }\r\n    });\r\n  if (doc.empty()) return null;\r\n  // Delete the last page break\r\n  doc.chomp();\r\n  doc.filename = (type.name + '-schedule').replace(/ /g, '-');\r\n  return doc;\r\n}\r\n\r\nfunction sessionPage(session, data) {\r\n  // headers are automatically repeated if the table spans over multiple pages\r\n  // you can declare how many rows should be treated as headers\r\n  let t = { headerRows: 1, dontBreakRows: true };\r\n  t.widths = new Array(session.nLocs + 2);\r\n  // Pure guesswork to make these fields smaller\r\n  t.widths[0] = 20;\r\n  t.widths[1] = 40;\r\n\r\n  let w = (440 - t.widths[0] - t.widths[1]) / session.nLocs;\r\n  // NOTE for widths: I would absolutely love to set the column widths to \"automatic\" - that way, they'd be a lot neater.\r\n  //  However, for the moment PDFMake doesn't support word breaks in automatically sized columns.\r\n  for (let i = 2; i < session.nLocs + 2; i++) t.widths[i] = w; // (i < 2) ? 'auto' : '*';\r\n\r\n  // t.widths[0] = w;\r\n  t.body = [];\r\n  //Header row\r\n  let header = [];\r\n  for (let i = 0; i < data[0].length; i++)\r\n    header.push({ text: data[0][i].value, alignment: 'center' });\r\n  t.body.push(header);\r\n\r\n  // All individual rows\r\n  for (let i = 1; i < data.length; i++) {\r\n    let row = [];\r\n    row.push({ text: data[i][0].value.toString(), alignment: 'center' });\r\n    row.push({ text: data[i][1].value.toString(), alignment: 'center' });\r\n    if (data[i][2].colSpan) {\r\n      row.push({\r\n        colSpan: data[i][2].colSpan,\r\n        style: 'breakrow',\r\n        text: '' + data[i][2].value.toString()\r\n      });\r\n      t.body.push(row);\r\n      continue;\r\n    }\r\n    // let diff = session.nLocs;\r\n    for (let j = 2; j < data[i].length; j++) {\r\n      if (data[i][j] === null) row.push({});\r\n      else row.push({ text: data[i][j].value.toString(), style: 'teamEntry' });\r\n    }\r\n    t.body.push(row);\r\n  }\r\n  // if (session.usesSurrogates && session.fillerPolicy === USE_SURROGATES)\r\n  //   this.doc.content.push({text:\"\\n* Surrogate team; results not counted\",alignment:'center'});\r\n  return { table: t, layout: 'lightHorizontalLines' };\r\n}\r\n\r\nexport function MakeDaySchedulePdf(event) {\r\n  let doc = new PdfDoc(event.pageFormat, event.title, false);\r\n\r\n  let t = { headerRows: 1, dontBreakRows: true };\r\n  t.widths = new Array(3);\r\n  t.widths[0] = 100;\r\n  t.widths[1] = 100;\r\n  t.widths[2] = 300;\r\n  t.body = [];\r\n  let header = [];\r\n  header.push({ text: 'Start' });\r\n  header.push({ text: 'End' });\r\n  header.push({ text: 'Event' });\r\n  t.body.push(header);\r\n\r\n  let sorted = event.sessions.sort((a, b) => {\r\n    return a.actualStartTime.mins - b.actualStartTime.mins;\r\n  });\r\n  for (let i = 0; i < sorted.length; i++) {\r\n    let row = [];\r\n    if (sorted[i].type === TYPES.BREAK) {\r\n      row.push({ text: sorted[i].actualStartTime.time, fillColor: '#eeeeee' });\r\n      row.push({ text: sorted[i].actualEndTime.time, fillColor: '#eeeeee' });\r\n      row.push({ text: sorted[i].name + ' *', fillColor: '#eeeeee' });\r\n    } else {\r\n      row.push(sorted[i].actualStartTime.time);\r\n      row.push(sorted[i].actualEndTime.time);\r\n      row.push(sorted[i].name);\r\n    }\r\n    t.body.push(row);\r\n  }\r\n  doc.addContent({ text: 'Day Schedule', style: 'header2', margin: [0, 10] });\r\n  doc.addContent({ table: t, layout: 'lightHorizontalLines' });\r\n\r\n  doc.addContent({ text: '\\n' });\r\n  doc.addContent({\r\n    text:\r\n      '* Break: During scheduled break times matches and judging are not happening'\r\n  });\r\n\r\n  doc.filename = 'day-schedule'.replace(/ /g, '-');\r\n  return doc;\r\n}\r\n\r\nexport function MakePracticeTableSignupPdf(event) {\r\n  let doc = new PdfDoc(event.pageFormat, event.title, false);\r\n\r\n  let t = { headerRows: 1, dontBreakRows: true };\r\n  t.widths = ['auto', '*'];\r\n  t.body = [];\r\n  t.body.push(['Time', 'Team']);\r\n\r\n  let now = event.startTime.clone();\r\n  while (now.mins < event.endTime.mins - 1) {\r\n    now = new DateTime(event.timeIncPrac(now, 10));\r\n    t.body.push([now.displayTime(), '']);\r\n  }\r\n\r\n  doc.addContent({\r\n    text: 'Practice table signup sheet',\r\n    style: 'header2',\r\n    margin: [0, 10]\r\n  });\r\n  doc.addContent({ table: t, layout: 'lightHorizontalLines' });\r\n  doc.addContent({\r\n    text:\r\n      '* Do not book more than 2 times at a time, and no back-to-backs.\\n Remember Gracious Professionalism - everyone wants a chance to practice!',\r\n    style: 'footer'\r\n  });\r\n\r\n  doc.filename = 'practice-tables'.replace(/ /g, '-');\r\n  return doc;\r\n}\r\n\r\nexport function MakeCoreValuesAllocationsPDF(event) {\r\n  if (!event.pilot) return null;\r\n\r\n  let doc = new PdfDoc(event.pageFormat, event.title, false);\r\n\r\n  let data = event.getPilotDataGrid();\r\n\r\n  let t = { headerRows: 1, dontBreakRows: true };\r\n  t.widths = new Array(data[0].length);\r\n  let w = 475 / data[0].length;\r\n  for (let i = 0; i < data[0].length; i++) t.widths[i] = i < 1 ? 'auto' : '*';\r\n  t.widths[0] = w;\r\n  t.body = [];\r\n  //Header row\r\n  let header = [];\r\n  for (let i = 0; i < data[0].length; i++)\r\n    header.push({ text: 'Judge group ' + (i + 1), alignment: 'center' });\r\n  t.body.push(header);\r\n\r\n  // All individual rows\r\n  for (let i = 0; i < data.length; i++) {\r\n    let row = [];\r\n    for (let j = 0; j < data[i].length; j++) {\r\n      if (data[i][j] === null) row.push({});\r\n      else row.push({ text: data[i][j].value.toString(), style: 'teamEntry' });\r\n    }\r\n    t.body.push(row);\r\n  }\r\n\r\n  doc.addContent({\r\n    text: 'Core values judging allocations',\r\n    style: 'header2',\r\n    margin: [0, 10]\r\n  });\r\n  doc.addContent({ table: t, layout: 'lightHorizontalLines' });\r\n\r\n  doc.filename = 'core-values-allocations';\r\n  return doc;\r\n}\r\n","import { PdfDoc } from '../templates/PdfDoc';\r\nimport { TYPES } from '../api/SessionTypes';\r\n\r\nexport function MakeTeamListPDF(event) {\r\n  let doc = new PdfDoc(event.pageFormat, event.title, false);\r\n\r\n  let t = { headerRows: 1, dontBreakRows: true };\r\n  t.widths = new Array(4);\r\n  t.widths[0] = 100;\r\n  t.widths[1] = 200;\r\n  t.widths[2] = 100;\r\n  t.widths[3] = 50;\r\n  t.body = [];\r\n  let header = [];\r\n  header.push({ text: 'Number', alignment: 'center' });\r\n  header.push({ text: 'Name' });\r\n  header.push({ text: 'Affiliation' });\r\n  header.push({ text: 'Pit num' });\r\n  t.body.push(header);\r\n\r\n  event.teams.forEach(x => {\r\n    let row = [];\r\n    row.push({ text: x.number, alignment: 'center' });\r\n    row.push({ text: x.name });\r\n    row.push({ text: x.affiliation });\r\n    row.push({ text: x.pitNum });\r\n    t.body.push(row);\r\n  });\r\n\r\n  doc.addContent({ text: 'Team List', style: 'header2', margin: [0, 10] });\r\n  doc.addContent({ table: t, layout: 'lightHorizontalLines' });\r\n\r\n  doc.filename = 'team-list'.replace(/ /g, '-');\r\n  return doc;\r\n}\r\n\r\nexport function MakeAllTeamsPDF(event) {\r\n  let doc = new PdfDoc(event.pageFormat, event.title, true);\r\n\r\n  doc.addContent({\r\n    text: 'All Team Schedule',\r\n    style: 'header2',\r\n    margin: [0, 10]\r\n  });\r\n\r\n  let data = event.getIndivDataGrid(true);\r\n  let N = data[3].length;\r\n  let t = { headerRows: 2, dontBreakRows: true, keepWithHeaderRows: 1 };\r\n  t.widths = [];\r\n  let w = 525 / N;\r\n  for (let i = 0; i < N; i++) {\r\n    t.widths[i] = w - 2;\r\n  }\r\n  t.widths[1] = w + (N - 1) * 2;\r\n\r\n  // t.widths[1] = w;//'*';\r\n  t.body = [];\r\n  for (let k = 0; k < data.length; k++) {\r\n    t.body[k] = [];\r\n    let curStyle = k < 2 ? 'tablehead' : 'tablebody';\r\n    let col = 'blue';\r\n    for (let i = 0; i < data[k].length; i++) {\r\n      // Hack way to calculate alternating colours.  TODO: Fix\r\n      col = i % 4 > 1 ? 'blue' : 'black';\r\n      if (k === 0) col = i % 2 === 1 ? 'blue' : 'black';\r\n      if (data[k][i].colSpan) {\r\n        t.body[k].push({\r\n          colSpan: data[k][i].colSpan,\r\n          text: data[k][i].value.toString(),\r\n          color: col,\r\n          style: curStyle\r\n        });\r\n        for (let dummy = 1; dummy < data[k][i].colSpan; dummy++)\r\n          t.body[k].push({});\r\n      } else\r\n        t.body[k].push({\r\n          text: data[k][i].value.toString() + '',\r\n          color: col,\r\n          style: curStyle\r\n        });\r\n    }\r\n  }\r\n  doc.addContent({\r\n    table: t,\r\n    layout: 'lightHorizontalLines',\r\n    alignment: 'center'\r\n  });\r\n\r\n  doc.filename = 'individual-schedule'.replace(/ /g, '-');\r\n  return doc;\r\n}\r\n\r\nexport function MakeIndivTeamsPDF(event) {\r\n  let doc = new PdfDoc(event.pageFormat, event.title, false);\r\n\r\n  event.teams.forEach(t => {\r\n    doc.addContent({\r\n      text: t.number + ': ' + t.name,\r\n      style: 'header2',\r\n      margin: [0, 10]\r\n    });\r\n    doc.addContent(teamPage(event, t));\r\n    doc.addContent({ text: ' ', pageBreak: 'after' });\r\n  });\r\n  // Delete the last page break\r\n  doc.chomp();\r\n  doc.filename = 'team-schedule'.replace(/ /g, '-');\r\n  return doc;\r\n}\r\n\r\nfunction teamPage(event, team) {\r\n  let schedule = [];\r\n  for (let i = 0; i < team.schedule.length; i++)\r\n    if (team.schedule[i].teams) schedule.push(team.schedule[i]);\r\n  schedule.sort(function(a, b) {\r\n    return a.time.mins - b.time.mins;\r\n  });\r\n\r\n  let t = { headerRows: 1, dontBreakRows: true };\r\n  t.widths = new Array(3);\r\n  for (let i = 0; i < 3; i++) {\r\n    t.widths[i] = i < -1 ? 'auto' : '*';\r\n  }\r\n  t.body = [];\r\n  t.body[0] = [];\r\n  t.body[0][0] = { text: 'Time (#)' };\r\n  t.body[0][1] = { text: 'Event' };\r\n  t.body[0][2] = { text: 'Location' };\r\n  for (let i = 0; i < schedule.length; i++) {\r\n    // If it's a break that applies to specific sessions, don't put it in.\r\n    if (\r\n      event.getSession(schedule[i].session_id).type === TYPES.BREAK &&\r\n      event.getSession(schedule[i].session_id).appliesTo.length > 0\r\n    )\r\n      continue;\r\n    let row = [];\r\n    let spot = schedule[i].teams.indexOf(team.id);\r\n    let num = ' (' + schedule[i].num + ')';\r\n    if (\r\n      schedule[i].teams.length - schedule[i].teams.indexOf(team.id) <=\r\n      schedule[i].surrogates\r\n    )\r\n      num = ' (' + schedule[i].num + ', surrogate)';\r\n    if (event.getSession(schedule[i].session_id).type === TYPES.BREAK) num = '';\r\n\r\n    let loc = event.getSession(schedule[i].session_id).locations[\r\n      spot + schedule[i].loc\r\n    ];\r\n    // if (event.getSession(schedule[i].session_id).type === TYPES.BREAK) loc = event.getSession(schedule[i].session_id).locations[0];\r\n    if (event.getSession(schedule[i].session_id).type === TYPES.BREAK) loc = '';\r\n    if (!loc) loc = '';\r\n    row.push({ text: schedule[i].time.time + num });\r\n    row.push({ text: event.getSession(schedule[i].session_id).name });\r\n    row.push({ text: '' + loc });\r\n    t.body.push(row);\r\n  }\r\n  return { table: t, layout: 'lightHorizontalLines' };\r\n}\r\n","import { PdfDoc } from \"../templates/PdfDoc\";\r\nimport { TYPES } from \"../api/SessionTypes\";\r\nimport { EventParams } from \"../api/EventParams\";\r\n\r\nexport function MakePitSignsPdf(event) {\r\n  let doc = new PdfDoc(event.pageFormat, event.title, true);\r\n  event.teams.forEach((t) => {\r\n    // margin: [left, top, right, bottom]\r\n    doc.addContent({\r\n      text: t.name,\r\n      style: \"signTitle\",\r\n      margin: [0, 40, 0, 10],\r\n    });\r\n    doc.addContent({\r\n      text: \"Team \" + t.number,\r\n      style: \"signSubtitle\",\r\n      margin: [0, 10],\r\n    });\r\n    doc.addPageBreak();\r\n  });\r\n  doc.chomp();\r\n  doc.filename = \"pit-signs\".replace(/ /g, \"-\");\r\n  return doc;\r\n}\r\n\r\nexport function MakeLocationSignsPdf(event) {\r\n  let baseLocations = [\r\n    \"Pit admin\",\r\n    \"Queueing\",\r\n    \"Judge check-in\",\r\n    \"Robot game\",\r\n    \"Coaches meeting\",\r\n    \"Volunteer Room\",\r\n    \"Practice table\",\r\n  ];\r\n  let doc = new PdfDoc(event.pageFormat, event.title, true);\r\n  event.sessions\r\n    .filter((x) => x.type === TYPES.JUDGING)\r\n    .forEach((s) => {\r\n      s.locations.forEach((loc, i) => {\r\n        // margin: [left, top, right, bottom]\r\n        doc.addContent({\r\n          text: s.name + \" Room \" + (i + 1),\r\n          style: \"signTitle\",\r\n          margin: [0, 40, 0, 10],\r\n        });\r\n        doc.addContent({ text: loc, style: \"signSubtitle\", margin: [0, 10] });\r\n        doc.addPageBreak();\r\n      });\r\n    });\r\n  let s = event.sessions.find((x) => x.type === TYPES.MATCH_ROUND);\r\n  s.locations.forEach((loc) => {\r\n    // margin: [left, top, right, bottom]\r\n    doc.addContent({ text: loc, style: \"signTitle\", margin: [0, 40, 0, 10] });\r\n    doc.addPageBreak();\r\n  });\r\n  baseLocations.forEach((loc) => {\r\n    // margin: [left, top, right, bottom]\r\n    doc.addContent({ text: loc, style: \"signTitle\", margin: [0, 40, 0, 10] });\r\n    doc.addPageBreak();\r\n  });\r\n  doc.chomp();\r\n  doc.filename = \"location-signs\".replace(/ /g, \"-\");\r\n  return doc;\r\n}\r\n\r\nexport function MakeAwardCertPdf(event) {\r\n  let F = event.pageFormat.footerText;\r\n  event.pageFormat.footerText = \"\";\r\n  let doc = new PdfDoc(event.pageFormat, \"\", true);\r\n  event.pageFormat.footerText = F;\r\n  // for (let i = 0; i < event.judgesAwards; i++) {\r\n  //   doc.addContent({\r\n  //     text: 'Judges Award',\r\n  //     style: 'signTitle',\r\n  //     margin: [0, 40, 0, 10]\r\n  //   });\r\n  //   doc.addContent({\r\n  //     text: '____________________',\r\n  //     style: 'signTitle',\r\n  //     margin: [0, 40, 0, 10]\r\n  //   });\r\n  //   doc.addContent({\r\n  //     text: event.title,\r\n  //     style: 'signSubtitle',\r\n  //     margin: [0, 10]\r\n  //   });\r\n  //   doc.addPageBreak();\r\n  // }\r\n  console.log(event.awards);\r\n  // console.log(EventParams.AWARD_NAMES[event.awardStyleIdx]);\r\n  event.awards.forEach((a) => {\r\n    // margin: [left, top, right, bottom]\r\n    doc.addContent({ text: a, style: \"certTitle\", margin: [0, 60, 0, 10] });\r\n    doc.DrawLine();\r\n    doc.addContent({\r\n      text: event.title,\r\n      style: \"certSubtitle\",\r\n      margin: [0, 10],\r\n    });\r\n    doc.addPageBreak();\r\n  });\r\n  doc.chomp();\r\n  doc.filename = \"award-certificates\".replace(/ /g, \"-\");\r\n  return doc;\r\n}\r\n\r\nexport function MakeParticipationCertPdf(event) {\r\n  let F = event.pageFormat.footerText;\r\n  event.pageFormat.footerText = \"\";\r\n  let doc = new PdfDoc(event.pageFormat, \"\", true);\r\n  event.pageFormat.footerText = F;\r\n  event.teams.forEach((t) => {\r\n    // margin: [left, top, right, bottom]\r\n    doc.addContent({\r\n      text: \"Certificate of Participation\",\r\n      style: \"certTitle\",\r\n      margin: [0, 60, 0, 10],\r\n    });\r\n    doc.DrawLine();\r\n    doc.addContent({\r\n      text: event.title,\r\n      style: \"certSubtitle\",\r\n      margin: [0, 10],\r\n    });\r\n    doc.addContent({ text: t.name, style: \"certSubtitle\", margin: [0, 10] });\r\n    doc.addPageBreak();\r\n  });\r\n  doc.chomp();\r\n  doc.filename = \"participation-certificates\".replace(/ /g, \"-\");\r\n  return doc;\r\n}\r\n","import { TYPES } from '../api/SessionTypes';\r\n\r\nexport function MakeScoringSystemCSV(event) {\r\n  let csv = 'Version Number,1\\n';\r\n  csv += 'Block Format,1\\n';\r\n  csv += 'Number of Teams,' + event.nTeams + '\\n';\r\n\r\n  event.teams.forEach(t => {\r\n    csv += t.number + ',' + t.name + ',' + t.affiliation + ',\\n';\r\n  });\r\n\r\n  csv += 'Block Format,2\\n';\r\n  let rankingMatches = 0;\r\n  let allRounds = event.getSessions(TYPES.MATCH_ROUND);\r\n  allRounds.forEach(S => {\r\n    rankingMatches += S.schedule.length;\r\n  });\r\n  csv += 'Number of Ranking Matches,' + rankingMatches + '\\n';\r\n  csv += 'Number of Tables,' + allRounds[0].nLocs + '\\n';\r\n  csv += 'Number of Teams per Table,2\\n';\r\n  csv +=\r\n    'Number of Simultaneous Tables,' +\r\n    Math.floor(allRounds[0].nLocs / 2 / allRounds[0].nSims) +\r\n    '\\n';\r\n  csv += 'Table Names,';\r\n  allRounds[0].locations.forEach(l => {\r\n    csv += l.replace(' ', '-') + ',';\r\n  });\r\n  csv += '\\n';\r\n  allRounds.forEach(round => {\r\n    round.schedule.forEach(instance => {\r\n      csv += instance.num + ',';\r\n      csv += TimeToExcel(instance.time) + ',';\r\n      let extra = 0;\r\n      if (instance.extra) extra = event.extraTime;\r\n      let tmp = instance.time.clone();\r\n      tmp.mins = tmp.mins + round.len + extra;\r\n      csv += TimeToExcel(tmp) + ',';\r\n      for (let dummy = 0; dummy < instance.loc; dummy++) csv += ',';\r\n      instance.teams.forEach(t => {\r\n        csv += event.getTeam(t).number + ',';\r\n      });\r\n      for (\r\n        let dummy = instance.loc + instance.teams.length;\r\n        dummy < allRounds[0].nLocs;\r\n        dummy++\r\n      )\r\n        csv += ',';\r\n      csv += '\\n';\r\n    });\r\n  });\r\n\r\n  let allJudging = event.getSessions(TYPES.JUDGING);\r\n  csv += 'Block Format,3\\n';\r\n  csv += 'Number of Judged Events,' + allJudging.length + '\\n';\r\n  csv += 'Number of Event Time Slots,' + allJudging[0].schedule.length + '\\n';\r\n  csv += 'Number of Judging Teams,' + allJudging[0].nLocs + '\\n';\r\n\r\n  allJudging.forEach(session => {\r\n    csv += 'Event Name,' + session.name + '\\n';\r\n    csv += 'Room Names,';\r\n    session.locations.forEach(loc => {\r\n      csv += loc + ',';\r\n    });\r\n    csv += '\\n';\r\n    session.schedule.forEach(instance => {\r\n      csv += instance.num + ',';\r\n      csv += TimeToExcel(instance.time) + ',';\r\n      let extra = 0;\r\n      if (instance.extra) extra = event.extraTime;\r\n      let tmp = instance.time.clone();\r\n      tmp.mins = tmp.mins + session.len + extra;\r\n      csv += TimeToExcel(tmp) + ',';\r\n      for (let dummy = 0; dummy < instance.loc; dummy++) csv += ',';\r\n      instance.teams.forEach(t => {\r\n        csv += event.getTeam(t).number + ',';\r\n      });\r\n      csv += '\\n';\r\n    });\r\n  });\r\n\r\n  let practiceMatches = 0;\r\n  let allPRounds = event.getSessions(TYPES.MATCH_ROUND_PRACTICE);\r\n  if (allPRounds.length === 0) return { data: csv, filename: 'scoring_import' };\r\n  allPRounds.forEach(S => {\r\n    practiceMatches += S.schedule.length;\r\n  });\r\n  csv += 'Block Format,4\\n';\r\n  csv += 'Number of Practice Matches,' + practiceMatches + '\\n';\r\n  csv += 'Number of Tables,' + allRounds[0].nLocs / 2 + '\\n';\r\n  csv += 'Number of Teams per Table,2\\n';\r\n  csv +=\r\n    'Number of Simultaneous Tables,' +\r\n    Math.floor(allRounds[0].nLocs / 2 / allRounds[0].nSims) +\r\n    '\\n';\r\n  csv += 'Table Names,';\r\n  allRounds[0].locations.forEach(l => {\r\n    csv += l.replace(' ', '-') + ',';\r\n  });\r\n  csv += '\\n';\r\n  allPRounds.forEach(round => {\r\n    round.schedule.forEach(instance => {\r\n      csv += instance.num + ',';\r\n      csv += TimeToExcel(instance.time) + ',';\r\n      let extra = 0;\r\n      if (instance.extra) extra = event.extraTime;\r\n      let tmp = instance.time.clone();\r\n      tmp.mins = tmp.mins + round.len + extra;\r\n      csv += TimeToExcel(tmp) + ',';\r\n      for (let dummy = 0; dummy < instance.loc; dummy++) csv += ',';\r\n      instance.teams.forEach(t => {\r\n        csv += event.getTeam(t).number + ',';\r\n      });\r\n      for (\r\n        let dummy = instance.loc + instance.teams.length;\r\n        dummy < allRounds[0].nLocs;\r\n        dummy++\r\n      )\r\n        csv += ',';\r\n      csv += '\\n';\r\n    });\r\n  });\r\n  return { data: csv, filename: 'scoring_import' };\r\n}\r\n\r\n// Excel represents time decimally as follows:\r\n// Time = x.yyyyyyyy\r\n// Where x = Number of days since 1/1/1900\r\n// and\t y = Proportion of day (mins/(24*60))\r\nexport function TimeToExcel(x) {\r\n  let t = x.time.replace(/$/, ':00');\r\n  if (x.mins % (24 * 60) < 12 * 60) t = t + ' AM';\r\n  else t = t + ' PM';\r\n  return t;\r\n  // var millenium = new Date();\r\n  // sd = new String(sd);\r\n  // millenium.setFullYear(1900,0,1);\r\n  // var tourn = new Date();\r\n  // tourn.setFullYear(sd.split(\"-\")[0],sd.split(\"-\")[1]-1,sd.split(\"-\")[2]);\r\n  // if (tournament.days.length > 1) {\r\n  // \tconsole.log(Date.daysBetween(millenium,tourn)+(m/(24*60)));\r\n  // \treturn Date.daysBetween(millenium,tourn)+(m/(24*60));\r\n  // } else return m/(24*60);\r\n}\r\n","import { PdfDoc } from '../templates/PdfDoc';\r\n\r\nexport function MakeVolunteerListPdf(event) {\r\n  let doc = new PdfDoc(event.pageFormat, event.title, false);\r\n\r\n  let t = { headerRows: 1, dontBreakRows: true };\r\n  t.widths = new Array(2);\r\n  t.widths[0] = 200;\r\n  t.widths[1] = 300;\r\n  t.body = [];\r\n  t.body.push(['Role', 'Name']);\r\n\r\n  let colorDark = false;\r\n  event.volunteers.forEach(v => {\r\n    colorDark = !colorDark;\r\n    v.staff.forEach((s, i) => {\r\n      if (s === '') return;\r\n      t.body.push([\r\n        { text: i === 0 ? v.name : '', fillColor: colorDark ? '#eee' : '#fff' },\r\n        { text: s, fillColor: colorDark ? '#eee' : '#fff' }\r\n      ]);\r\n    });\r\n  });\r\n\r\n  doc.addContent({ text: 'Volunteer List', style: 'header2', margin: [0, 10] });\r\n  doc.addContent({ table: t, layout: 'lightHorizontalLines' });\r\n\r\n  doc.filename = 'vol-list'.replace(/ /g, '-');\r\n  return doc;\r\n}\r\n\r\nexport function MakeSigninPdf(event) {\r\n  let doc = new PdfDoc(event.pageFormat, event.title, false);\r\n\r\n  let t = { headerRows: 1, dontBreakRows: true };\r\n  t.widths = new Array(3);\r\n  t.widths[0] = 100;\r\n  t.widths[1] = 200;\r\n  t.widths[2] = 200;\r\n  t.body = [];\r\n  let header = [];\r\n  header.push({ text: 'Name' });\r\n  header.push({ text: 'Role/s' });\r\n  header.push({ text: 'Signed in?' });\r\n  t.body.push(header);\r\n\r\n  // Reorganise volunteers into a dict.\r\n  let data = {};\r\n  event.volunteers.forEach(v => {\r\n    v.staff.forEach(s => {\r\n      let name = s;\r\n      if (name === '') name = '[UNDEFINED]';\r\n      if (data[name]) data[name] = data[name] + ', ' + v.name;\r\n      else data[name] = v.name;\r\n    });\r\n  });\r\n\r\n  Object.keys(data)\r\n    .sort()\r\n    .forEach(k => {\r\n      let row = [];\r\n      if (k === '[UNDEFINED]') {\r\n        return;\r\n      } else {\r\n        row.push({ text: k });\r\n        row.push({ text: data[k] });\r\n        row.push({ text: '' });\r\n      }\r\n      t.body.push(row);\r\n    });\r\n\r\n  doc.addContent({\r\n    text: 'Volunteer Sign-on sheet',\r\n    style: 'header2',\r\n    margin: [0, 10]\r\n  });\r\n  doc.addContent({ table: t, layout: 'lightHorizontalLines' });\r\n  // === UNASSIGNED === //\r\n  /*\r\n    doc.addPageBreak();\r\n    doc.addContent({text: \"Unassigned volunteers\", style:'header2',margin:[0,10]});\r\n\r\n    if (data[\"[UNDEFINED]\"]) {\r\n\r\n      t = {headerRows: 1, dontBreakRows: true};\r\n      t.widths = new Array(3);\r\n      t.widths[0] = 100;\r\n      t.widths[1] = 200;\r\n      t.widths[2] = 200;\r\n      t.body = [];\r\n      let header = [];\r\n      header.push({text:\"Role\"});\r\n      header.push({text:\"Signed in?\"});\r\n      t.body.push(header);\r\n\r\n\r\n      // t.body.push({text: \"Unassigned roles\", colSpan: 3, color: \"grey\"})\r\n      t.body.push([{text: \"Unassigned roles\"}, {text: \"\"}, {text: \"\"}]);\r\n      let undef = data[\"[UNDEFINED]\"].split(\", \").sort();\r\n      undef.forEach(r => {\r\n        t.body.push([{text: r}, {text: \"\"}, {text: \"\"}]);\r\n      });\r\n    }\r\n    doc.addContent({table: t, layout: 'lightHorizontalLines'});\r\n    */\r\n  doc.filename = 'vol-sign-in'.replace(/ /g, '-');\r\n  return doc;\r\n}\r\n","import PptxGenJS from 'pptxgenjs';\r\nimport PreComputedImages from '../resources/images.json';\r\n\r\nexport class PptPres {\r\n  constructor(title, pageFormat, logos) {\r\n    this.pptx = new PptxGenJS();\r\n    this.pptx.setLayout('LAYOUT_WIDE');\r\n\r\n    this.pptx.defineSlideMaster({\r\n      title: 'PRESENTATION_BASIC',\r\n      bkgd: 'FFFFFF',\r\n      objects: [\r\n        {\r\n          image: {\r\n            data: PreComputedImages.gamelogo,\r\n            // path: '../resources/gamelogo.jpg', //Doesn't work\r\n            x: 13.3 * 0.4,\r\n            y: 0,\r\n            w: 13.3 * 0.2,\r\n            h: 13.3 * 0.2,\r\n            sizing: 'contain'\r\n          }\r\n        },\r\n        {\r\n          placeholder: {\r\n            options: {\r\n              name: 'heading',\r\n              type: 'body',\r\n              x: '10%',\r\n              y: '40%',\r\n              w: '80%',\r\n              h: '20%',\r\n              fontSize: 66,\r\n              align: 'center',\r\n              fontFace: 'Palatino',\r\n              autoFit: 'true'\r\n            },\r\n            text: '___ Award'\r\n          }\r\n        },\r\n        {\r\n          text: {\r\n            text: title,\r\n            options: {\r\n              x: '20%',\r\n              y: '80%',\r\n              h: '10%',\r\n              w: '60%',\r\n              fontSize: 36,\r\n              align: 'center',\r\n              fontFace: 'Palatino',\r\n              autoFit: 'true'\r\n            }\r\n          }\r\n        },\r\n        // { 'image': {\r\n        //         data: pageFormat.header, // Doesn't work\r\n        //         // path: '../resources/FIRST_header.png',\r\n        //         x: 0, y: '90%', h: '10%', w: '100%'\r\n        //     } }\r\n        { rect: { x: 0.1, y: 7, w: 3, h: 0.5, fill: '00a651' } },\r\n        { rect: { x: 3.5, y: 7, w: 3, h: 0.5, fill: 'ed1c24' } },\r\n        { rect: { x: 6.9, y: 7, w: 3, h: 0.5, fill: 'f57e25' } },\r\n        { rect: { x: 10.3, y: 7, w: 3, h: 0.5, fill: '009cd7' } }\r\n      ]\r\n    });\r\n    this.pptx.defineSlideMaster({\r\n      title: 'PRESENTATION_WINNER',\r\n      bkgd: 'FFFFFF',\r\n      objects: [\r\n        {\r\n          image: {\r\n            data: PreComputedImages.gamelogo,\r\n            // path: '../resources/gamelogo.jpg', //Doesn't work\r\n            x: 13.3 * 0.4,\r\n            y: 0,\r\n            w: 13.3 * 0.2,\r\n            h: 13.3 * 0.2,\r\n            sizing: 'contain'\r\n          }\r\n        },\r\n        {\r\n          placeholder: {\r\n            options: {\r\n              name: 'winner',\r\n              type: 'body',\r\n              x: '10%',\r\n              y: '40%',\r\n              w: '80%',\r\n              h: '20%',\r\n              fontSize: 66,\r\n              align: 'center',\r\n              fontFace: 'Palatino',\r\n              autoFit: 'true'\r\n            },\r\n            text: '_________'\r\n          }\r\n        },\r\n        {\r\n          placeholder: {\r\n            options: {\r\n              name: 'award',\r\n              type: 'body',\r\n              x: '10%',\r\n              y: '60%',\r\n              w: '80%',\r\n              h: '10%',\r\n              fontSize: 36,\r\n              color: 'bbbbbb',\r\n              align: 'center',\r\n              fontFace: 'Palatino',\r\n              autoFit: 'true'\r\n            },\r\n            text: '___ Award'\r\n          }\r\n        },\r\n        {\r\n          text: {\r\n            text: title,\r\n            options: {\r\n              x: '20%',\r\n              y: '80%',\r\n              h: '10%',\r\n              w: '60%',\r\n              fontSize: 36,\r\n              align: 'center',\r\n              fontFace: 'Palatino',\r\n              autoFit: 'true'\r\n            }\r\n          }\r\n        },\r\n        // { 'image': {\r\n        //         data: pageFormat.header, // Doesn't work\r\n        //         // path: '../resources/FIRST_header.png',\r\n        //         x: 0, y: '90%', h: '10%', w: '100%'\r\n        //     } }\r\n        { rect: { x: 0.1, y: 7, w: 3, h: 0.5, fill: '00a651' } },\r\n        { rect: { x: 3.5, y: 7, w: 3, h: 0.5, fill: 'ed1c24' } },\r\n        { rect: { x: 6.9, y: 7, w: 3, h: 0.5, fill: 'f57e25' } },\r\n        { rect: { x: 10.3, y: 7, w: 3, h: 0.5, fill: '009cd7' } }\r\n      ]\r\n    });\r\n  }\r\n\r\n  addTitle(title) {\r\n    let slide = this.pptx.addNewSlide('PRESENTATION_BASIC');\r\n    slide.addText(title, { placeholder: 'heading' });\r\n  }\r\n\r\n  addWinner(title, winner) {\r\n    let slide = this.pptx.addNewSlide('PRESENTATION_WINNER');\r\n    slide.addText(title, { placeholder: 'award' });\r\n    if (winner) slide.addText(winner, { placeholder: 'winner' });\r\n  }\r\n\r\n  download() {\r\n    this.pptx.save();\r\n  }\r\n\r\n  getBlobPromise() {\r\n    return new Promise((resolve, reject) => {\r\n      this.pptx.save('jszip', blob => resolve(blob), 'blob');\r\n    });\r\n  }\r\n}\r\n","import { PptPres } from \"../templates/PptPres\";\r\nimport { EventParams } from \"../api/EventParams\";\r\nexport function MakeClosingPresentation(event) {\r\n  let doc = new PptPres(\r\n    event.title,\r\n    event.pageFormat,\r\n    event.sponsors.nationals\r\n  );\r\n\r\n  doc.addTitle(\"Closing & Awards Ceremony\");\r\n\r\n  // for (let i = 0; i < event.judgesAwards; i++) {\r\n  //   doc.addTitle('_______ Judges Award');\r\n  //   doc.addWinner('_______ Judges Award');\r\n  // }\r\n\r\n  event.awards.forEach((a) => {\r\n    // margin: [left, top, right, bottom]\r\n    doc.addTitle(a);\r\n    doc.addWinner(a);\r\n  });\r\n\r\n  doc.addTitle(\"Closing & Awards Ceremony\");\r\n\r\n  doc.filename = \"closing-slides\";\r\n\r\n  return doc;\r\n}\r\n","import { TYPES } from '../api/SessionTypes';\r\nimport {\r\n  MakeSessionPDF,\r\n  MakeDaySchedulePdf,\r\n  MakePracticeTableSignupPdf\r\n  // MakeCoreValuesAllocationsPDF\r\n} from './SessionOutputs';\r\nimport {\r\n  MakeTeamListPDF,\r\n  MakeAllTeamsPDF,\r\n  MakeIndivTeamsPDF\r\n} from './TeamOutputs';\r\nimport {\r\n  MakePitSignsPdf,\r\n  MakeLocationSignsPdf,\r\n  MakeAwardCertPdf,\r\n  MakeParticipationCertPdf\r\n} from './SignOutputs';\r\nimport { MakeScoringSystemCSV } from './DataOutputs';\r\nimport { MakeVolunteerListPdf, MakeSigninPdf } from './VolunteerOutputs';\r\nimport { MakeClosingPresentation } from '../outputs/PresentationOutput';\r\n\r\nimport JSZip from 'jszip';\r\nimport { saveAs } from 'file-saver';\r\n\r\nexport class Zipper {\r\n  constructor(event, saveFunc) {\r\n    this._event = event;\r\n    this.save = saveFunc;\r\n    this._idx = 0;\r\n    this.zipname = this.event.title.replace(' ', '_');\r\n    this.funcs = [\r\n      () =>\r\n        this.zipPDF(\r\n          MakeSessionPDF(event, TYPES.JUDGING),\r\n          '',\r\n          2 * this.event.nJudges + 5\r\n        ),\r\n      // () => this.zipPDF(MakeCoreValuesAllocationsPDF(event), \"\", this.event.nJudges + 2),\r\n      () => this.zipPDF(MakeSessionPDF(event, TYPES.MATCH_ROUND), '', 20),\r\n      () =>\r\n        this.zipPDF(MakeSessionPDF(event, TYPES.MATCH_ROUND_PRACTICE), '', 20),\r\n      // () => this.zipPDF(MakeSessionPDF(event, TYPES.MATCH_FILLER), \"\", 20),\r\n      // () => this.zipPDF(MakeSessionPDF(event, TYPES.MATCH_FILLER_PRACTICE), \"\", 20),\r\n      () => this.zipPDF(MakeTeamListPDF(event), '', 20),\r\n      () =>\r\n        this.zipPDF(\r\n          MakeDaySchedulePdf(event),\r\n          '',\r\n          this.event.nTeams + 20 + 2 * this.event.nJudges\r\n        ),\r\n      () => this.zipPDF(MakeAllTeamsPDF(event), '', 4),\r\n      () => this.zipPDF(MakeIndivTeamsPDF(event), '', 2),\r\n      () => this.zipPDF(MakePitSignsPdf(event), 'signage', 2),\r\n      () => this.zipPDF(MakeVolunteerListPdf(event), 'volunteers', 2),\r\n      () => this.zipPDF(MakeLocationSignsPdf(event), 'signage', 2),\r\n      () => this.zipPDF(MakeSigninPdf(event), 'volunteers', 2),\r\n      () => this.zipPDF(MakePracticeTableSignupPdf(event), 'signage', 4),\r\n      () => this.zipPDF(MakeAwardCertPdf(event), 'certificates', 2),\r\n      () => this.zipPDF(MakeParticipationCertPdf(event), 'certificates', 10),\r\n      () => this.zipCSV(MakeScoringSystemCSV(event), 'scoring-system'),\r\n      () => this.zipSponsors(this.event.sponsors.national, 'scoring-system'),\r\n      () => this.zipSponsors(this.event.sponsors.local, 'scoring-system'),\r\n      () => this.zipPPT(MakeClosingPresentation(event))\r\n    ];\r\n    this.zip = new JSZip();\r\n  }\r\n\r\n  ProcessNext() {\r\n    this.funcs[this._idx++]();\r\n  }\r\n\r\n  ProcessGiven(idx) {\r\n    console.log('Processing ' + idx);\r\n    this.funcs[idx]();\r\n    this._idx = idx;\r\n  }\r\n\r\n  DownloadZip() {\r\n    this.zip.generateAsync({ type: 'blob' }).then(content => {\r\n      saveAs(content, this.zipname + '.zip');\r\n    });\r\n  }\r\n\r\n  zipPDF(pdf, folder, count) {\r\n    if (!pdf) return;\r\n    let loc = folder ? this.zip.folder(folder) : this.zip;\r\n    try {\r\n      loc.file(pdf.filename + '_' + count + '.pdf', pdf.getBlobPromise());\r\n    } catch (err) {\r\n      alert('Error saving: ' + pdf.filename + '; ' + err.message);\r\n    }\r\n  }\r\n\r\n  zipCSV(csv, folder) {\r\n    if (!csv) return;\r\n    console.log(csv);\r\n    let loc = folder ? this.zip.folder(folder) : this.zip;\r\n    try {\r\n      loc.file(\r\n        csv.filename + '.csv',\r\n        new Blob([csv.data], { type: 'application/csv' })\r\n      );\r\n    } catch (err) {\r\n      alert('Error saving: ' + csv.filename + '.csv ; ' + err.message);\r\n    }\r\n  }\r\n\r\n  zipSponsors(sponsors, folder) {\r\n    if (sponsors.length === 0) return false;\r\n    let loc = folder ? this.zip.folder(folder) : this.zip;\r\n    this.zipAllLogos(sponsors, loc);\r\n    return true;\r\n  }\r\n\r\n  zipPPT(ppt, folder) {\r\n    if (!ppt) return;\r\n    let loc = folder ? this.zip.folder(folder) : this.zip;\r\n    try {\r\n      loc.file(ppt.filename + '.pptx', ppt.getBlobPromise());\r\n    } catch (err) {\r\n      alert('Error saving: ' + ppt.filename + '; ' + err.message);\r\n    }\r\n  }\r\n\r\n  zipAllLogos(logos, zip) {\r\n    logos.forEach(im => {\r\n      var uri = im.data;\r\n      var idx = uri.indexOf('base64,') + 'base64,'.length; // or = 28 if you're sure about the prefix\r\n      var content = uri.substring(idx);\r\n      zip.file(im.name + '.' + im.extension, content, { base64: true });\r\n    });\r\n  }\r\n\r\n  get event() {\r\n    return this._event;\r\n  }\r\n\r\n  get length() {\r\n    return this.funcs.length;\r\n  }\r\n\r\n  get FilesLeft() {\r\n    return this.funcs.length - this._idx;\r\n  }\r\n\r\n  get idx() {\r\n    return this._idx;\r\n  }\r\n}\r\n","import { TYPES } from '../api/SessionTypes';\r\nimport {\r\n  MakeSessionPDF,\r\n  MakeDaySchedulePdf,\r\n  MakePracticeTableSignupPdf\r\n  // MakeCoreValuesAllocationsPDF\r\n} from './SessionOutputs';\r\nimport {\r\n  MakeTeamListPDF,\r\n  MakeAllTeamsPDF,\r\n  MakeIndivTeamsPDF\r\n} from './TeamOutputs';\r\nimport {\r\n  MakePitSignsPdf,\r\n  MakeLocationSignsPdf,\r\n  MakeAwardCertPdf,\r\n  MakeParticipationCertPdf\r\n} from './SignOutputs';\r\nimport { MakeScoringSystemCSV } from './DataOutputs';\r\nimport { MakeVolunteerListPdf, MakeSigninPdf } from './VolunteerOutputs';\r\nimport { MakeClosingPresentation } from '../outputs/PresentationOutput';\r\n\r\nimport { Zipper } from './Zipper';\r\nimport { saveToFile_csv } from '../scheduling/utilities';\r\n\r\nexport class SingleOutput {\r\n  constructor(event, saveFunc) {\r\n    this._event = event;\r\n    this.save = saveFunc;\r\n    this.funcs = [\r\n      () =>\r\n        this.getPDF(\r\n          MakeSessionPDF(event, TYPES.JUDGING),\r\n          2 * this.event.nJudges + 5\r\n        ),\r\n      // () => this.getPDF(MakeCoreValuesAllocationsPDF(event), \"\", this.event.nJudges + 2),\r\n      () => this.getPDF(MakeSessionPDF(event, TYPES.MATCH_ROUND), 20),\r\n      () => this.getPDF(MakeSessionPDF(event, TYPES.MATCH_ROUND_PRACTICE), 20),\r\n      // () => this.getPDF(MakeSessionPDF(event, TYPES.MATCH_FILLER), 20),\r\n      // () => this.getPDF(MakeSessionPDF(event, TYPES.MATCH_FILLER_PRACTICE), 20),\r\n      () => this.getPDF(MakeTeamListPDF(event), 20),\r\n      () =>\r\n        this.getPDF(\r\n          MakeDaySchedulePdf(event),\r\n          this.event.nTeams + 20 + 2 * this.event.nJudges\r\n        ),\r\n      () => this.getPDF(MakeAllTeamsPDF(event), 4),\r\n      () => this.getPDF(MakeIndivTeamsPDF(event), 2),\r\n      () => this.getPDF(MakePitSignsPdf(event), 2),\r\n      () => this.getPDF(MakeVolunteerListPdf(event), 2),\r\n      () => this.getPDF(MakeLocationSignsPdf(event), 2),\r\n      () => this.getPDF(MakeSigninPdf(event), 2),\r\n      () => this.getPDF(MakePracticeTableSignupPdf(event), 4),\r\n      () => this.getPDF(MakeAwardCertPdf(event), 2),\r\n      () => this.getPDF(MakeParticipationCertPdf(event), 10),\r\n      () => this.getCSV(MakeScoringSystemCSV(event)),\r\n      () => this.getSponsors(this.event.sponsors.national, 'scoring-system'),\r\n      () => this.getSponsors(this.event.sponsors.local, 'scoring-system'),\r\n      () => this.getPPT(MakeClosingPresentation(event))\r\n    ];\r\n  }\r\n\r\n  static funcNames = [\r\n    // Must be the same order as \"func\" above\r\n    'Judging schedule',\r\n    // () => this.getPDF(MakeCoreValuesAllocationsPDF(event), \"\", this.event.nJudges + 2),\r\n    'Match schedule',\r\n    'Practice match schedule',\r\n    // \"Filler match schedule\",\r\n    // \"Filler practice match schedule\",\r\n    'Team list',\r\n    'Day schedule',\r\n    'All-team schedule',\r\n    'Individual team schedule',\r\n    'Pit signs',\r\n    'Volunteer list',\r\n    'Location signs',\r\n    'Volunteer sign in sheet',\r\n    'Practice table sign up sheet',\r\n    'Award certificates',\r\n    'Participation certificates',\r\n    'Scoring system import file',\r\n    'National sponsors',\r\n    'Local sponsors',\r\n    'Closing ceremony powerpoint'\r\n  ];\r\n\r\n  get(idx) {\r\n    this.funcs[idx]();\r\n  }\r\n\r\n  getPDF(pdf, count) {\r\n    if (!pdf) return;\r\n    try {\r\n      pdf.download(pdf.filename + '_' + count + '.pdf');\r\n    } catch (err) {\r\n      alert('Error saving: ' + pdf.filename + '; ' + err.message);\r\n    }\r\n  }\r\n\r\n  getSponsors(sponsors, name) {\r\n    let z = new Zipper(this._event, this.save);\r\n    if (z.zipSponsors(sponsors, name)) z.DownloadZip();\r\n  }\r\n\r\n  getCSV(csv) {\r\n    if (!csv) return;\r\n    console.log(csv);\r\n    try {\r\n      saveToFile_csv(csv.filename + '.csv', csv.data);\r\n    } catch (err) {\r\n      alert('Error saving: ' + csv.filename + '.csv ; ' + err.message);\r\n    }\r\n  }\r\n\r\n  getPPT(ppt) {\r\n    if (!ppt) return;\r\n    try {\r\n      ppt.download(); //(ppt.filename + \".pptx\", ppt.getBlobPromise());\r\n    } catch (err) {\r\n      alert('Error saving: ' + ppt.filename + '; ' + err.message);\r\n    }\r\n  }\r\n  get event() {\r\n    return this._event;\r\n  }\r\n\r\n  get length() {\r\n    return this.funcs.length;\r\n  }\r\n}\r\n","import React, {Component} from 'react';\r\nimport {Zipper} from \"../outputs/Zipper.js\";\r\nimport {SingleOutput} from \"../outputs/SingleOutput.js\";\r\nimport {\r\n    Modal,\r\n    ModalHeader,\r\n    ModalBody,\r\n    ModalFooter,\r\n    Container,\r\n    Row,\r\n    Col,\r\n    Button, ButtonGroup,\r\n    Card, //CardText, CardTitle,\r\n    // UncontrolledDropdown, DropdownToggle, DropdownItem, DropdownMenu,\r\n    Form, FormGroup, Label, Input\r\n} from 'reactstrap';\r\nimport NumberInput from \"../inputs/NumberInput\";\r\nimport TextInput from \"../inputs/TextInput\";\r\n\r\nexport default class OutputGenView extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            pdf_modal: false,\r\n            running: false,\r\n            selectedIdx: 0,\r\n            checked: SingleOutput.funcNames.map((x,i) => {return true}), //return i<7\r\n            progress: 0\r\n        };\r\n        this.toggle = this.toggle.bind(this);\r\n        this.toggleChecked = this.toggleChecked.bind(this);\r\n        this.downloadOne = this.downloadOne.bind(this);\r\n        this.downloadSelected = this.downloadSelected.bind(this);\r\n        this.checkAll = this.checkAll.bind(this);\r\n        this.checkNone = this.checkNone.bind(this);\r\n        this.updateBaseSize = this.updateBaseSize.bind(this);\r\n        this.updateTitleSize = this.updateTitleSize.bind(this);\r\n        this.updateFooter = this.updateFooter.bind(this);\r\n        this.onTLChange = this.onTLChange.bind(this);\r\n        this.onTRChange = this.onTRChange.bind(this);\r\n        this.onBLChange = this.onBLChange.bind(this);\r\n        this.downloadAll = this.downloadAll.bind(this);\r\n        this.onBRChange = this.onBRChange.bind(this);\r\n    }\r\n\r\n    toggle() {\r\n        this.setState({\r\n            pdf_modal: !this.state.pdf_modal\r\n        });\r\n    }\r\n\r\n\r\n    downloadOne() {\r\n      if (this.props.data.errors > 0) alert(\"Errors in schedule!  This may not be a good output\");\r\n      if (this.state.running) return;\r\n      let z = new SingleOutput(this.props.data, this.props.save);\r\n      this.setState({running: true});\r\n      setTimeout(() => {\r\n        z.get(this.state.selectedIdx);\r\n        this.setState({running: false});\r\n      }, 50);\r\n    }\r\n\r\n    downloadSelected() {\r\n      if (this.props.data.errors > 0) alert(\"Errors in schedule!  This may not be a good output\");\r\n      if (this.state.running) return;\r\n      let N = this.state.checked.filter((x)=>x).length;\r\n      if (N === 0) return;\r\n      if (N === 1) {\r\n        let z = new SingleOutput(this.props.data, this.props.save);\r\n        this.setState({running: true});\r\n        let toDo = 0;\r\n        for (let i = 0; i < this.state.checked.length; i++)\r\n          if (this.state.checked[i]) {\r\n            toDo = i;\r\n            break;\r\n          }\r\n        setTimeout(() => {\r\n          z.get(toDo);\r\n          this.setState({running: false});\r\n        }, 50);\r\n      } else {\r\n        let z = new Zipper(this.props.data, this.props.save);\r\n        this.setState({running: true});\r\n        console.log(this.state.checked);\r\n        setTimeout(() => {\r\n            this.state.checked.forEach((x,i) => {if (x) z.ProcessGiven(i)});\r\n            z.DownloadZip();\r\n            this.setState({running: false});\r\n        }, 50);\r\n      }\r\n    }\r\n\r\n    downloadAll() {\r\n        if (this.props.data.errors > 0) alert(\"Errors in schedule!  This may not be a good output\");\r\n        if (this.state.running) return;\r\n        let z = new Zipper(this.props.data, this.props.save);\r\n        this.setState({running: true});\r\n        setTimeout(() => {\r\n            while (z.FilesLeft > 0)\r\n                z.ProcessNext();\r\n            z.DownloadZip();\r\n            this.setState({running: false});\r\n        }, 50);\r\n    }\r\n\r\n    checkAll() {\r\n      let C = this.state.checked.map((x) => {return true;});\r\n      this.setState({checked: C});\r\n    }\r\n\r\n    checkNone() {\r\n      let C = this.state.checked.map((x) => {return false;});\r\n      this.setState({checked: C});\r\n    }\r\n\r\n    toggleChecked(idx) {\r\n      let C = this.state.checked;\r\n      C[idx] = !C[idx];\r\n      this.setState({checked: C});\r\n    }\r\n\r\n    updateTitleSize(value) {\r\n        let E = this.props.data;\r\n        E.pageFormat.titleFontSize = value;\r\n        this.props.handleChange(E);\r\n    }\r\n\r\n    updateFooter(value) {\r\n        let E = this.props.data;\r\n        E.pageFormat.footerText = value;\r\n        this.props.handleChange(E);\r\n    }\r\n\r\n    updateBaseSize(value) {\r\n        let E = this.props.data;\r\n        E.pageFormat.baseFontSize = value;\r\n        this.props.handleChange(E);\r\n    }\r\n\r\n    onTLChange(e, f) {\r\n        let file = f || e.target.files[0];\r\n        let reader = new FileReader();\r\n        reader.onload = (e) => {\r\n            let E = this.props.data;\r\n            E.pageFormat.logoTopLeft = reader.result;\r\n            this.props.handleChange(E);\r\n        };\r\n        reader.readAsDataURL(file);\r\n    }\r\n\r\n    onTRChange(e, f) {\r\n        let file = f || e.target.files[0];\r\n        let reader = new FileReader();\r\n        reader.onload = (e) => {\r\n            let E = this.props.data;\r\n            E.pageFormat.logoTopRight = reader.result;\r\n            this.props.handleChange(E);\r\n        };\r\n        reader.readAsDataURL(file);\r\n    }\r\n\r\n    onBLChange(e, f) {\r\n        let file = f || e.target.files[0];\r\n        let reader = new FileReader();\r\n        reader.onload = (e) => {\r\n            let E = this.props.data;\r\n            E.pageFormat.logoBotLeft = reader.result;\r\n            this.props.handleChange(E);\r\n        };\r\n        reader.readAsDataURL(file);\r\n    }\r\n\r\n    onBRChange(e, f) {\r\n        let file = f || e.target.files[0];\r\n        let reader = new FileReader();\r\n        reader.onload = (e) => {\r\n            let E = this.props.data;\r\n            E.pageFormat.logoBotRight = reader.result;\r\n            this.props.handleChange(E);\r\n        };\r\n        reader.readAsDataURL(file);\r\n    }\r\n\r\n\r\n    // To add image uploading...\r\n    // https://codepen.io/hartzis/pen/VvNGZP\r\n\r\n    render() {\r\n        return (\r\n            <Container>\r\n                <Modal isOpen={this.state.pdf_modal} toggle={this.toggle}>\r\n                    <ModalHeader toggle={this.toggle}>Edit PDF Format</ModalHeader>\r\n                    <ModalBody>\r\n                        <Container>\r\n                            <Row>\r\n                                <Col><label>\r\n                                    <img alt={\"Top Left Logo\"} src={this.props.data.pageFormat.logoTopLeft}\r\n                                         height={100}/>\r\n                                    <input type=\"file\" accept=\"image/*\" hidden ref=\"input\" onChange={this.onTLChange}/>\r\n                                </label></Col>\r\n                                <Col><label>\r\n                                    <img alt={\"Top Right Logo\"} src={this.props.data.pageFormat.logoTopRight}\r\n                                         height={100}/>\r\n                                    <input type=\"file\" accept=\"image/*\" hidden ref=\"input\" onChange={this.onTRChange}/>\r\n                                </label></Col>\r\n                            </Row>\r\n                            <br/>\r\n                            <NumberInput min={4} value={this.props.data.pageFormat.titleFontSize}\r\n                                         label={\"Title font size\"} onChange={this.updateTitleSize}/>\r\n                            <br/>\r\n                            <NumberInput min={2} value={this.props.data.pageFormat.baseFontSize}\r\n                                         label={\"Base font size\"} onChange={this.updateBaseSize}/>\r\n                            <br/>\r\n                            <Row>\r\n                                <Col><label>\r\n                                    <img alt={\"Bottom Left Logo\"} src={this.props.data.pageFormat.logoBotLeft}\r\n                                         height={100}/>\r\n                                    <input type=\"file\" accept=\"image/*\" hidden ref=\"input\" onChange={this.onBLChange}/>\r\n                                </label></Col>\r\n                                <Col><label>\r\n                                    <img alt={\"Bottom Right Logo\"} src={this.props.data.pageFormat.logoBotRight}\r\n                                         height={100}/>\r\n                                    <input type=\"file\" accept=\"image/*\" hidden ref=\"input\" onChange={this.onBRChange}/>\r\n                                </label></Col>\r\n                            </Row>\r\n                            <br/>\r\n                            <TextInput value={this.props.data.pageFormat.footerText} label={\"Footer Text\"}\r\n                                       onChange={this.updateFooter}/>\r\n                        </Container>\r\n                        <br/>\r\n                    </ModalBody>\r\n                    <ModalFooter>\r\n                        <Button color=\"secondary\" onClick={this.toggle}>Close</Button>\r\n                    </ModalFooter>\r\n                </Modal>\r\n\r\n                <strong>Outputs</strong>\r\n                <hr/>\r\n                <Row>\r\n                    <Col lg=\"12\">\r\n                      <Button color=\"primary\" block onClick={this.toggle}>Edit PDF format...</Button>\r\n                      {/*<br/>\r\n                      <Card body>\r\n                        <CardTitle>All outputs</CardTitle>\r\n                        <Button color={this.state.running ? \"secondary\" : \"success\"}\r\n                                onClick={this.downloadAll}>{this.state.running ? \"Please wait...\" : \"Download all!\"}</Button>\r\n                      </Card>\r\n                      <br/>\r\n                      <Card body>\r\n                        <CardTitle>Single output</CardTitle>\r\n                        <ButtonGroup>\r\n                        <UncontrolledDropdown>\r\n                          <DropdownToggle caret>\r\n                            {SingleOutput.funcNames[this.state.selectedIdx]}\r\n                          </DropdownToggle>\r\n                          <DropdownMenu>\r\n                            {SingleOutput.funcNames.map((x,i) => {\r\n                              return <DropdownItem key={i} onClick={() => {this.setState({selectedIdx: i})}}>{x}</DropdownItem>;\r\n                            })}\r\n                          </DropdownMenu>\r\n                        </UncontrolledDropdown>\r\n                        <Button color={this.state.running ? \"secondary\" : \"success\"}\r\n                                onClick={this.downloadOne}>{this.state.running ? \"Please wait...\" : \"Download one\"}</Button>\r\n                                </ButtonGroup>\r\n                      </Card>\r\n                      <br/>*/}\r\n                      <Card body>\r\n                        <Form>\r\n                          <FormGroup row>\r\n                          {SingleOutput.funcNames.map((x,i) => {\r\n                            return (\r\n                              <Col sm={{ size: 3 }} key={i}>\r\n                              <FormGroup check>\r\n                                <Label check>\r\n                                  <Input type=\"checkbox\" id=\"checkbox2\" checked={this.state.checked[i]} onChange={() => this.toggleChecked(i)}/>{' '}\r\n                                  {SingleOutput.funcNames[i]}\r\n                                </Label>\r\n                              </FormGroup>\r\n                              </Col>\r\n                            );\r\n                          })}\r\n                          </FormGroup>\r\n                        </Form>\r\n                        <ButtonGroup>\r\n                          <Button onClick={this.checkAll} color=\"info\">All</Button>\r\n                          <Button onClick={this.checkNone} color=\"warning\">None</Button>\r\n                        </ButtonGroup>\r\n                        <br/>\r\n                        <Button color={this.state.running ? \"secondary\" : \"success\"}\r\n                                onClick={this.downloadSelected}>{this.state.running ? \"Please wait...\" : \"Download these\"}</Button>\r\n                      </Card>\r\n                    </Col>\r\n                </Row>\r\n                <br/>\r\n                {/*<Row>*/}\r\n                {/*<Col lg=\"6\">*/}\r\n                {/*<Card body>*/}\r\n                {/*<CardTitle>CSV only</CardTitle>*/}\r\n                {/*<CardText>Export to CSV format used by the FLL scoring system</CardText>*/}\r\n                {/*<Button color=\"success\" onClick={this.generateCSV}>Go!</Button>*/}\r\n                {/*</Card>*/}\r\n                {/*</Col>*/}\r\n                {/*<Col lg=\"6\">*/}\r\n                {/*<Card body>*/}\r\n                {/*<CardTitle>PDF only</CardTitle>*/}\r\n                {/*<CardText>Export ready-to-print formatted PDFs</CardText>*/}\r\n                {/*<Button color=\"primary\" block onClick={this.toggle}>Edit format...</Button>*/}\r\n                {/*<Button color=\"success\" block onClick={this.generatePDF}>Go!</Button>*/}\r\n                {/*</Card>*/}\r\n                {/*</Col>*/}\r\n                {/*</Row>*/}\r\n            </Container>\r\n        );\r\n    }\r\n}\r\n","import React from 'react';\r\nimport SingleScheduleView from \"./SingleScheduleView\";\r\nimport IndivScheduleView from \"./IndivScheduleView\";\r\nimport VolunteerView from \"./VolunteerView\";\r\nimport SponsorView from \"./SponsorView\";\r\nimport OutputGenView from \"./OutputGenView\";\r\n\r\nimport {TYPES} from \"../api/SessionTypes\";\r\n\r\nimport {Container, Row, Col, Nav, NavItem, NavLink, TabContent, TabPane} from 'reactstrap';\r\nimport SessionForm from \"./SessionForm\";\r\nimport BasicsForm from \"./BasicsForm\";\r\nimport TeamList from '../inputs/TeamList';\r\nimport ToggleButton from 'react-toggle-button';\r\n\r\nexport default class FullScheduleView extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            activeTab: 'sessions',\r\n            editable: false\r\n        }\r\n\r\n        this.getItems = this.getItems.bind(this);\r\n        this.onSwap = this.onSwap.bind(this);\r\n        this.updatePDFSettings = this.updatePDFSettings.bind(this);\r\n        this.updateVolunteers = this.updateVolunteers.bind(this);\r\n        this.updateSponsors = this.updateSponsors.bind(this);\r\n        this.toggleEditable = this.toggleEditable.bind(this);\r\n    }\r\n\r\n    onSwap(sID, a, b) {\r\n        let E = this.props.event;\r\n        let err = E.swapTeams(sID, a.id, b.id);\r\n        if (err) alert(err);\r\n        else this.props.onSwap(E);\r\n    }\r\n\r\n    getItems() {\r\n        return this.props.event.sessions;\r\n    }\r\n\r\n    toggle(tab) {\r\n        if (this.state.activeTab !== tab) {\r\n            this.setState({\r\n                activeTab: tab\r\n            });\r\n        }\r\n    }\r\n\r\n    updateSponsors(T) {\r\n        let E = this.props.event;\r\n        E.sponsors = T;\r\n        this.props.onChange(E);\r\n    }\r\n\r\n    updateVolunteers(V) {\r\n        let E = this.props.event;\r\n        E.volunteers = V;\r\n        this.props.onChange(E);\r\n    }\r\n\r\n    //TODO make cosmetic\r\n    updateDays(T) {\r\n\r\n    }\r\n\r\n    //TODO make cosmetic\r\n    updateTeams(T) {\r\n        let E = this.props.event;\r\n        E.teams = T;\r\n        this.props.onChange(E);\r\n        console.log(this.props.event);\r\n    }\r\n\r\n    //TODO make cosmetic\r\n    updateSessions(S) {\r\n        let E = this.props.event;\r\n        for (let i = 0; i < E.sessions.length; i++) {\r\n            if (E.sessions[i].id === S.id) {\r\n                E.sessions[i] = S;\r\n                this.props.onChange(E);\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\n    updatePDFSettings(S) {\r\n        let E = this.props.event;\r\n        E.pageFormat = S.pageFormat;\r\n        this.props.onChange(E);\r\n    }\r\n\r\n    toggleEditable() {\r\n        this.setState({editable: !this.state.editable});\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <Container>\r\n                <Nav pills>\r\n                    {/*<NavItem><NavLink>{this.props.event.errors} error{this.props.event.errors !== 1 && \"s\"}</NavLink></NavItem>*/}\r\n                    {/*<NavItem>*/}\r\n                    {/*<NavLink href=\"#\" className={(this.state.activeTab === 'display') ? \"active\" : \"\"}*/}\r\n                    {/*onClick={() => { this.toggle('display')}}>*/}\r\n                    {/*Display Parameters*/}\r\n                    {/*</NavLink>*/}\r\n                    {/*</NavItem>*/}\r\n                    <NavItem>\r\n                        <NavLink href=\"#\" className={(this.state.activeTab === 'sessions') ? \"active\" : \"\"}\r\n                                 onClick={() => {\r\n                                     this.toggle('sessions')\r\n                                 }}>\r\n                            Session schedules\r\n                        </NavLink>\r\n                    </NavItem>\r\n                    <NavItem>\r\n                        <NavLink href=\"#\" className={(this.state.activeTab === 'indiv') ? \"active\" : \"\"}\r\n                                 onClick={() => {\r\n                                     this.toggle('indiv')\r\n                                 }}>\r\n                            Individual schedules\r\n                        </NavLink>\r\n                    </NavItem>\r\n                    <NavItem>\r\n                        <NavLink href=\"#\" className={(this.state.activeTab === 'vols') ? \"active\" : \"\"}\r\n                                 onClick={() => {\r\n                                     this.toggle('vols')\r\n                                 }}>\r\n                            Volunteers\r\n                        </NavLink>\r\n                    </NavItem>\r\n                    <NavItem>\r\n                        <NavLink href=\"#\" className={(this.state.activeTab === 'sponsors') ? \"active\" : \"\"}\r\n                                 onClick={() => {\r\n                                     this.toggle('sponsors')\r\n                                 }}>\r\n                            Sponsors\r\n                        </NavLink>\r\n                    </NavItem>\r\n                    <NavItem>\r\n                        <NavLink href=\"#\" className={(this.state.activeTab === 'outputs') ? \"active\" : \"\"}\r\n                                 onClick={() => {\r\n                                     this.toggle('outputs')\r\n                                 }}>\r\n                            Generate Outputs\r\n                        </NavLink>\r\n                    </NavItem>\r\n                    {(this.props.event.errors === 0 && this.state.activeTab === 'sessions') ? <NavItem>\r\n                        <div onClick={this.toggleEditable}>\r\n                            <small className=\"not-text\">Editable</small>\r\n                            &nbsp;\r\n                            <ToggleButton value={this.state.editable} onToggle={this.toggleEditable}/></div>\r\n                    </NavItem> : \"\"}\r\n\r\n                </Nav>\r\n                <TabContent activeTab={this.state.activeTab}>\r\n                    <TabPane tabId='display'>\r\n                        &nbsp;\r\n                        <BasicsForm event={this.props.event} cosmetic onChange={this.updateDays}/>\r\n                        {this.props.event.sessions.map(S =>\r\n                            <SessionForm key={S.id} cosmetic session={S} onChange={this.updateSessions}/>)}\r\n                        <TeamList cosmetic teams={this.props.event.teams} onChange={this.updateTeams}/>\r\n                    </TabPane>\r\n                    <TabPane tabId='sessions'>\r\n                        &nbsp;\r\n                        <Row>\r\n                            {this.getItems().filter(x => x.type !== TYPES.BREAK)\r\n                                .sort((a, b) => {\r\n                                    return a.type.priority - b.type.priority\r\n                                })\r\n                                .map(x => {\r\n                                    return (\r\n                                        <Col sm=\"12\" md=\"6\" key={x.id}>\r\n                                            <SingleScheduleView id={x.id}\r\n                                                                data={this.props.event.getSessionDataGrid(x.id)}\r\n                                                                editable={this.state.editable} onSwap={this.onSwap}\r\n                                                                session={x}/>\r\n                                        </Col>);\r\n                                })}\r\n                        </Row>\r\n                    </TabPane>\r\n                    <TabPane tabId='indiv'>\r\n                        <IndivScheduleView data={this.props.event.getIndivDataGrid()}/>\r\n                    </TabPane>\r\n                    <TabPane tabId='vols'>\r\n                        <VolunteerView data={this.props.event.volunteers} onChange={this.updateVolunteers}/>\r\n                    </TabPane>\r\n                    <TabPane tabId='sponsors'>\r\n                        <SponsorView data={this.props.event} handleChange={this.updateSponsors}/>\r\n                    </TabPane>\r\n                    <TabPane tabId='outputs'>\r\n                        <OutputGenView data={this.props.event} save={this.props.save}\r\n                                       handleChange={this.updatePDFSettings}/>\r\n                    </TabPane>\r\n                </TabContent>\r\n            </Container>\r\n        );\r\n    }\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nimport InitForm from \"./ui/InitForm\";\r\nimport { EventParams } from \"./api/EventParams\";\r\nimport DetailView from \"./ui/DetailView\";\r\nimport TopBar from \"./ui/TopBar\";\r\nimport { DateTime } from \"./api/DateTime\";\r\n\r\nimport { Scheduler } from \"./scheduling/Scheduler\";\r\n\r\nimport { freeze, thaw, saveToFile_json } from \"./scheduling/utilities\";\r\n\r\nimport { Container, Jumbotron, Button, Row, Col } from \"reactstrap\";\r\nimport DayScheduleView from \"./ui/DayScheduleView\";\r\nimport FullScheduleView from \"./ui/FullScheduleView\";\r\n\r\nimport \"./App.css\";\r\nimport \"bootstrap/dist/css/bootstrap.css\";\r\nimport \"react-datasheet/lib/react-datasheet.css\";\r\nimport \"./react-datagrid-custom.css\";\r\n\r\nconst VERSION = \"20.0.2\";\r\n\r\n// Should set this up as github.io page under the firstaustralia repo\r\n// That way github manages load balancing and doesn't crash\r\n\r\nclass App extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      display: \"Initialise\",\r\n      version: VERSION,\r\n      eventParams: new EventParams(\r\n        VERSION,\r\n        \"2020 FLL Competition\",\r\n        24,\r\n        new DateTime(8.5 * 60),\r\n        new DateTime(17 * 60)\r\n      ),\r\n      processing: false,\r\n    };\r\n    this.initSchedule = this.initSchedule.bind(this);\r\n    this.handleScheduleChange = this.handleScheduleChange.bind(this);\r\n    this.customise = this.customise.bind(this);\r\n    this.generate = this.generate.bind(this);\r\n    this.onSave = this.onSave.bind(this);\r\n    this.onLoad = this.onLoad.bind(this);\r\n    this.updatePDFSettings = this.updatePDFSettings.bind(this);\r\n    this.update = this.update.bind(this);\r\n  }\r\n\r\n  initSchedule(initState) {\r\n    let E = new EventParams(\r\n      this.state.version,\r\n      initState.title,\r\n      initState.nTeams,\r\n      initState.startTime,\r\n      initState.endTime\r\n    );\r\n\r\n    this.setState({\r\n      eventParams: E,\r\n    });\r\n  }\r\n\r\n  handleScheduleChange(E) {\r\n    this.setState({\r\n      eventParams: E,\r\n    });\r\n    // I don't love this way of doing it...\r\n    let S = new Scheduler(E);\r\n    S.buildAllTables();\r\n  }\r\n\r\n  customise() {\r\n    this.state.eventParams.populateFLL();\r\n    let S = new Scheduler(this.state.eventParams);\r\n    S.buildAllTables();\r\n    this.setState({ display: \"Customise\" });\r\n    window.scrollTo(0, 0);\r\n  }\r\n\r\n  generate() {\r\n    console.log(\"GENERATING\");\r\n    this.setState({ processing: true });\r\n    setTimeout(() => {\r\n      let S = new Scheduler(this.state.eventParams);\r\n      let count = 500;\r\n      do {\r\n        S.buildAllTables();\r\n        S.fillAllTables();\r\n        S.evaluate();\r\n      } while (this.state.eventParams.errors > 0 && count-- > 0);\r\n      if (this.state.eventParams.errors > 0)\r\n        alert(\"Schedule generated with errors! Please adjust parameters\");\r\n      this.setState({ display: \"Review\" });\r\n      this.state.eventParams.buildVolunteerSheet();\r\n      this.setState({ processing: false });\r\n      window.scrollTo(0, 0);\r\n    }, 50);\r\n  }\r\n\r\n  onSave(fname, zip) {\r\n    let filename = fname;\r\n    let json_str = JSON.stringify(this.state, freeze);\r\n    if (!filename) filename = this.state.eventParams.title.replace(/ /g, \"_\");\r\n    if (zip) {\r\n      try {\r\n        zip.file(\r\n          filename + \".schedule\",\r\n          new Blob([json_str], { type: \"application/json\" })\r\n        );\r\n      } catch (err) {\r\n        alert(\"Error saving: \" + filename + \".csv ; \" + err.message);\r\n      }\r\n    } else {\r\n      saveToFile_json(filename + \".schedule\", json_str);\r\n    }\r\n    // let json_str = JSON.stringify(this.state.eventParams,freeze);\r\n    // Write to file\r\n  }\r\n\r\n  onLoad(json_str) {\r\n    let E = JSON.parse(json_str, thaw);\r\n    console.log(E);\r\n    // let disp = 'Customise';\r\n    // if (E.schedule !== null) disp = 'Review';\r\n    this.setState(E);\r\n  }\r\n\r\n  updatePDFSettings(S) {\r\n    let E = this.state.eventParams;\r\n    E.titleFontSize = S.titleFontSize;\r\n    E.baseFontSize = S.baseFontSize;\r\n    E.logoTopLeft = S.logoTopLeft;\r\n    E.logoTopRight = S.logoTopRight;\r\n    E.logoBotLeft = S.logoBotLeft;\r\n    E.logoBotRight = S.logoBotRight;\r\n    E.footerText = S.footerText;\r\n    this.setState({ eventParams: E });\r\n  }\r\n\r\n  update(event) {\r\n    // let E = this.state.eventParams;\r\n    // E.teams = event.teams;\r\n    // for (let i = 0; i < E.sessions.length; i++) {\r\n    //     E.sessions = event.sessions;\r\n    // }\r\n    // console.log(this.state.eventParams.sessions[6].schedule[0].teams.map(x => this.state.eventParams.getTeam(x).number));\r\n    // console.log(event.sessions[6].schedule[0].teams.map(x => event.getTeam(x).number));\r\n    this.setState({ eventParams: event });\r\n  }\r\n\r\n  render() {\r\n    let mainWindow = <h1>An error occurred</h1>;\r\n    if (this.state.display === \"Initialise\") {\r\n      mainWindow = (\r\n        <Jumbotron>\r\n          <h1 className=\"App-intro\">Basic setup</h1>\r\n          <InitForm\r\n            event={this.state.eventParams}\r\n            onChange={this.handleScheduleChange}\r\n          />\r\n          <Button color=\"warning\" onClick={this.customise}>\r\n            Customise\r\n          </Button>\r\n          &nbsp;\r\n          <Button\r\n            color=\"success\"\r\n            onClick={() => {\r\n              this.state.eventParams.populateFLL();\r\n              this.generate();\r\n            }}\r\n          >\r\n            {this.state.processing ? \"Generating...\" : \"Generate\"}\r\n          </Button>\r\n        </Jumbotron>\r\n      );\r\n    } else if (this.state.display === \"Customise\") {\r\n      mainWindow = (\r\n        <Row>\r\n          <Col lg=\"3\">\r\n            &nbsp;\r\n            <br />\r\n            <Button color=\"success\" onClick={this.generate}>\r\n              {this.state.processing\r\n                ? \"Generating...\"\r\n                : \"Run Schedule Generation\"}\r\n            </Button>\r\n            <br />\r\n            &nbsp;\r\n            <DayScheduleView event={this.state.eventParams} />\r\n          </Col>\r\n          <Col lg=\"9\">\r\n            <Jumbotron>\r\n              <DetailView\r\n                onChange={this.handleScheduleChange}\r\n                event={this.state.eventParams}\r\n              />\r\n            </Jumbotron>\r\n          </Col>\r\n        </Row>\r\n      );\r\n    } else if (this.state.display === \"Review\") {\r\n      mainWindow = (\r\n        <Row>\r\n          <Col lg=\"3\">\r\n            &nbsp;\r\n            <br />\r\n            <Button\r\n              color=\"warning\"\r\n              onClick={() => this.setState({ display: \"Customise\" })}\r\n            >\r\n              Change parameters\r\n            </Button>\r\n            &nbsp;\r\n            <br />\r\n            &nbsp;\r\n            <DayScheduleView event={this.state.eventParams} />\r\n          </Col>\r\n          <Col lg=\"9\">\r\n            <Jumbotron>\r\n              <FullScheduleView\r\n                event={this.state.eventParams}\r\n                save={this.onSave}\r\n                onChange={this.updatePDFSettings}\r\n                onSwap={this.update}\r\n              />\r\n            </Jumbotron>\r\n          </Col>\r\n        </Row>\r\n      );\r\n    }\r\n    return (\r\n      <Container fluid className=\"App\">\r\n        <TopBar\r\n          version={this.state.version}\r\n          onSave={this.onSave}\r\n          onLoad={this.onLoad}\r\n        />\r\n        {mainWindow}\r\n      </Container>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","// In production, we register a service worker to serve assets from local cache.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\r\n// cached resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\r\n// This link also includes instructions on opting out of this behavior.\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport default function register() {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Lets check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://goo.gl/SC7cgQ'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not local host. Just register service worker\r\n        registerValidSW(swUrl);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the old content will have been purged and\r\n              // the fresh content will have been added to the cache.\r\n              // It's the perfect time to display a \"New content is\r\n              // available; please refresh.\" message in your web app.\r\n              console.log('New content is available; please refresh.');\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      if (\r\n        response.status === 404 ||\r\n        response.headers.get('content-type').indexOf('javascript') === -1\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport registerServiceWorker from './registerServiceWorker';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\nregisterServiceWorker();\r\n"],"sourceRoot":""}