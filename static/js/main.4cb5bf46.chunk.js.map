{"version":3,"sources":["api/DateTime.js","api/TeamParams.js","api/SessionTypes.js","api/SessionParams.js","scheduling/Instance.js","api/PageFormat.js","scheduling/utilities.js","api/EventParams.js","inputs/TextInput.js","inputs/NumberInput.js","inputs/BooleanInput.js","ui/BasicsForm.js","inputs/DateTimeInput.js","ui/SessionForm.js","inputs/TeamList.js","ui/DetailView.js","inputs/TextAreaInput.js","ui/InitForm.js","ui/TopBar.js","scheduling/Scheduler.js","ui/DayScheduleView.js","ui/SingleScheduleView.js","ui/IndivScheduleView.js","inputs/VolunteerInput.js","ui/VolunteerView.js","ui/SponsorView.js","templates/PdfDoc.js","outputs/SessionOutputs.js","outputs/TeamOutputs.js","outputs/SignOutputs.js","outputs/DataOutputs.js","outputs/VolunteerOutputs.js","templates/PptPres.js","outputs/PresentationOutput.js","outputs/Zipper.js","outputs/SingleOutput.js","ui/OutputGenView.js","ui/FullScheduleView.js","App.js","registerServiceWorker.js","index.js"],"names":["DateTime","mins","days","this","x","d","Math","floor","h","m","zh","zm","length","inc","_mins","value","displayTime","res","split","parseInt","dayIdx","justTime","_days","includes","indexOf","o","_class","TeamParams","id","number","name","affiliation","pitNum","extraTime","excludeJudging","startTime","endTime","isSurrogate","schedule","_name","replace","_number","T","SessionType","uid","priority","defaultTitle","defaultLocs","fillerPolicy","POLICIES","blank","_priority","_defaultTitle","_fillerPolicy","_defaultLocs","console","log","V","Object","values","TYPES","forEach","v","surrogates","JUDGING","INSPECTION","MATCH_ROUND","MATCH_ROUND_PRACTICE","MATCH_FILLER","MATCH_FILLER_PRACTICE","BREAK","SessionParams","type","nLocs","noPractice","_id","_type","_noprac","A","i","push","locations","universal","actualStartTime","clone","actualEndTime","nSims","len","buf","overlap","errors","instances","extraTimeFirst","extraTimeEvery","appliesTo","usesSurrogates","_locations","pop","_schedule","_nSims","_startTime","_actualStartTime","_endTime","_actualEndTime","_len","_overlap","_buf","_errors","_instances","_extraTimeFirst","_extraTimeEvery","_universal","_appliesTo","_usesSurrogates","S","Instance","session_id","num","time","teams","loc","standins","extra","I","PageFormat","_header","logoTopLeft","logoTopRight","logoBotLeft","logoBotRight","titleFontSize","baseFontSize","footerText","PreComputedImages","header","flllogo","_logoTopLeft","gamelogo","_logoTopRight","mqlogo","_logoBotLeft","firstlogo","_logoBotRight","customLogos","_footer","_baseFontSize","_titleFontSize","E","shuffle","a","j","random","overlaps","b","hasDone","team","filter","saveToFile_csv","filename","content","file","Blob","window","navigator","msSaveOrOpenBlob","document","createElement","url","URL","createObjectURL","href","download","body","appendChild","click","setTimeout","removeChild","revokeObjectURL","freeze","key","object","EventParams","thaw","version","title","nTeams","_version","uid_counter","sort","minTravel","sessions","pilot","consolidatedAwards","awardStyle","AWARD_STYLES","judgesAwards","awards","AWARD_NAMES","nTables","nPracs","sponsors","national","local","nationalSponsors","addNationalSponsor","_volunteers","tempNames","pageFormat","Infinity","lines","t","savedName","savedNum","savedAffil","savedPit","l","shift","fields","nAwardsNeeded","distances","map","abs","closestIdx","findIndex","min","awardStyleIdx","actualStart","actualEnd","ceil","nJudgings","startLunch","max","endLunch","getSession","nDays","nightStart","nightEnd","timeAvailable","s","rdOverlap","rdLen","timePerMatch","matchLen","matchBuf","roundOneLength","roundOneEnd","dif","bufDiff","first","volunteers","buildVolunteerSheet","nJudges","find","numberOfVols","count","per","staff","Volunteers","roles","vol","pdf","session","grid","cols","applyingBreaks","applies","slice","br","instance","colSpan","diff","dummy","getTeam","w","row","compact","minTravelTime","hadASurrogate","sessionID","filt","newMins","idx","splice","excl","startA","endA","startB","endB","sId","teamA","teamB","iA","iB","canA","canB","canDo","locA","locB","sA","eA","sB","eB","dA","_teams","maxId","_title","_sessions","_awards","_judgesAwards","_consolidatedAwards","_awardStyle","nTrophies","round","_minTravel","_extraTime","_nTables","_display","_pilot","p","TextInput","props","handleChange","bind","uniqueId","enableUniqueIds","event","val","target","onChange","hidden","nolabel","sm","large","for","nextUniqueId","label","lastUniqueId","React","Component","NumberInput","Number","step","BooleanInput","toggleChecked","disabled","color","onClick","BasicsForm","state","getDataGrid","checked","selectedIdx","updateTitle","updateMinTravel","updateExtraTime","updateNDays","updateDays","updateAwardStyle","toggleAward","updateConsolidatedAwards","readOnly","newTitle","data","setState","updatedAwards","changes","cell","col","dayInput","valueRenderer","sheetRenderer","className","children","onCellsChanged","cosmetic","advanced","caret","awardPerc","aIdx","substring","DateTimeInput","handleTimeChange","handleDateChange","buildInput","day","pattern","timeValue","immutable","SessionForm","updateName","updateStartTime","updateEndTime","updateLen","updateOverlap","updateBuf","updateNSims","updateNLocs","updateExtraFirst","updateExtraEvery","updateLocs","updateNoprac","handleDelete","alert","onDelete","truth","onToggle","TeamList","toAdd","selectedTeam","modal","toggle","updateCells","deleteTeam","changeToAdd","addTeams","setTeamExclude","setTeamExtra","setTeamStartTime","setTeamEndTime","ev","size","isOpen","buildModal","width","rowRenderer","DetailView","activeTab","selectedSession","handleScheduleChange","updateSessions","updateTeams","toggleAdvanced","toggleModal","toggleApplies","updateUniversal","deleteSession","addSession","tab","syncLocs","container","include","lg","md","pills","tabId","renderSessions","TextAreaInput","style","rows","placeholder","InitForm","updateNTeams","updateNTables","updatePilot","updateTeamNames","updateNPracs","newN","newTime","e","onSubmit","handleSubmit","TopBar","onFileChange","f","files","reader","FileReader","onload","onLoad","result","readAsText","light","expand","alt","src","navbar","nav","inNavbar","data-tip","right","rel","divider","onSave","place","effect","accept","ref","Scheduler","empty","willWork","timeInc","end","tableSession","offset","locOffset","numOffset","locD","now","L","lastNTeams","Array","everyN","extraTimeTeams","roundsSinceExtra","flag","extraRoundsNeeded","extraRoundsMade","extraRounds","whenDone","sortThingsOut","initialFill","swapFill","oneSetOfTeams","fillInstance","k","fixed","evaluate","swapFillSession","lostTeams","instance_A","tA","instance_B","tB","DayScheduleView","getItems","sorted","items","sTime","eTime","contents","break","SingleScheduleView","swapee","select","editable","onSwap","y","renderAsTable","IndivScheduleView","VolunteerInput","handleCountChange","handleNameChange","updateVol","newCount","VolunteerView","toggleEditable","downloadTemplate","deleteVol","importVols","startsWith","SponsorView","addSponsor","deleteSponsor","arr","extension","addLocalSponsor","join","readAsDataURL","deleteLocalSponsor","img","height","pdfMake","vfs","pdfFonts","PdfDoc","format","landscape","_format","imageDict","logo1","logo2","logo3","logo4","styleDict","fontSize","bold","alignment","footer","header2","signTitle","signSubtitle","certTitle","certSubtitle","tablebody","tablehead","breakrow","fillColor","teamEntry","doc","text","margin","background","portraitBackground","pageMargins","pageSize","images","styles","pageOrientation","landscapeBackground","blob","pageBreak","canvas","x1","y1","x2","y2","lineWidth","createPdf","err","message","open","Promise","resolve","reject","getBlob","error","image","table","widths","fit","layout","_filename","MakeSessionPDF","maxLocs","addContent","headerRows","dontBreakRows","toString","sessionPage","getSessionDataGrid","addPageBreak","chomp","MakeDaySchedulePdf","MakePracticeTableSignupPdf","timeIncPrac","MakeTeamListPDF","MakeAllTeamsPDF","getIndivDataGrid","N","keepWithHeaderRows","curStyle","MakeIndivTeamsPDF","spot","teamPage","MakePitSignsPdf","MakeLocationSignsPdf","MakeAwardCertPdf","F","DrawLine","MakeParticipationCertPdf","MakeScoringSystemCSV","csv","rankingMatches","allRounds","getSessions","TimeToExcel","tmp","allJudging","practiceMatches","allPRounds","MakeVolunteerListPdf","colorDark","MakeSigninPdf","keys","PptPres","logos","pptx","PptxGenJS","setLayout","defineSlideMaster","bkgd","objects","sizing","options","align","fontFace","autoFit","rect","fill","addNewSlide","addText","winner","slide","save","MakeClosingPresentation","nationals","addTitle","addWinner","Zipper","saveFunc","_event","_idx","zipname","funcs","zipPDF","zipCSV","zipSponsors","zipPPT","zip","JSZip","generateAsync","then","saveAs","folder","getBlobPromise","zipAllLogos","ppt","im","uri","base64","SingleOutput","getPDF","getCSV","getSponsors","getPPT","z","DownloadZip","funcNames","OutputGenView","pdf_modal","running","progress","downloadOne","downloadSelected","checkAll","checkNone","updateBaseSize","updateTitleSize","updateFooter","onTLChange","onTRChange","onBLChange","downloadAll","onBRChange","get","toDo","ProcessGiven","FilesLeft","ProcessNext","C","block","check","FullScheduleView","updatePDFSettings","updateVolunteers","updateSponsors","sID","swapTeams","App","display","eventParams","processing","initSchedule","customise","generate","update","initState","buildAllTables","populateFLL","scrollTo","fillAllTables","fname","json_str","JSON","stringify","saveToFile_json","parse","mainWindow","fluid","isLocalhost","Boolean","location","hostname","match","registerValidSW","swUrl","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","catch","ReactDOM","render","getElementById","process","origin","addEventListener","fetch","response","status","headers","ready","unregister","reload","checkValidServiceWorker","registerServiceWorker"],"mappings":"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","file":"static/js/main.4cb5bf46.chunk.js","sourcesContent":["export class DateTime {\r\n  constructor(mins, days = ['Day 1']) {\r\n    this.mins = mins;\r\n    this.days = days;\r\n  }\r\n\r\n  displayTime() {\r\n    if (!this.mins) return '--:--';\r\n    let x = this.mins % (24 * 60);\r\n    let d = Math.floor(this.mins / (24 * 60));\r\n    let h = Math.floor(x / 60);\r\n    let m = x % 60;\r\n    let zh = h < 10 ? '0' : '';\r\n    let zm = m < 10 ? '0' : '';\r\n    return (\r\n      (this.days.length > 1 ? this.days[d] + ' ' : '') + zh + h + ':' + zm + m\r\n    );\r\n  }\r\n\r\n  justDay() {\r\n    let d = Math.floor(this.mins / (24 * 60));\r\n    return this.days[d];\r\n  }\r\n\r\n  justTime() {\r\n    let x = this.mins % (24 * 60);\r\n    let h = Math.floor(x / 60);\r\n    let m = x % 60;\r\n    let zh = h < 10 ? '0' : '';\r\n    let zm = m < 10 ? '0' : '';\r\n    return zh + h + ':' + zm + m;\r\n  }\r\n\r\n  get mins() {\r\n    return this._mins;\r\n  }\r\n\r\n  set mins(value) {\r\n    this._mins = value;\r\n  }\r\n\r\n  get time() {\r\n    return this.displayTime();\r\n  }\r\n\r\n  set time(value) {\r\n    let res = value.split(':');\r\n    this._mins =\r\n      parseInt(res[0], 10) * 60 + parseInt(res[1], 10) + this.dayIdx * 24 * 60;\r\n  }\r\n\r\n  get dayIdx() {\r\n    return Math.floor(this._mins / (24 * 60));\r\n  }\r\n\r\n  get timeValue() {\r\n    return this.justTime();\r\n  }\r\n\r\n  get day() {\r\n    return this._days[this.dayIdx];\r\n  }\r\n\r\n  set day(value) {\r\n    if (this.days.includes(value))\r\n      this.mins =\r\n        (this.mins ? this.mins % (24 * 60) : 0) +\r\n        this.days.indexOf(value) * 24 * 60;\r\n  }\r\n\r\n  get days() {\r\n    return this._days;\r\n  }\r\n\r\n  set days(value) {\r\n    this._days = value;\r\n  }\r\n\r\n  clone(inc = 0) {\r\n    return new DateTime(this.mins + inc, this.days);\r\n  }\r\n\r\n  static freeze(o) {\r\n    return {\r\n      _class: 'DateTime',\r\n      mins: o.mins,\r\n      days: o.days\r\n    };\r\n  }\r\n\r\n  static thaw(o) {\r\n    return new DateTime(o.mins, o.days);\r\n  }\r\n}\r\n","import { DateTime } from './DateTime';\r\n\r\nexport class TeamParams {\r\n  constructor(id, number) {\r\n    this.number = number;\r\n    this.name = 'Team ' + number;\r\n\r\n    // this.id = new ShortUniqueId();\r\n    this.id = id;\r\n\r\n    // So far unused\r\n    this.affiliation = number;\r\n    this.pitNum = number;\r\n    this.extraTime = false;\r\n    this.excludeJudging = false;\r\n    this.startTime = new DateTime(null);\r\n    this.endTime = new DateTime(null);\r\n    this.isSurrogate = false;\r\n    this.schedule = [];\r\n  }\r\n\r\n  get name() {\r\n    return this._name;\r\n  }\r\n\r\n  set name(value) {\r\n    this._name = value.replace(/\\s+/g, ' ');\r\n  }\r\n\r\n  get number() {\r\n    return this._number;\r\n  }\r\n\r\n  set number(value) {\r\n    this._number = value;\r\n  }\r\n\r\n  static freeze(o) {\r\n    return {\r\n      _class: 'TeamParams',\r\n      number: o.number,\r\n      name: o.name,\r\n      id: o.id,\r\n      affiliation: o.affiliation,\r\n      pitNum: o.pitNum,\r\n      extraTime: o.extraTime,\r\n      excludeJudging: o.excludeJudging,\r\n      startTime: o.startTime,\r\n      endTime: o.endTime,\r\n      isSurrogate: o.isSurrogate,\r\n      schedule: o.schedule\r\n    };\r\n  }\r\n\r\n  static thaw(o) {\r\n    let T = new TeamParams(o.id, o.number);\r\n    T.name = o.name;\r\n    T.affiliation = o.affiliation;\r\n    T.pitNum = o.pitNum;\r\n    T.extraTime = o.extraTime;\r\n    T.excludeJudging = o.excludeJudging;\r\n    T.startTime = o.startTime;\r\n    T.endTime = o.endTime;\r\n    T.isSurrogate = o.isSurrogate;\r\n    T.schedule = o.schedule;\r\n    return T;\r\n  }\r\n}\r\n","export class SessionType {\r\n  constructor(\r\n    uid,\r\n    name,\r\n    priority,\r\n    defaultTitle,\r\n    defaultLocs,\r\n    fillerPolicy = POLICIES.blank\r\n  ) {\r\n    this._name = name;\r\n    this._priority = priority;\r\n    this._defaultTitle = defaultTitle;\r\n    this._fillerPolicy = fillerPolicy;\r\n    this._defaultLocs = defaultLocs;\r\n  }\r\n\r\n  get name() {\r\n    return this._name;\r\n  }\r\n\r\n  get priority() {\r\n    return this._priority;\r\n  }\r\n\r\n  get defaultTitle() {\r\n    return this._defaultTitle;\r\n  }\r\n\r\n  get fillerPolicy() {\r\n    return this._fillerPolicy;\r\n  }\r\n\r\n  get defaultLocs() {\r\n    return this._defaultLocs;\r\n  }\r\n\r\n  static freeze(o) {\r\n    return {\r\n      _class: 'SessionType',\r\n      _name: o.name\r\n    };\r\n  }\r\n\r\n  static thaw(o) {\r\n    // console.log(TYPES);\r\n    // console.log(Object.keys(TYPES));\r\n    console.log('Object name:');\r\n    console.log(o._name);\r\n    let V = null;\r\n    Object.values(TYPES).forEach(v => {\r\n      if (o._name === v.name) console.log('MATCH');\r\n      if (o._name === v.name) V = v;\r\n    });\r\n    return V;\r\n  }\r\n}\r\n\r\nexport const POLICIES = { blank: 'Leave blanks', surrogates: 'Use surrogates' };\r\n\r\nexport const TYPES = {\r\n  JUDGING: new SessionType(16, 'Judging', 8, 'Judging', 'Room'),\r\n  INSPECTION: new SessionType(24, 'Inspection', 12, 'Inspection', 'Room'),\r\n  MATCH_ROUND: new SessionType(\r\n    32,\r\n    'Rounds',\r\n    16,\r\n    'Round',\r\n    'Table',\r\n    POLICIES.surrogates\r\n  ),\r\n  MATCH_ROUND_PRACTICE: new SessionType(\r\n    33,\r\n    'Practice Rounds',\r\n    128,\r\n    'Practice Round',\r\n    'Table',\r\n    POLICIES.surrogates\r\n  ),\r\n  MATCH_FILLER: new SessionType(\r\n    48,\r\n    'Matches',\r\n    32,\r\n    'Qualifying Match',\r\n    'Field',\r\n    POLICIES.surrogates\r\n  ),\r\n  MATCH_FILLER_PRACTICE: new SessionType(\r\n    49,\r\n    'Practice Matches',\r\n    129,\r\n    'Practice Match',\r\n    'Field',\r\n    POLICIES.surrogates\r\n  ),\r\n  BREAK: new SessionType(64, 'Breaks', 0, 'Break', 'Everywhere')\r\n};\r\n","import { TYPES } from \"./SessionTypes\";\r\n\r\nexport default class SessionParams {\r\n  constructor(\r\n    uid,\r\n    type,\r\n    name,\r\n    nLocs = 4,\r\n    startTime = null,\r\n    endTime = null,\r\n    noPractice = false\r\n  ) {\r\n    this._id = uid;\r\n    this._type = type;\r\n\r\n    this.name = name ? name : this.type.defaultTitle + \" \" + this._id;\r\n    this._noprac = noPractice;\r\n\r\n    let A = [];\r\n    for (let i = 1; i <= nLocs; i++) A.push(this.type.defaultLocs + \" \" + i);\r\n    this.locations = A;\r\n\r\n    this.universal = false;\r\n\r\n    this.startTime = startTime;\r\n    this.endTime = endTime;\r\n    if (this.startTime) this.actualStartTime = startTime.clone();\r\n    if (this.endTime) this.actualEndTime = endTime.clone();\r\n\r\n    this.nSims = this.locations.length;\r\n    this.len = 30;\r\n    this.buf = 15;\r\n    this.overlap = 0;\r\n\r\n    this.schedule = []; // To be filled in later\r\n    this.errors = 0;\r\n\r\n    this.instances = 1; // Can be changed in later versions, specifically for TYPE_MATCH_FILLER.\r\n    this.extraTimeFirst = false; // Should the first round be a little longer?\r\n    this.extraTimeEvery = 0; // Extra time every N round\r\n    this.appliesTo = []; // Which sessions a break applies to\r\n    this.usesSurrogates = false;\r\n  }\r\n\r\n  // These are immutable\r\n  get type() {\r\n    return this._type;\r\n  }\r\n\r\n  get id() {\r\n    return this._id;\r\n  }\r\n\r\n  get name() {\r\n    return this._name;\r\n  }\r\n\r\n  set name(value) {\r\n    this._name = value;\r\n  }\r\n\r\n  get nLocs() {\r\n    return this._locations.length;\r\n  }\r\n\r\n  set nLocs(value) {\r\n    while (this.nLocs < value)\r\n      this._locations.push(this.type.defaultLocs + \" \" + (this.nLocs + 1));\r\n    while (this.nLocs > value) this._locations.pop();\r\n    if (this.type === TYPES.JUDGING) this.nSims = this.nLocs;\r\n  }\r\n\r\n  get locations() {\r\n    return this._locations;\r\n  }\r\n\r\n  set locations(value) {\r\n    this._locations = value;\r\n  }\r\n\r\n  get schedule() {\r\n    return this._schedule;\r\n  }\r\n\r\n  set schedule(value) {\r\n    this._schedule = value;\r\n  }\r\n\r\n  get nSims() {\r\n    return this._nSims;\r\n  }\r\n\r\n  set nSims(value) {\r\n    this._nSims = value;\r\n  }\r\n\r\n  get startTime() {\r\n    return this._startTime;\r\n  }\r\n\r\n  // TODO clone value here so we don't have to everywhere else.\r\n  set startTime(value) {\r\n    this._startTime = value;\r\n    if (value) this._actualStartTime = value.clone();\r\n  }\r\n\r\n  get endTime() {\r\n    return this._endTime;\r\n  }\r\n\r\n  set endTime(value) {\r\n    this._endTime = value;\r\n  }\r\n\r\n  get actualEndTime() {\r\n    if (this.type === TYPES.BREAK) return this._endTime;\r\n    return this._actualEndTime;\r\n  }\r\n\r\n  set actualEndTime(value) {\r\n    this._actualEndTime = value;\r\n  }\r\n\r\n  get actualStartTime() {\r\n    if (this.type === TYPES.BREAK) return this._startTime;\r\n    return this._actualStartTime;\r\n  }\r\n\r\n  set actualStartTime(value) {\r\n    this._actualStartTime = value;\r\n  }\r\n\r\n  get len() {\r\n    return this._type === TYPES.BREAK ? 0 : this._len;\r\n  }\r\n\r\n  set len(value) {\r\n    this._len = value;\r\n  }\r\n\r\n  get overlap() {\r\n    return this._overlap;\r\n  }\r\n\r\n  set overlap(value) {\r\n    if (value >= 0) this._overlap = value;\r\n  }\r\n\r\n  get buf() {\r\n    return this._type === TYPES.BREAK\r\n      ? this.endTime.mins - this.startTime.mins\r\n      : this._buf;\r\n  }\r\n\r\n  set buf(value) {\r\n    this._buf = value;\r\n  }\r\n\r\n  get errors() {\r\n    return this._errors;\r\n  }\r\n\r\n  set errors(value) {\r\n    this._errors = value;\r\n  }\r\n\r\n  get instances() {\r\n    return this._instances;\r\n  }\r\n\r\n  set instances(value) {\r\n    this._instances = value;\r\n  }\r\n\r\n  get extraTimeFirst() {\r\n    return this._extraTimeFirst;\r\n  }\r\n\r\n  set extraTimeFirst(value) {\r\n    this._extraTimeFirst = value;\r\n  }\r\n\r\n  get extraTimeEvery() {\r\n    return this._extraTimeEvery;\r\n  }\r\n\r\n  set extraTimeEvery(value) {\r\n    this._extraTimeEvery = value;\r\n  }\r\n\r\n  get universal() {\r\n    return this._universal;\r\n  }\r\n\r\n  set universal(value) {\r\n    this._universal = value;\r\n  }\r\n\r\n  get appliesTo() {\r\n    return this._appliesTo;\r\n  }\r\n\r\n  set appliesTo(value) {\r\n    this._appliesTo = value;\r\n  }\r\n\r\n  get noPractice() {\r\n    return this._noprac;\r\n  }\r\n\r\n  set noPractice(value) {\r\n    this._noprac = value;\r\n  }\r\n\r\n  // Does this session apply to id?\r\n  applies(id) {\r\n    if (this.universal) return true;\r\n    else return this.appliesTo.includes(id);\r\n  }\r\n\r\n  get usesSurrogates() {\r\n    return this._usesSurrogates;\r\n  }\r\n\r\n  set usesSurrogates(value) {\r\n    this._usesSurrogates = value;\r\n  }\r\n\r\n  static freeze(o) {\r\n    return {\r\n      _class: \"SessionParams\",\r\n      _id: o._id,\r\n      _type: o._type,\r\n      _name: o._name,\r\n      _locations: o._locations,\r\n      _universal: o._universal,\r\n      _startTime: o._startTime,\r\n      _endTime: o._endTime,\r\n      _actualStartTime: o._actualStartTime,\r\n      _actualEndTime: o._actualEndTime,\r\n      _nSims: o._nSims,\r\n      _len: o._len,\r\n      _buf: o._buf,\r\n      _overlap: o._overlap,\r\n      _schedule: o._schedule,\r\n      _errors: o._errors,\r\n      _instances: o._instances,\r\n      _extraTimeFirst: o._extraTimeFirst,\r\n      _extraTimeEvery: o._extraTimeEvery,\r\n      _appliesTo: o._appliesTo,\r\n      _noprac: o._noprac,\r\n      _usesSurrogates: o._usesSurrogates,\r\n    };\r\n  }\r\n\r\n  static thaw(o) {\r\n    let S = new SessionParams(o._id, o._type, o._name);\r\n    S._locations = o._locations;\r\n    S._universal = o._universal;\r\n    S._startTime = o._startTime;\r\n    S._endTime = o._endTime;\r\n    if (S._endTime.mins === null && o._actualEndTime.mins === null)\r\n      S._endTime = S._startTime.clone(30);\r\n    else if (S._endTime.mins === null) {\r\n      S._endTime = o._actualEndTime.clone();\r\n    }\r\n    S._actualStartTime = o._actualStartTime;\r\n    S._actualEndTime = o._actualEndTime;\r\n    S._nSims = o._nSims;\r\n    S._len = o._len;\r\n    S._buf = o._buf;\r\n    S._overlap = o._overlap;\r\n    if (typeof o._overlap === \"undefined\") S._overlap = 0;\r\n    S._schedule = o._schedule;\r\n    S._errors = o._errors;\r\n    S._instances = o._instances;\r\n    S._extraTimeFirst = o._extraTimeFirst;\r\n    S._extraTimeEvery = o._extraTimeEvery;\r\n    S._appliesTo = o._appliesTo;\r\n    S._noprac = o._noprac;\r\n    S._usesSurrogates = o._usesSurrogates;\r\n    return S;\r\n  }\r\n}\r\n","/**\r\n num: Count of instance\r\n time: Time (mins) of instance\r\n teams: List of teams in instance\r\n loc: Location offset (i.e. for staggered sessions, location index of where the teams begin)\r\n extra: true/false if extra time is allocated\r\n */\r\nexport default class Instance {\r\n  constructor(session_id, num, time, teams, loc) {\r\n    this.session_id = session_id;\r\n    this.num = num;\r\n    this.time = time;\r\n    this.teams = teams;\r\n    this.loc = loc;\r\n    this.surrogates = 0;\r\n    this.standins = 0;\r\n    this.extra = false;\r\n  }\r\n\r\n  static freeze(o) {\r\n    return {\r\n      _class: 'Instance',\r\n      session_id: o.session_id,\r\n      num: o.num,\r\n      time: o.time,\r\n      teams: o.teams,\r\n      loc: o.loc,\r\n      surrogates: o.surrogates,\r\n      standins: o.standins,\r\n      extra: o.extra\r\n    };\r\n  }\r\n\r\n  static thaw(o) {\r\n    let I = new Instance(o.session_id, o.num, o.time, o.teams, o.loc);\r\n    I.surrogates = o.surrogates;\r\n    I.standins = o.standins;\r\n    I.extra = o.extra;\r\n    return I;\r\n  }\r\n}\r\n","//import {toDataUrl} from \"../scheduling/utilities\";\r\n// import header from \"../resources/FIRST_header.png\";\r\n// import flllogo from \"../resources/flllogo.jpg\";\r\n// import gamelogo from \"../resources/gamelogo.jpg\";\r\n// import mqlogo from \"../resources/mqlogo.png\";\r\n// import firstlogo from \"../resources/firstlogo.png\";\r\n\r\nimport PreComputedImages from \"../resources/images.json\";\r\n\r\nexport class PageFormat {\r\n    constructor() {\r\n        this._header = null;\r\n        this.logoTopLeft = null;\r\n        this.logoTopRight = null;\r\n        this.logoBotLeft = null;\r\n        this.logoBotRight = null;\r\n        this.titleFontSize = 22;\r\n        this.baseFontSize = 12;\r\n        this.footerText = 'www.firstaustralia.org';\r\n\r\n        if (PreComputedImages.header)\r\n            this._header = PreComputedImages.header;\r\n        // else\r\n        //    toDataUrl(header, (base) => {this.header= base;});\r\n        if (PreComputedImages.flllogo)\r\n            this._logoTopLeft = PreComputedImages.flllogo;\r\n        // else\r\n        //     toDataUrl(flllogo, (base) => {this.logoTopLeft = base;});\r\n        if (PreComputedImages.gamelogo)\r\n            this._logoTopRight = PreComputedImages.gamelogo;\r\n        // else\r\n        //     toDataUrl(gamelogo, (base) => {this.logoTopRight = base;});\r\n        if (PreComputedImages.mqlogo)\r\n            this._logoBotLeft = PreComputedImages.mqlogo;\r\n        // else\r\n        //    toDataUrl(mqlogo, (base) => {this.logoBotLeft = base;});\r\n        if (PreComputedImages.firstlogo)\r\n            this._logoBotRight = PreComputedImages.firstlogo;\r\n        // else\r\n        //     toDataUrl(firstlogo, (base) => {this.logoBotRight = base;});\r\n\r\n        this.customLogos = false;\r\n\r\n        console.log(this.customLogos);\r\n    }\r\n\r\n    get footerText() {\r\n        return this._footer;\r\n    }\r\n\r\n    set footerText(x) {\r\n        this._footer = x;\r\n    }\r\n\r\n    get baseFontSize() {\r\n        return this._baseFontSize;\r\n    }\r\n\r\n    set baseFontSize(x) {\r\n        this._baseFontSize = x;\r\n    }\r\n\r\n    get titleFontSize() {\r\n        return this._titleFontSize;\r\n    }\r\n\r\n    set titleFontSize(x) {\r\n        this._titleFontSize = x;\r\n    }\r\n\r\n    get logoTopLeft() {\r\n        return this._logoTopLeft\r\n    }\r\n\r\n    set logoTopLeft(x) {\r\n        this.customLogos = (this._logoTopLeft !== x || this.customLogos);\r\n        this._logoTopLeft = x;\r\n    }\r\n\r\n    get logoBotLeft() {\r\n        return this._logoBotLeft\r\n    }\r\n\r\n    set logoBotLeft(x) {\r\n        this.customLogos = (this._logoBotLeft !== x || this.customLogos);\r\n        this._logoBotLeft = x;\r\n    }\r\n\r\n    get logoTopRight() {\r\n        return this._logoTopRight\r\n    }\r\n\r\n    set logoTopRight(x) {\r\n        this.customLogos = (this._logoTopRight !== x || this.customLogos);\r\n        this._logoTopRight = x;\r\n    }\r\n\r\n    get logoBotRight() {\r\n        return this._logoBotRight\r\n    }\r\n\r\n    set logoBotRight(x) {\r\n        this.customLogos = (this._logoBotRight !== x || this.customLogos);\r\n        this._logoBotRight = x;\r\n    }\r\n\r\n    get header() {\r\n        return this._header\r\n    }\r\n\r\n    set header(x) {\r\n        this.customLogos = (this._header !== x || this.customLogos);\r\n        this._header = x;\r\n    }\r\n\r\n    static freeze(o) {\r\n        console.log(\"Custom logos\" + o.customLogos);\r\n        return o.customLogos ? {\r\n            _class: 'PageFormat',\r\n            _titleFontSize: o._titleFontSize,\r\n            _baseFontSize: o._baseFontSize,\r\n            _header: o._header,\r\n            _logoTopLeft: o._logoTopLeft,\r\n            _logoBotLeft: o._logoBotLeft,\r\n            _logoTopRight: o._logoTopRight,\r\n            _logoBotRight: o._logoBotRight,\r\n            _footer: o._footer\r\n        } : {\r\n            _class: 'PageFormat',\r\n            _titleFontSize: o._titleFontSize,\r\n            _baseFontSize: o._baseFontSize,\r\n            _footer: o._footer\r\n        };\r\n    }\r\n\r\n    static thaw(o) {\r\n        console.log(\"THAW\");\r\n        console.log(o);\r\n        console.log(o._header);\r\n        let E = new PageFormat();\r\n        E._baseFontSize = o._baseFontSize;\r\n        E._titleFontSize = o._titleFontSize;\r\n        if (o._header) E._header = o._header;\r\n        if (o._logoTopLeft) E._logoTopLeft = o._logoTopLeft;\r\n        if (o._logoBotLeft) E._logoBotLeft = o._logoBotLeft;\r\n        if (o._logoTopRight) E._logoTopRight = o._logoTopRight;\r\n        if (o._logoBotRight) E._logoBotRight = o._logoBotRight;\r\n        E._footer = o._footer;\r\n        return E;\r\n    }\r\n\r\n}\r\n","import { DateTime } from '../api/DateTime';\r\nimport { EventParams } from '../api/EventParams';\r\nimport SessionParams from '../api/SessionParams';\r\nimport { TeamParams } from '../api/TeamParams';\r\nimport Instance from '../scheduling/Instance';\r\nimport { SessionType } from '../api/SessionTypes';\r\nimport { PageFormat } from '../api/PageFormat';\r\n\r\n//https://stackoverflow.com/questions/6832596/how-to-compare-software-version-number-using-js-only-number, LeJared\r\nexport function cmpVersions(a, b) {\r\n  var i, diff;\r\n  var regExStrip0 = /(\\.0+)+$/;\r\n  var segmentsA = a.replace(regExStrip0, '').split('.');\r\n  var segmentsB = b.replace(regExStrip0, '').split('.');\r\n  var l = Math.min(segmentsA.length, segmentsB.length);\r\n\r\n  for (i = 0; i < l; i++) {\r\n    diff = parseInt(segmentsA[i], 10) - parseInt(segmentsB[i], 10);\r\n    if (diff) {\r\n      return diff;\r\n    }\r\n  }\r\n  return segmentsA.length - segmentsB.length;\r\n}\r\n\r\n/**\r\n * Shuffles array in place.\r\n * @param {Array} a items The array containing the items.\r\n */\r\nexport function shuffle(a) {\r\n  var j, x, i;\r\n  for (i = a.length; i; i--) {\r\n    j = Math.floor(Math.random() * i);\r\n    x = a[i - 1];\r\n    a[i - 1] = a[j];\r\n    a[j] = x;\r\n  }\r\n\r\n  return a;\r\n}\r\n\r\n/** Checks if two session overlap at all **/\r\nexport function overlaps(a, b) {\r\n  if (\r\n    a.actualStartTime.mins === b.actualStartTime.mins ||\r\n    a.actualEndTime.mins === b.actualEndTime.mins\r\n  )\r\n    return true;\r\n  if (\r\n    a.actualStartTime.mins < b.actualStartTime.mins &&\r\n    a.actualEndTime.mins > b.actualStartTime.mins\r\n  )\r\n    return true;\r\n  return (\r\n    b.actualStartTime.mins < a.actualStartTime.mins &&\r\n    b.actualEndTime.mins > a.actualStartTime.mins\r\n  );\r\n}\r\n\r\n/**\r\n Returns how many times a team has done a given session\r\n **/\r\nexport function hasDone(team, id) {\r\n  return team.schedule.filter(i => i.session_id === id).length;\r\n}\r\n\r\nexport function saveToFile_json(filename, content) {\r\n  let file = new Blob([content], { type: 'application/json' });\r\n  if (window.navigator.msSaveOrOpenBlob)\r\n    // IE10+\r\n    window.navigator.msSaveOrOpenBlob(file, filename);\r\n  else {\r\n    // Others\r\n    var a = document.createElement('a'),\r\n      url = URL.createObjectURL(file);\r\n    a.href = url;\r\n    a.download = filename;\r\n    document.body.appendChild(a);\r\n    a.click();\r\n    setTimeout(function() {\r\n      document.body.removeChild(a);\r\n      window.URL.revokeObjectURL(url);\r\n    }, 0);\r\n  }\r\n}\r\n\r\nexport function saveToFile_csv(filename, content) {\r\n  let file = new Blob([content], { type: 'application/csv' });\r\n  if (window.navigator.msSaveOrOpenBlob)\r\n    // IE10+\r\n    window.navigator.msSaveOrOpenBlob(file, filename);\r\n  else {\r\n    // Others\r\n    var a = document.createElement('a'),\r\n      url = URL.createObjectURL(file);\r\n    a.href = url;\r\n    a.download = filename;\r\n    document.body.appendChild(a);\r\n    a.click();\r\n    setTimeout(function() {\r\n      document.body.removeChild(a);\r\n      window.URL.revokeObjectURL(url);\r\n    }, 0);\r\n  }\r\n}\r\n\r\n// Replacer function for JSON.stringify\r\n// Saves any class instance as an object with its data and a class descriptor.\r\nexport function freeze(key, object) {\r\n  if (object instanceof DateTime) {\r\n    return DateTime.freeze(object);\r\n  } else if (object instanceof EventParams) {\r\n    return EventParams.freeze(object);\r\n  } else if (object instanceof SessionParams) {\r\n    return SessionParams.freeze(object);\r\n  } else if (object instanceof TeamParams) {\r\n    return TeamParams.freeze(object);\r\n  } else if (object instanceof Instance) {\r\n    return Instance.freeze(object);\r\n  } else if (object instanceof SessionType) {\r\n    return SessionType.freeze(object);\r\n  } else if (object instanceof PageFormat) {\r\n    return PageFormat.freeze(object);\r\n  } else return object;\r\n}\r\n\r\n// Reviver function for JSON.parse\r\n// Returns any object as an instance of its class descriptor and data\r\nexport function thaw(key, value) {\r\n  if (value instanceof Object && value._class) {\r\n    switch (value._class) {\r\n      case 'DateTime':\r\n        return DateTime.thaw(value);\r\n      case 'EventParams':\r\n        return EventParams.thaw(value);\r\n      case 'SessionParams':\r\n        return SessionParams.thaw(value);\r\n      case 'TeamParams':\r\n        return TeamParams.thaw(value);\r\n      case 'Instance':\r\n        return Instance.thaw(value);\r\n      case 'SessionType':\r\n        return SessionType.thaw(value);\r\n      case 'PageFormat':\r\n        return PageFormat.thaw(value);\r\n      default:\r\n        return value;\r\n    }\r\n  } else {\r\n    return value;\r\n  }\r\n}\r\n\r\nexport function getBase64Image(img) {\r\n  // console.log(\"Image source\");\r\n  // console.log(img.src);\r\n  if (img.src.substring(0, 4) === 'data') return img.src;\r\n  // Create an empty canvas element\r\n  let canvas = document.createElement('canvas');\r\n  canvas.width = img.naturalWidth;\r\n  canvas.height = img.naturalHeight;\r\n\r\n  // Copy the image contents to the canvas\r\n  let ctx = canvas.getContext('2d');\r\n  ctx.drawImage(img, 0, 0);\r\n\r\n  // Get the data-URL formatted image\r\n  // Firefox supports PNG and JPEG. You could check img.src to\r\n  // guess the original format, but be aware the using \"image/jpg\"\r\n  // will re-encode the image.\r\n\r\n  let dataURL = '';\r\n  if (img.src.search(new RegExp('.png', 'i')) !== -1) {\r\n    dataURL = canvas.toDataURL('image/png');\r\n  } else if (img.src.search(new RegExp('.jpe?g', 'i')) !== -1) {\r\n    dataURL = canvas.toDataURL('image/jpeg');\r\n  }\r\n  if (img.src.substring(0, 4) === 'data') dataURL = img.src;\r\n  console.log(dataURL);\r\n  return dataURL;\r\n}\r\n\r\nexport function toDataUrl(url, callback) {\r\n  var xhr = new XMLHttpRequest();\r\n  xhr.onload = function() {\r\n    var reader = new FileReader();\r\n    reader.onloadend = function() {\r\n      callback(reader.result);\r\n    };\r\n    reader.readAsDataURL(xhr.response);\r\n  };\r\n  xhr.open('GET', url);\r\n  xhr.responseType = 'blob';\r\n  xhr.send();\r\n}\r\n","import { TeamParams } from \"./TeamParams\";\r\nimport { TYPES } from \"./SessionTypes\";\r\nimport { DateTime } from \"./DateTime\";\r\nimport SessionParams from \"./SessionParams\";\r\n\r\n//import {toDataUrl} from \"../scheduling/utilities\";\r\n\r\nimport Instance from \"../scheduling/Instance\";\r\nimport { overlaps, shuffle } from \"../scheduling/utilities\";\r\n\r\nimport { PageFormat } from \"./PageFormat\";\r\n\r\n// National sponsors\r\n// import mqlogo from \"../resources/national-sponsors/mq.png\";\r\n// import fordlogo from \"../resources/national-sponsors/ford.png\";\r\n// import googlelogo from \"../resources/national-sponsors/google.jpg\";\r\n// import legoedlogo from \"../resources/national-sponsors/legoEd.png\";\r\nimport PreComputedImages from \"../resources/images.json\";\r\nimport Volunteers from \"../templates/volunteers.json\";\r\n\r\nexport class EventParams {\r\n  static AWARD_STYLES = [\r\n    \"Champion only\",\r\n    \"Required only\",\r\n    \"Required and optional (winner only)\",\r\n    \"Required and optional (1 finalist )\",\r\n    \"Required and optional (2 finalist )\",\r\n    \"Required and optional (3 finalist )\",\r\n  ];\r\n\r\n  static AWARD_NAMES = [\r\n    [\"Champion's Award\"],\r\n    [\r\n      \"Coach/Mentor Award\",\r\n      \"Robot Performance Award\",\r\n      \"Robot Design Award\",\r\n      \"Innovation Project Award\",\r\n      \"Core Values Award\",\r\n      \"Champion's Award\",\r\n    ],\r\n    [\r\n      \"Motivate Award\",\r\n      \"Rising All-Star Award\",\r\n      \"Engineering Excellence Award\",\r\n      \"Breakthrough Award\",\r\n      \"Coach/Mentor Award\",\r\n      \"Robot Performance Award\",\r\n      \"Robot Design Award\",\r\n      \"Innovation Project Award\",\r\n      \"Core Values Award\",\r\n      \"Champion's Award\",\r\n    ],\r\n    [\r\n      \"Motivate Award Finalist\",\r\n      \"Motivate Award Winner\",\r\n      \"Rising All-Star Award Finalist\",\r\n      \"Rising All-Star Award Winner\",\r\n      \"Engineering Excellence Award Finalist\",\r\n      \"Engineering Excellence Award Winner\",\r\n      \"Breakthrough Award Finalist\",\r\n      \"Breakthrough Award Winner\",\r\n      \"Coach/Mentor Award Finalist\",\r\n      \"Coach/Mentor Award Winner\",\r\n      \"Robot Performance Award Finalist\",\r\n      \"Robot Performance Award Winner\",\r\n      \"Robot Design Award Finalist\",\r\n      \"Robot Design Award Winner\",\r\n      \"Innovation Project Award Finalist\",\r\n      \"Innovation Project Award Winner\",\r\n      \"Core Values Award Finalist\",\r\n      \"Core Values Award Winner\",\r\n      \"Champion's Award Finalist\",\r\n      \"Champion's Award Winner\",\r\n    ],\r\n    [\r\n      \"Motivate Award Finalist\",\r\n      \"Motivate Award Finalist\",\r\n      \"Motivate Award Winner\",\r\n      \"Rising All-Star Award Finalist\",\r\n      \"Rising All-Star Award Finalist\",\r\n      \"Rising All-Star Award Winner\",\r\n      \"Engineering Excellence Award Finalist\",\r\n      \"Engineering Excellence Award Finalist\",\r\n      \"Engineering Excellence Award Winner\",\r\n      \"Breakthrough Award Finalist\",\r\n      \"Breakthrough Award Finalist\",\r\n      \"Breakthrough Award Winner\",\r\n      \"Coach/Mentor Award Finalist\",\r\n      \"Coach/Mentor Award Finalist\",\r\n      \"Coach/Mentor Award Winner\",\r\n      \"Robot Performance Award Finalist\",\r\n      \"Robot Performance Award Finalist\",\r\n      \"Robot Performance Award Winner\",\r\n      \"Robot Design Award Finalist\",\r\n      \"Robot Design Award Finalist\",\r\n      \"Robot Design Award Winner\",\r\n      \"Innovation Project Award Finalist\",\r\n      \"Innovation Project Award Finalist\",\r\n      \"Innovation Project Award Winner\",\r\n      \"Core Values Award Finalist\",\r\n      \"Core Values Award Finalist\",\r\n      \"Core Values Award Winner\",\r\n      \"Champion's Award Finalist\",\r\n      \"Champion's Award Finalist\",\r\n      \"Champion's Award Winner\",\r\n    ],\r\n    [\r\n      \"Motivate Award Finalist\",\r\n      \"Motivate Award Finalist\",\r\n      \"Motivate Award Finalist\",\r\n      \"Motivate Award Winner\",\r\n      \"Rising All-Star Award Finalist\",\r\n      \"Rising All-Star Award Finalist\",\r\n      \"Rising All-Star Award Finalist\",\r\n      \"Rising All-Star Award Winner\",\r\n      \"Engineering Excellence Award Finalist\",\r\n      \"Engineering Excellence Award Finalist\",\r\n      \"Engineering Excellence Award Finalist\",\r\n      \"Engineering Excellence Award Winner\",\r\n      \"Breakthrough Award Finalist\",\r\n      \"Breakthrough Award Finalist\",\r\n      \"Breakthrough Award Finalist\",\r\n      \"Breakthrough Award Winner\",\r\n      \"Coach/Mentor Award Finalist\",\r\n      \"Coach/Mentor Award Finalist\",\r\n      \"Coach/Mentor Award Finalist\",\r\n      \"Coach/Mentor Award Winner\",\r\n      \"Robot Performance Award Finalist\",\r\n      \"Robot Performance Award Finalist\",\r\n      \"Robot Performance Award Finalist\",\r\n      \"Robot Performance Award Winner\",\r\n      \"Robot Design Award Finalist\",\r\n      \"Robot Design Award Finalist\",\r\n      \"Robot Design Award Finalist\",\r\n      \"Robot Design Award Winner\",\r\n      \"Innovation Project Award Finalist\",\r\n      \"Innovation Project Award Finalist\",\r\n      \"Innovation Project Award Finalist\",\r\n      \"Innovation Project Award Winner\",\r\n      \"Core Values Award Finalist\",\r\n      \"Core Values Award Finalist\",\r\n      \"Core Values Award Finalist\",\r\n      \"Core Values Award Winner\",\r\n      \"Champion's Award Finalist\",\r\n      \"Champion's Award Finalist\",\r\n      \"Champion's Award Finalist\",\r\n      \"Champion's Award Winner\",\r\n    ],\r\n  ];\r\n\r\n  constructor(\r\n    version,\r\n    title = \"Tournament\",\r\n    nTeams = 24,\r\n    startTime = new DateTime(9 * 60),\r\n    endTime = new DateTime(9 * 17)\r\n  ) {\r\n    this._version = version;\r\n    this.title = title;\r\n    let id = Math.floor(Math.random() * 100 + 1);\r\n    let A = [];\r\n    while (nTeams > 0) {\r\n      A.push(new TeamParams(id, nTeams));\r\n      nTeams--;\r\n      id += Math.floor(Math.random() * 100 + 1);\r\n    }\r\n\r\n    this.uid_counter = 1;\r\n\r\n    this.teams = A.sort((a, b) => {\r\n      return parseInt(a.number, 10) - parseInt(b.number, 10);\r\n    });\r\n\r\n    this.startTime = startTime;\r\n    this.endTime = endTime;\r\n\r\n    this.minTravel = 10;\r\n    this.extraTime = 5;\r\n    this.sessions = [];\r\n    this.days = [\"Day 1\"];\r\n    this.startTime.days = this.days;\r\n    this.endTime.days = this.days;\r\n    this.pilot = false;\r\n    this.consolidatedAwards = false;\r\n    this.awardStyle = EventParams.AWARD_STYLES[2];\r\n    this.judgesAwards = 0;\r\n    this.awards = EventParams.AWARD_NAMES[2];\r\n    this.nTables = 4;\r\n    this.nPracs = 0;\r\n    this.sponsors = {\r\n      national: [],\r\n      local: [],\r\n    };\r\n    PreComputedImages.nationalSponsors.forEach((x) =>\r\n      this.addNationalSponsor(x)\r\n    );\r\n\r\n    this._volunteers = null;\r\n    this.tempNames = null;\r\n    this.pageFormat = null;\r\n\r\n    // console.log(this.logoBotRight);\r\n    this.errors = Infinity;\r\n    // this.populateFLL();\r\n  }\r\n\r\n  populateFLL() {\r\n    // Set team names\r\n    if (this.tempNames) {\r\n      let lines = this.tempNames.split(\"\\n\");\r\n      this.teams.forEach((t) => {\r\n        let savedName = t.name;\r\n        let savedNum = t.number;\r\n        let savedAffil = t.affiliation;\r\n        let savedPit = t.pitNum;\r\n        if (lines.length > 0) {\r\n          let l = lines.shift().replace(/,/g, \"\\t\");\r\n          let fields = l.split(\"\\t\");\r\n          if (fields.length > 3) {\r\n            t.number = fields[0];\r\n            t.name = fields[1];\r\n            t.affiliation = fields[2];\r\n            t.pitNum = fields[3];\r\n          } else if (fields.length > 2) {\r\n            t.number = fields[0];\r\n            t.name = fields[1];\r\n            t.affiliation = fields[2];\r\n          } else if (fields.length > 1) {\r\n            t.number = fields[0];\r\n            t.name = fields[1];\r\n          } else {\r\n            t.name = l;\r\n          }\r\n        }\r\n        if (t.name === \"\") t.name = savedName;\r\n        if (t.number === \"\") t.number = savedNum;\r\n        if (t.affiliation === \"\") t.affiliation = savedAffil;\r\n        if (t.pitNum === \"\") t.pitNum = savedPit;\r\n      });\r\n    }\r\n    // toDataUrl(mqlogo, (base) => {this.addNationalSponsor(base);});\r\n    // toDataUrl(googlelogo, (base) => {this.addNationalSponsor(base);});\r\n    // toDataUrl(fordlogo, (base) => {this.addNationalSponsor(base);});\r\n    // toDataUrl(legoedlogo, (base) => {this.addNationalSponsor(base);});\r\n    this.pageFormat = new PageFormat();\r\n    console.log(\"B\");\r\n\r\n    this.teams = this.teams.sort((a, b) => {\r\n      return parseInt(a.number, 10) - parseInt(b.number, 10);\r\n    });\r\n\r\n    const nAwardsNeeded = this.nTeams * 0.4;\r\n    const distances = EventParams.AWARD_NAMES.map((a) =>\r\n      Math.abs(a.length - nAwardsNeeded)\r\n    );\r\n    console.log(distances);\r\n    const closestIdx = distances.findIndex((d) => d === Math.min(...distances));\r\n    this.awardStyleIdx = closestIdx;\r\n    // this.consolidatedAwards = this.nTeams * 0.4 < 8;\r\n    // console.log(this.consolidatedAwards);\r\n    // console.log(this.nTeams * 0.4);\r\n    // let nCoreAwards = this.consolidatedAwards ? 4 : 10;\r\n    // this.judgesAwards = Math.min(\r\n    //   Math.max(Math.ceil(this.nTeams * 0.4) - nCoreAwards, 0),\r\n    //   6\r\n    // );\r\n\r\n    // First guesses at all schedule parameters.  User can then tweak to their hearts' content without auto updates\r\n    let actualStart = this.startTime.clone(30);\r\n    let actualEnd = this.endTime.clone(this.consolidatedAwards ? -30 : -60);\r\n    let nLocs = Math.ceil(this.nTeams / 4); // At a guess, see 4 teams each\r\n    let nJudgings = Math.ceil(this.nTeams / nLocs);\r\n\r\n    let startLunch = new DateTime(\r\n      Math.max(actualStart.mins + nJudgings * 15, 12 * 60),\r\n      this.days\r\n    );\r\n    let endLunch = startLunch.clone(30);\r\n\r\n    this.sessions.push(\r\n      new SessionParams(\r\n        this.uid_counter++,\r\n        TYPES.BREAK,\r\n        \"Opening Ceremony\",\r\n        1,\r\n        this.startTime.clone(),\r\n        actualStart.clone(),\r\n        true\r\n      )\r\n    );\r\n    this.getSession(this.uid_counter - 1).universal = true;\r\n    this.sessions.push(\r\n      new SessionParams(\r\n        this.uid_counter++,\r\n        TYPES.BREAK,\r\n        \"Lunch\" + (this.nDays > 1 ? \" 1\" : \"\"),\r\n        1,\r\n        startLunch.clone(),\r\n        endLunch.clone()\r\n      )\r\n    );\r\n    this.getSession(this.uid_counter - 1).universal = true;\r\n    this.sessions.push(\r\n      new SessionParams(\r\n        this.uid_counter++,\r\n        TYPES.BREAK,\r\n        \"Closing Ceremony\",\r\n        1,\r\n        actualEnd.clone(),\r\n        this.endTime.clone(),\r\n        true\r\n      )\r\n    );\r\n    this.getSession(this.uid_counter - 1).universal = true;\r\n\r\n    let nightStart = new DateTime(this.endTime.mins % (24 * 60), this.days);\r\n    let nightEnd = this.startTime.clone();\r\n\r\n    for (let i = 1; i < this.days.length; i++) {\r\n      nightEnd = nightEnd.clone(24 * 60);\r\n      this.sessions.push(\r\n        new SessionParams(\r\n          this.uid_counter++,\r\n          TYPES.BREAK,\r\n          \"Night\" + (this.nDays > 2 ? \" \" + i : \"\"),\r\n          1,\r\n          nightStart.clone(),\r\n          nightEnd.clone(),\r\n          true\r\n        )\r\n      );\r\n      this.getSession(this.uid_counter - 1).universal = true;\r\n      nightStart = nightStart.clone(24 * 60);\r\n\r\n      this.sessions.push(\r\n        new SessionParams(\r\n          this.uid_counter++,\r\n          TYPES.BREAK,\r\n          \"Lunch \" + (i + 1),\r\n          1,\r\n          startLunch.clone(24 * 60),\r\n          endLunch.clone(24 * 60)\r\n        )\r\n      );\r\n      this.getSession(this.uid_counter - 1).universal = true;\r\n    }\r\n\r\n    let timeAvailable = this.endTime.mins - this.startTime.mins;\r\n    this.sessions\r\n      .filter((s) => s.type === TYPES.BREAK)\r\n      .forEach((s) => {\r\n        timeAvailable = timeAvailable - (s.endTime.mins - s.startTime.mins);\r\n      });\r\n\r\n    if (this.pilot) {\r\n      // let rdLen = matchLen + matchBuf;\r\n      // let rdBuf = 0;\r\n      let rdLen = 10;\r\n      let rdBuf = 5;\r\n      let rdOverlap =\r\n        this.nTables === 2 ? 0 : 15 - Math.ceil(30 / this.nTables);\r\n\r\n      timeAvailable =\r\n        timeAvailable - (this.nTeams / 2) * (rdLen + rdBuf - rdOverlap);\r\n      let timePerMatch = Math.floor(\r\n        timeAvailable / ((this.nTeams * (2 + this.nPracs)) / 2)\r\n      );\r\n\r\n      let matchLen = Math.min(timePerMatch, 4);\r\n      let matchBuf = Math.max(timePerMatch - matchLen - 1, 0);\r\n      let matchOverlap = 0; //If matches need an overlap, set it here.\r\n\r\n      let nSims = 2;\r\n      for (let i = 1; i <= this.nPracs; i++) {\r\n        let S = new SessionParams(\r\n          this.uid_counter++,\r\n          TYPES.MATCH_ROUND_PRACTICE,\r\n          \"Practice Round \" + i,\r\n          this.nTables,\r\n          actualStart.clone(),\r\n          actualEnd.clone()\r\n        );\r\n        S.nSims = nSims;\r\n        S.len = matchLen;\r\n        S.buf = matchBuf;\r\n        S.overlap = 0;\r\n        this.sessions.push(S);\r\n      }\r\n      for (let i = 1; i <= 3; i++) {\r\n        let S = new SessionParams(\r\n          this.uid_counter++,\r\n          TYPES.MATCH_ROUND,\r\n          \"Round \" + i,\r\n          this.nTables,\r\n          actualStart.clone(),\r\n          actualEnd.clone()\r\n        );\r\n        S.nSims = nSims;\r\n        S.len = i === 1 ? rdLen : matchLen;\r\n        S.buf = i === 1 ? rdBuf : matchBuf;\r\n        S.overlap = i === 1 ? rdOverlap : matchOverlap;\r\n        this.sessions.push(S);\r\n      }\r\n      let roundOneLength = (rdLen + rdBuf - rdOverlap) * (this.nTeams / 2);\r\n      let roundOneEnd = actualStart.mins + roundOneLength;\r\n      console.log(this.sessions[1]);\r\n      console.log(roundOneEnd);\r\n      let dif = Math.ceil(roundOneEnd - this.sessions[1].startTime.mins);\r\n      console.log(dif);\r\n      if (dif > 0) {\r\n        this.sessions[1].startTime = this.sessions[1].startTime.clone(dif);\r\n        this.sessions[1].endTime = this.sessions[1].endTime.clone(dif);\r\n      }\r\n    } else {\r\n      let timePerMatch = Math.floor(\r\n        timeAvailable / ((this.nTeams * (3 + this.nPracs)) / 2)\r\n      );\r\n\r\n      let matchLen = Math.min(timePerMatch, 4);\r\n      let matchBuf = Math.max(timePerMatch - matchLen - 1, 0);\r\n      let matchOverlap = 0; //If matches need an overlap, set it here.\r\n\r\n      let bufDiff = 3 + this.nPracs - 1; // Make the first round slower than the rest\r\n\r\n      let nSims = 2;\r\n      let first = true;\r\n      for (let i = 1; i <= this.nPracs; i++) {\r\n        let S = new SessionParams(\r\n          this.uid_counter++,\r\n          TYPES.MATCH_ROUND_PRACTICE,\r\n          \"Practice Round \" + i,\r\n          this.nTables,\r\n          actualStart.clone(),\r\n          actualEnd.clone()\r\n        );\r\n        S.nSims = nSims;\r\n        S.len = matchLen;\r\n        S.buf = first ? matchBuf + bufDiff : matchBuf - 1;\r\n        S.overlap = matchOverlap;\r\n        this.sessions.push(S);\r\n        first = false;\r\n      }\r\n      for (let i = 1; i <= 3; i++) {\r\n        let S = new SessionParams(\r\n          this.uid_counter++,\r\n          TYPES.MATCH_ROUND,\r\n          \"Round \" + i,\r\n          this.nTables,\r\n          actualStart.clone(),\r\n          actualEnd.clone()\r\n        );\r\n        S.nSims = nSims;\r\n        S.len = matchLen;\r\n        S.buf = first ? matchBuf + bufDiff : matchBuf - 1;\r\n        S.overlap = matchOverlap;\r\n        this.sessions.push(S);\r\n        first = false;\r\n      }\r\n      // this.sessions.push(new SessionParams(this.uid_counter++, TYPES.JUDGING, \"Robot Design Judging\", nLocs,\r\n      //     actualStart.clone(), actualEnd.clone()));\r\n      // this.sessions.push(new SessionParams(this.uid_counter++, TYPES.JUDGING, \"Core Values Judging\", nLocs,\r\n      //     actualStart.clone(), actualEnd.clone()));\r\n    }\r\n    this.sessions.push(\r\n      new SessionParams(\r\n        this.uid_counter++,\r\n        TYPES.JUDGING,\r\n        \"Judging\",\r\n        nLocs,\r\n        actualStart.clone(),\r\n        actualEnd.clone()\r\n      )\r\n    );\r\n\r\n    this.sessions.sort((a, b) => {\r\n      return a.startTime === b.startTime\r\n        ? a.id - b.id\r\n        : a.startTime.mins - b.startTime.mins;\r\n    });\r\n\r\n    this.volunteers = [];\r\n    this.buildVolunteerSheet();\r\n  }\r\n\r\n  buildVolunteerSheet(nJudges) {\r\n    if (!nJudges) {\r\n      nJudges = this.sessions.find((s) => {\r\n        return s.type === TYPES.JUDGING;\r\n      }).nLocs;\r\n    }\r\n    // NOTE: Have to make sure that if volunters have already been designed, we just update the numbers.\r\n    if (this.volunteers.length > 0) {\r\n      // Just recalculate the number of volunteers\r\n      this.volunteers.forEach((v) => {\r\n        let numberOfVols = v.count;\r\n        if (v.per === \"1\") numberOfVols *= 1;\r\n        else if (v.per === \"RDJ\")\r\n          // Volunteers per robot design judging session\r\n          numberOfVols *= nJudges;\r\n        else if (v.per === \"CVJ\")\r\n          // Volunteers per core values judging session\r\n          numberOfVols *= nJudges;\r\n        else if (v.per === \"RPJ\")\r\n          // Volunteers per project judging session\r\n          numberOfVols *= nJudges;\r\n        else if (v.per === \"J\")\r\n          // Volunteers per project judging session\r\n          numberOfVols *= nJudges;\r\n        else if (v.per === \"T\")\r\n          // Volunteers per robot table\r\n          numberOfVols *= this.nTables;\r\n        nJudges = this.sessions.find((s) => {\r\n          return s.type === TYPES.JUDGING;\r\n        }).nLocs;\r\n        while (v.staff.length < numberOfVols) v.staff.push(\"\");\r\n        while (v.staff.length > numberOfVols) {\r\n          let S = v.staff.pop();\r\n          if (S !== \"\") {\r\n            v.staff.push(S);\r\n            break;\r\n          }\r\n        }\r\n      });\r\n    } else {\r\n      Volunteers.roles.forEach((v) => {\r\n        let vol = { name: v.name, count: v.count, per: v.per };\r\n        vol.staff = [];\r\n        let numberOfVols = v.count;\r\n        if (v.per === \"1\") numberOfVols *= 1;\r\n        else if (v.per === \"RDJ\")\r\n          // Volunteers per robot design judging session\r\n          numberOfVols *= nJudges;\r\n        else if (v.per === \"CVJ\")\r\n          // Volunteers per core values judging session\r\n          numberOfVols *= nJudges;\r\n        else if (v.per === \"RPJ\")\r\n          // Volunteers per project judging session\r\n          numberOfVols *= nJudges;\r\n        else if (v.per === \"T\")\r\n          // Volunteers per robot table\r\n          numberOfVols *= this.nTables;\r\n        for (let i = 0; i < numberOfVols; i++) vol.staff.push(\"\");\r\n        this.volunteers.push(vol);\r\n      });\r\n    }\r\n  }\r\n\r\n  get nJudges() {\r\n    return this.sessions.find((s) => {\r\n      return s.type === TYPES.JUDGING;\r\n    }).nLocs;\r\n  }\r\n\r\n  get nTeams() {\r\n    return this._teams.length;\r\n  }\r\n\r\n  //Given a new number of teams, update things...\r\n  set nTeams(value) {\r\n    while (this.teams.length < value) {\r\n      let maxId = 0;\r\n      this.teams.forEach((t) => {\r\n        maxId = maxId > t.id ? maxId : t.id;\r\n      });\r\n      maxId += Math.floor(Math.random() * 100 + 1);\r\n      this.teams.push(new TeamParams(maxId, this.teams.length + 1));\r\n    }\r\n    while (this.teams.length > value) this.teams.pop();\r\n    this.teams = this.teams.sort((a, b) => {\r\n      return parseInt(a.number, 10) - parseInt(b.number, 10);\r\n    });\r\n  }\r\n\r\n  getTeam(id) {\r\n    for (let i = 0; i < this.teams.length; i++) {\r\n      if (this.teams[i].id === id) return this.teams[i];\r\n    }\r\n    return null;\r\n  }\r\n\r\n  getSession(id) {\r\n    for (let i = 0; i < this.sessions.length; i++) {\r\n      if (this.sessions[i].id === id) return this.sessions[i];\r\n    }\r\n    return null;\r\n  }\r\n\r\n  getSessions(type) {\r\n    let A = [];\r\n    for (let i = 0; i < this.sessions.length; i++) {\r\n      if (this.sessions[i].type === type) A.push(this.sessions[i]);\r\n    }\r\n    return A;\r\n  }\r\n\r\n  getSessionDataGrid(id, pdf = false) {\r\n    let session = this.getSession(id);\r\n    let grid = [];\r\n    let cols = [{ value: \"#\" }, { value: \"Time\" }];\r\n    session.locations.forEach((x) => cols.push({ value: x }));\r\n    grid.push(cols);\r\n\r\n    let applyingBreaks = [];\r\n    this.sessions\r\n      .filter((S) => S.type === TYPES.BREAK && S.applies(session.id))\r\n      .forEach((S) => {\r\n        if (overlaps(S, session)) applyingBreaks.push(S);\r\n      });\r\n    let schedule = session.schedule.slice();\r\n    applyingBreaks.forEach((br) =>\r\n      schedule.push(new Instance(br.id, \"\", br.actualStartTime, null))\r\n    );\r\n\r\n    schedule\r\n      .sort((a, b) => a.time.mins - b.time.mins)\r\n      .forEach((instance) => {\r\n        let A = [];\r\n        A.push({ value: instance.num });\r\n        A.push({ value: instance.time.time });\r\n        if (this.getSession(instance.session_id).type === TYPES.BREAK) {\r\n          A.push({\r\n            value: this.getSession(instance.session_id).name,\r\n            colSpan: session.nLocs,\r\n          });\r\n          grid.push(A);\r\n        } else {\r\n          let diff = session.nLocs;\r\n          for (let dummy = 0; dummy < instance.loc; dummy++) {\r\n            diff--;\r\n            A.push({ value: \"\" });\r\n          }\r\n          for (let i = 0; i < instance.teams.length; i++) {\r\n            let x = instance.teams[i];\r\n            diff--;\r\n            if (pdf)\r\n              A.push({\r\n                value: x\r\n                  ? this.getTeam(x).number + \"\\n\" + this.getTeam(x).name\r\n                  : \" X \",\r\n              });\r\n            else\r\n              A.push({\r\n                value: x ? this.getTeam(x).number : \" X \",\r\n                id: x ? x : null,\r\n              });\r\n          }\r\n          while (diff-- > 0) A.push({ value: \"\" });\r\n          grid.push(A);\r\n        }\r\n      });\r\n    return grid;\r\n  }\r\n\r\n  getPilotDataGrid() {\r\n    let T = [];\r\n    this.teams.forEach((t) => T.push(t));\r\n    shuffle(T);\r\n    let grid = [];\r\n    let w = this.nJudges;\r\n    while (T.length > 0) {\r\n      let row = [];\r\n      for (let i = 0; i < w; i++) {\r\n        let x = T.pop();\r\n        row.push({ value: x ? x.number + \"\\n\" + x.name : \" X \" });\r\n      }\r\n      grid.push(row);\r\n    }\r\n    return grid;\r\n  }\r\n\r\n  getIndivDataGrid(compact = false) {\r\n    // Always sort before doing things if you need a particular order.\r\n    this.teams.sort((a, b) => a.number - b.number);\r\n    this.sessions.sort((a, b) => {\r\n      return a.id - b.id;\r\n    });\r\n    this.teams.forEach((team) => {\r\n      team.schedule.sort((a, b) => {\r\n        return (\r\n          this.getSession(a.session_id).id - this.getSession(b.session_id).id\r\n        );\r\n      });\r\n    });\r\n\r\n    let grid = [];\r\n    let usesSurrogates = false;\r\n    this.sessions.forEach((s) => {\r\n      if (s.usesSurrogates) usesSurrogates = true;\r\n    });\r\n    grid[0] = [{ value: \"Team\", colSpan: 2 }];\r\n    for (let i = 0; i < this.sessions.length; i++) {\r\n      if (this.sessions[i].type === TYPES.BREAK) continue;\r\n      grid[0].push({ colSpan: compact ? 2 : 3, value: this.sessions[i].name });\r\n    }\r\n    grid[0].push({ value: \"Min. Travel time\" });\r\n    if (usesSurrogates)\r\n      grid[0].push({ colSpan: compact ? 2 : 3, value: \"Surrogate\" });\r\n    grid[1] = [{ value: \"#\" }, { value: \"Name\" }];\r\n    for (let i = 0; i < this.sessions.length; i++) {\r\n      if (this.sessions[i].type === TYPES.BREAK) continue;\r\n      for (let j = 0; j < this.sessions[i].instances; j++) {\r\n        if (!compact) grid[1].push({ value: \"#\" });\r\n        grid[1].push({ value: \"Time\" });\r\n        grid[1].push({ value: \"Loc\" });\r\n      }\r\n    }\r\n    grid[1].push({ value: \"\" });\r\n    if (usesSurrogates) {\r\n      if (!compact) grid[1].push({ value: \"#\" });\r\n      grid[1].push({ value: \"Time\" });\r\n      grid[1].push({ value: \"Loc\" });\r\n    }\r\n\r\n    for (let i = 0; i < this.teams.length; i++) {\r\n      let row = [];\r\n      let team = this.teams[i];\r\n      row.push({ value: team.number });\r\n      row.push({ value: team.name });\r\n      for (let j = 0; j < team.schedule.length; j++) {\r\n        if (this.getSession(team.schedule[j].session_id).type === TYPES.BREAK)\r\n          continue;\r\n        if (\r\n          team.schedule[j].teams &&\r\n          team.schedule[j].teams.length -\r\n            team.schedule[j].teams.indexOf(team.id) <=\r\n            team.schedule[j].surrogates\r\n        )\r\n          continue; // Surrogate\r\n        if (!team.schedule[j].teams) {\r\n          row.push({ value: \"\" });\r\n          row.push({ value: \"\" });\r\n          row.push({ value: \"\" });\r\n        } else {\r\n          if (!compact) row.push({ value: team.schedule[j].num });\r\n          row.push({ value: team.schedule[j].time.time });\r\n          if (team.schedule[j].loc === -1) row.push({ value: \"--\" });\r\n          else\r\n            row.push({\r\n              value: this.getSession(team.schedule[j].session_id).locations[\r\n                team.schedule[j].teams.indexOf(team.id) + team.schedule[j].loc\r\n              ],\r\n            });\r\n        }\r\n      }\r\n      // row.push({value: \"?\"});\r\n      row.push({ value: \"\" + this.minTravelTime(team) });\r\n      let hadASurrogate = false;\r\n      for (let j = 0; j < team.schedule.length; j++) {\r\n        if (!team.schedule[j].teams) continue;\r\n        if (\r\n          !(\r\n            team.schedule[j].teams.length -\r\n              team.schedule[j].teams.indexOf(team.uid) >\r\n            team.schedule[j].surrogates\r\n          )\r\n        ) {\r\n          hadASurrogate = true;\r\n          if (!compact) row.push({ value: team.schedule[j].num });\r\n          row.push({ value: team.schedule[j].time.time });\r\n          if (team.schedule[j].loc === -1) row.push({ value: \"--\" });\r\n          else\r\n            row.push({\r\n              value: this.getSession(team.schedule[j].session_id).locations[\r\n                team.schedule[j].teams.indexOf(team.id) + team.schedule[j].loc\r\n              ],\r\n            });\r\n        }\r\n      }\r\n      if (!hadASurrogate && usesSurrogates) {\r\n        if (!compact) row.push({ value: \"\" });\r\n        row.push({ value: \"\" });\r\n        row.push({ value: \"\" });\r\n      }\r\n      grid.push(row);\r\n    }\r\n    return grid;\r\n  }\r\n\r\n  /**\r\n     Increments given time, skipping breaks.\r\n     @return Returns the incremented time.\r\n     */\r\n  timeInc(time, inc, sessionID) {\r\n    let filt = sessionID\r\n      ? (x) => x.type === TYPES.BREAK && x.applies(sessionID)\r\n      : (x) => x.type === TYPES.BREAK;\r\n    let newMins = time.mins + inc;\r\n    this.sessions.filter(filt).forEach((x) => {\r\n      if (\r\n        time.mins + inc >= x.actualStartTime.mins &&\r\n        time.mins < x.actualEndTime.mins\r\n      )\r\n        newMins = x.actualEndTime.mins;\r\n    });\r\n    return newMins;\r\n  }\r\n\r\n  /**\r\n     Increments given time, ceremonies and nights.\r\n     @return Returns the incremented time.\r\n     */\r\n  timeIncPrac(time, inc) {\r\n    let filt = (x) => x.type === TYPES.BREAK && x.noPractice;\r\n    let newMins = time.mins + inc;\r\n    this.sessions.filter(filt).forEach((x) => {\r\n      if (\r\n        time.mins + inc >= x.actualStartTime.mins &&\r\n        time.mins < x.actualEndTime.mins\r\n      )\r\n        newMins = x.actualEndTime.mins;\r\n    });\r\n    return newMins;\r\n  }\r\n\r\n  /** Assuming the given session has the most up-to-date location names, synchronise other session to this **/\r\n  syncLocs(S) {\r\n    console.log(\"Sync\");\r\n    if (S.type !== TYPES.MATCH_ROUND && S.type !== TYPES.MATCH_ROUND_PRACTICE)\r\n      return;\r\n    this.sessions\r\n      .filter(\r\n        (x) =>\r\n          x.type === TYPES.MATCH_ROUND || x.type === TYPES.MATCH_ROUND_PRACTICE\r\n      )\r\n      .forEach((x) => {\r\n        x.locations = S.locations;\r\n        console.log(x);\r\n      });\r\n  }\r\n\r\n  get version() {\r\n    return this._version;\r\n  }\r\n\r\n  get title() {\r\n    return this._title;\r\n  }\r\n\r\n  set title(value) {\r\n    this._title = value;\r\n  }\r\n\r\n  get startTime() {\r\n    return this._startTime;\r\n  }\r\n\r\n  set startTime(value) {\r\n    this._startTime = value;\r\n  }\r\n\r\n  get endTime() {\r\n    return this._endTime;\r\n  }\r\n\r\n  set endTime(value) {\r\n    this._endTime = value;\r\n  }\r\n\r\n  get sessions() {\r\n    return this._sessions;\r\n  }\r\n\r\n  set sessions(value) {\r\n    this._sessions = value;\r\n  }\r\n\r\n  get teams() {\r\n    return this._teams;\r\n  }\r\n\r\n  set teams(value) {\r\n    this._teams = value;\r\n  }\r\n\r\n  get awards() {\r\n    return this._awards;\r\n  }\r\n\r\n  set awards(value) {\r\n    this._awards = value;\r\n  }\r\n\r\n  get judgesAwards() {\r\n    return this._judgesAwards;\r\n  }\r\n\r\n  set judgesAwards(value) {\r\n    this._judgesAwards = value;\r\n  }\r\n\r\n  get consolidatedAwards() {\r\n    return this._consolidatedAwards;\r\n  }\r\n\r\n  set consolidatedAwards(value) {\r\n    this._consolidatedAwards = value;\r\n  }\r\n\r\n  get awardStyle() {\r\n    return this._awardStyle;\r\n  }\r\n\r\n  set awardStyle(value) {\r\n    this._awardStyle = value;\r\n  }\r\n\r\n  get awardStyleIdx() {\r\n    return EventParams.AWARD_STYLES.findIndex((x) => {\r\n      return x === this._awardStyle;\r\n    });\r\n  }\r\n\r\n  set awardStyleIdx(value) {\r\n    console.log(value);\r\n    this._awardStyle = EventParams.AWARD_STYLES[value];\r\n    this._awards = EventParams.AWARD_NAMES[value];\r\n    console.log(this._awards);\r\n  }\r\n\r\n  get awardPerc() {\r\n    let idx = this.awardStyleIdx;\r\n    console.log(\"Award style index: \" + this.awardStyleIdx);\r\n    console.log(\"Award style: \" + this._awardStyle);\r\n\r\n    let nTrophies = this.awards.length;\r\n    //   EventParams.AWARD_NAMES[this.awardStyleIdx].length + this.judgesAwards;\r\n    return Math.round((100 * nTrophies) / this.nTeams);\r\n  }\r\n\r\n  get minTravel() {\r\n    return this._minTravel;\r\n  }\r\n\r\n  set minTravel(value) {\r\n    this._minTravel = value;\r\n  }\r\n\r\n  get extraTime() {\r\n    return this._extraTime;\r\n  }\r\n\r\n  set extraTime(value) {\r\n    this._extraTime = value;\r\n  }\r\n\r\n  get nTables() {\r\n    return this._nTables;\r\n  }\r\n\r\n  set nTables(value) {\r\n    this._nTables = value;\r\n  }\r\n\r\n  get display() {\r\n    return this._display;\r\n  }\r\n\r\n  set display(d) {\r\n    this._display = d;\r\n  }\r\n\r\n  get pilot() {\r\n    return this._pilot;\r\n  }\r\n\r\n  set pilot(p) {\r\n    this._pilot = p;\r\n  }\r\n\r\n  get volunteers() {\r\n    return this._volunteers;\r\n  }\r\n\r\n  set volunteers(p) {\r\n    this._volunteers = p;\r\n  }\r\n\r\n  get nDays() {\r\n    return this._days.length;\r\n  }\r\n\r\n  set nDays(value) {\r\n    let A = this.days;\r\n    while (A.length < value) A.push(\"Day \" + (this.days.length + 1));\r\n    while (A.length > value) A.pop();\r\n    this.days = A;\r\n  }\r\n\r\n  get days() {\r\n    return this._days;\r\n  }\r\n\r\n  // When changing the days, we have to make sure every DateTime gets the updated reference.\r\n  set days(value) {\r\n    this._days = value;\r\n    this.startTime.days = this._days;\r\n    this.endTime.days = this._days;\r\n    this.sessions.forEach((S) => {\r\n      S.startTime.days = this._days;\r\n      S.actualStartTime.days = this._days;\r\n      S.endTime.days = this._days;\r\n      S.actualEndTime.days = this._days;\r\n    });\r\n    this.teams.forEach((T) => {\r\n      T.startTime.days = this._days;\r\n      T.endTime.days = this._days;\r\n    });\r\n  }\r\n\r\n  addLocalSponsor(value) {\r\n    this.sponsors.local.push(value);\r\n  }\r\n\r\n  addNationalSponsor(value) {\r\n    this.sponsors.national.push(value);\r\n  }\r\n\r\n  deleteLocalSponsor(idx) {\r\n    this.sponsors.local.splice(idx, 1);\r\n  }\r\n\r\n  static freeze(o) {\r\n    return {\r\n      _class: \"EventParams\",\r\n      _version: o._version,\r\n      _title: o._title,\r\n      _teams: o._teams,\r\n      uid_counter: o.uid_counter,\r\n      _startTime: o._startTime,\r\n      _endTime: o._endTime,\r\n      _sessions: o._sessions,\r\n      _days: o._days,\r\n      _pilot: o._pilot,\r\n      _nTables: o._nTables,\r\n      errors: o.errors,\r\n      _extraTime: o._extraTime,\r\n      _minTravel: o._minTravel,\r\n      _judgesAwards: o._judgesAwards,\r\n      _awards: o._awards,\r\n      _consolidatedAwards: o._consolidatedAwards,\r\n      _awardStyle: o._awardStyle,\r\n      _volunteers: o._volunteers,\r\n      pageFormat: o.pageFormat,\r\n      sponsors: o.sponsors.local,\r\n    };\r\n  }\r\n\r\n  static thaw(o) {\r\n    let E = new EventParams(o._version, o._title);\r\n    console.log(\"Saved object:\");\r\n    console.log(o);\r\n    E._teams = o._teams;\r\n    E.uid_counter = o.uid_counter;\r\n    E._startTime = o._startTime;\r\n    E._endTime = o._endTime;\r\n    E._minTravel = o._minTravel;\r\n    E._extraTime = o._extraTime;\r\n    E._sessions = o._sessions;\r\n    E._days = o._days;\r\n    E._pilot = o._pilot;\r\n    E._nTables = o._nTables || 4;\r\n    E.errors = o.errors;\r\n    E._judgesAwards = o._judgesAwards;\r\n    E._awards = o._awards;\r\n    E._consolidatedAwards = o._consolidatedAwards;\r\n    E._awardStyle = o._awardStyle || EventParams.AWARD_STYLES[2];\r\n    E._volunteers = o._volunteers;\r\n    E.sponsors.local = o.sponsors;\r\n    E.pageFormat = o.pageFormat;\r\n    if (!E.errors) E.errors = Infinity;\r\n    console.log(E);\r\n    return E;\r\n  }\r\n\r\n  /** ========================== UTILITIES ========================== **/\r\n\r\n  /**\r\n     Return true if the team can do the given instance.\r\n     Returns false if they don't have time to come from a previous instance or go to a later one.\r\n     if 'excl' is given, do not consider that session ID when checking this.\r\n     **/\r\n  canDo(team, instance, excl) {\r\n    if (\r\n      team.extraTime &&\r\n      !instance.extra &&\r\n      this.getSession(instance.session_id).type !== TYPES.BREAK\r\n    )\r\n      return false;\r\n    if (\r\n      team.excludeJudging &&\r\n      this.getSession(instance.session_id).type === TYPES.JUDGING\r\n    )\r\n      return false;\r\n    for (let i = 0; i < team.schedule.length; i++) {\r\n      if (this.getSession(team.schedule[i].session_id).type === TYPES.BREAK) {\r\n        if (\r\n          !this.getSession(team.schedule[i].session_id).applies(\r\n            instance.session_id\r\n          )\r\n        )\r\n          continue;\r\n        if (this.getSession(instance.session_id).type === TYPES.BREAK) continue;\r\n      }\r\n      let startA = team.schedule[i].time.mins;\r\n      if (excl && team.schedule[i].session_id === excl) continue;\r\n      let extra = 0;\r\n      if (team.schedule[i].extra) extra = this.extraTime;\r\n      let endA = 0;\r\n      if (this.getSession(team.schedule[i].session_id).type === TYPES.BREAK)\r\n        endA = startA + this.getSession(team.schedule[i].session_id).len;\r\n      else\r\n        endA =\r\n          startA +\r\n          this.getSession(team.schedule[i].session_id).len +\r\n          extra +\r\n          this.minTravel;\r\n      let startB = instance.time.mins;\r\n      extra = 0;\r\n      if (instance.extra) extra = this.extraTime;\r\n\r\n      let endB = 0;\r\n      if (this.getSession(team.schedule[i].session_id).type === TYPES.BREAK)\r\n        endB = startB + this.getSession(instance.session_id).len;\r\n      else\r\n        endB =\r\n          startB +\r\n          this.getSession(instance.session_id).len +\r\n          this.minTravel +\r\n          extra;\r\n      if (\r\n        (team.startTime.mins && startB < team.startTime.mins) ||\r\n        (team.endTime.mins && endB > team.endTime.mins)\r\n      )\r\n        return false;\r\n      if (\r\n        startA === startB ||\r\n        (startA < startB && endA > startB) ||\r\n        (startB < startA && endB > startA)\r\n      )\r\n        return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  swapTeams(sId, teamA, teamB) {\r\n    let a = this.getTeam(teamA);\r\n    let b = this.getTeam(teamB);\r\n    let iA = null;\r\n    let iB = null;\r\n    let canA = false;\r\n    let canB = false;\r\n    console.log(a);\r\n    a.schedule.forEach((i) => {\r\n      if (i.session_id === sId) iA = i;\r\n    });\r\n    console.log(b);\r\n    b.schedule.forEach((i) => {\r\n      if (i.session_id === sId) iB = i;\r\n    });\r\n\r\n    if (this.canDo(a, iB, sId)) canA = true;\r\n    if (this.canDo(b, iA, sId)) canB = true;\r\n\r\n    if (canA && canB) {\r\n      let locA = iA.teams.indexOf(teamA);\r\n      let locB = iB.teams.indexOf(teamB);\r\n      iA.teams[locA] = teamB;\r\n      iB.teams[locB] = teamA;\r\n      a.schedule.splice(a.schedule.indexOf(iA), 1);\r\n      a.schedule.push(iB);\r\n      b.schedule.splice(b.schedule.indexOf(iB), 1);\r\n      b.schedule.push(iA);\r\n      console.log(iA.teams);\r\n      console.log(iB.teams);\r\n      return null;\r\n    } else if (canA) {\r\n      return \"Team \" + b.number + \" can't do that swap.\";\r\n    } else if (canB) {\r\n      return \"Team \" + a.number + \" can't do that swap.\";\r\n    } else {\r\n      return \"Neither team can do that\";\r\n    }\r\n  }\r\n\r\n  minTravelTime(team) {\r\n    let minTravel = Infinity;\r\n    team.schedule\r\n      .filter((i) => this.getSession(i.session_id).type !== TYPES.BREAK)\r\n      .forEach((i) => {\r\n        team.schedule\r\n          .filter((i) => this.getSession(i.session_id).type !== TYPES.BREAK)\r\n          .forEach((j) => {\r\n            if (i !== j) {\r\n              let sA = i.time.mins;\r\n              let eA =\r\n                i.time.mins +\r\n                this.getSession(i.session_id).len +\r\n                (i.extraTime ? this.extraTime : 0);\r\n              let sB = j.time.mins;\r\n              let eB =\r\n                j.time.mins +\r\n                this.getSession(j.session_id).len +\r\n                (i.extraTime ? this.extraTime : 0);\r\n              let dA = sB - eA;\r\n              let dB = sA - eB;\r\n              let d = dA < 0 ? dB : dA;\r\n              minTravel = minTravel > d ? d : minTravel;\r\n            }\r\n          });\r\n      });\r\n    return minTravel;\r\n  }\r\n}\r\n","import React from 'react';\r\n\r\nimport { Input, Col, FormGroup, Label } from 'reactstrap';\r\nimport uniqueId from 'react-html-id';\r\n\r\nexport default class TextInput extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.handleChange = this.handleChange.bind(this);\r\n\r\n    uniqueId.enableUniqueIds(this);\r\n  }\r\n\r\n  handleChange(event) {\r\n    const val = event.target.value;\r\n    this.props.onChange(val);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <FormGroup row>\r\n        <Label\r\n          hidden={this.props.nolabel}\r\n          sm={this.props.large ? 2 : 6}\r\n          for={this.nextUniqueId()}\r\n        >\r\n          {this.props.label}\r\n        </Label>\r\n        <Col sm={this.props.nolabel ? 12 : this.props.large ? 10 : 6}>\r\n          <Input\r\n            type='text'\r\n            id={this.lastUniqueId()}\r\n            value={this.props.value}\r\n            onChange={this.handleChange}\r\n          />\r\n        </Col>\r\n      </FormGroup>\r\n    );\r\n  }\r\n}\r\n","import React from 'react';\r\n\r\nimport { Input, Col, FormGroup, Label } from 'reactstrap';\r\nimport uniqueId from 'react-html-id';\r\n\r\nexport default class NumberInput extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.handleChange = this.handleChange.bind(this);\r\n\r\n    uniqueId.enableUniqueIds(this);\r\n  }\r\n\r\n  handleChange(event) {\r\n    const val = Number.parseInt(event.target.value, 10);\r\n    this.props.onChange(val);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <FormGroup row>\r\n        <Label sm={this.props.large ? 2 : 6} for={this.nextUniqueId()}>\r\n          {this.props.label}\r\n        </Label>\r\n        <Col sm={this.props.large ? 10 : 6}>\r\n          <Input\r\n            type='number'\r\n            min={this.props.min}\r\n            step={this.props.step || 1}\r\n            max={this.props.max}\r\n            id={this.lastUniqueId()}\r\n            value={this.props.value}\r\n            onChange={this.handleChange}\r\n          />\r\n        </Col>\r\n      </FormGroup>\r\n    );\r\n  }\r\n}\r\n","import React from 'react';\r\n\r\nimport { FormGroup, Label, Button, Col } from 'reactstrap';\r\nimport uniqueId from 'react-html-id';\r\n\r\nexport default class BooleanInput extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.toggleChecked = this.toggleChecked.bind(this);\r\n    uniqueId.enableUniqueIds(this);\r\n  }\r\n\r\n  toggleChecked() {\r\n    this.props.onChange(!this.props.value);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <FormGroup row>\r\n        <Label sm={this.props.large ? 2 : 6} for={this.nextUniqueId()}>\r\n          {this.props.label}\r\n        </Label>\r\n        <Col sm={this.props.large ? 10 : 6}>\r\n          <Button\r\n            disabled={this.props.disabled}\r\n            color={this.props.value ? 'success' : 'danger'}\r\n            onClick={this.toggleChecked}\r\n          >\r\n            {this.props.value ? 'Yes' : 'No'}\r\n          </Button>\r\n        </Col>\r\n      </FormGroup>\r\n    );\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport TextInput from \"../inputs/TextInput\";\r\nimport NumberInput from \"../inputs/NumberInput\";\r\n//import BooleanInput from '../inputs/BooleanInput';\r\n\r\nimport { EventParams } from \"../api/EventParams\";\r\n\r\nimport {\r\n  Container,\r\n  Table,\r\n  UncontrolledDropdown,\r\n  DropdownToggle,\r\n  DropdownItem,\r\n  DropdownMenu,\r\n  FormGroup,\r\n  Label,\r\n  Col,\r\n} from \"reactstrap\";\r\n\r\nimport ReactDataSheet from \"react-datasheet\";\r\nimport BooleanInput from \"../inputs/BooleanInput\";\r\n\r\nexport default class BasicsForm extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      grid: this.getDataGrid(),\r\n      awards: this.props.event.awards.map((a) => ({\r\n        name: a,\r\n        checked: true,\r\n      })),\r\n      selectedIdx: EventParams.AWARD_STYLES.findIndex((x) => {\r\n        return x === this.props.event.awardStyle;\r\n      }),\r\n    };\r\n\r\n    this.updateTitle = this.updateTitle.bind(this);\r\n    this.updateMinTravel = this.updateMinTravel.bind(this);\r\n    this.updateExtraTime = this.updateExtraTime.bind(this);\r\n    this.updateNDays = this.updateNDays.bind(this);\r\n    this.updateDays = this.updateDays.bind(this);\r\n    // this.updateJudgesAwards = this.updateJudgesAwards.bind(this);\r\n    this.updateAwardStyle = this.updateAwardStyle.bind(this);\r\n    this.toggleAward = this.toggleAward.bind(this);\r\n    this.updateConsolidatedAwards = this.updateConsolidatedAwards.bind(this);\r\n    this.handleChange = this.handleChange.bind(this);\r\n    this.getDataGrid = this.getDataGrid.bind(this);\r\n  }\r\n\r\n  getDataGrid() {\r\n    let grid = [];\r\n    for (let i = 0; i < this.props.event.days.length; i++) {\r\n      grid.push([]);\r\n      grid[i].push({ value: \"Day \" + (i + 1), readOnly: true });\r\n      grid[i].push({ value: this.props.event.days[i] });\r\n    }\r\n    return grid;\r\n  }\r\n\r\n  updateTitle(newTitle) {\r\n    let data = this.props.event;\r\n    data.title = newTitle;\r\n    this.handleChange(data);\r\n  }\r\n\r\n  updateMinTravel(value) {\r\n    let data = this.props.event;\r\n    data.minTravel = value;\r\n    this.handleChange(data);\r\n  }\r\n\r\n  // updateJudgesAwards(value) {\r\n  //     let data = this.props.event;\r\n  //     data.judgesAwards = value;\r\n  //     this.handleChange(data);\r\n  // }\r\n\r\n  updateConsolidatedAwards(value) {\r\n    let data = this.props.event;\r\n    data.consolidatedAwards = value;\r\n    this.handleChange(data);\r\n  }\r\n\r\n  updateAwardStyle(value) {\r\n    let data = this.props.event;\r\n    data.awardStyleIdx = value;\r\n    data.awards = EventParams.AWARD_NAMES[value];\r\n    this.setState({\r\n      selectedIdx: value,\r\n      awards: EventParams.AWARD_NAMES[value].map((a) => ({\r\n        name: a,\r\n        checked: true,\r\n      })),\r\n    });\r\n    this.handleChange(data);\r\n  }\r\n\r\n  toggleAward(name) {\r\n    const updatedAwards = this.state.awards.map((a) =>\r\n      a.name === name ? { ...a, checked: !a.checked } : a\r\n    );\r\n\r\n    let data = this.props.event;\r\n    data.awards = updatedAwards.filter((a) => a.checked).map((a) => a.name);\r\n\r\n    this.setState({\r\n      awards: updatedAwards,\r\n    });\r\n  }\r\n\r\n  updateExtraTime(value) {\r\n    let data = this.props.event;\r\n    data.extraTime = value;\r\n    this.handleChange(data);\r\n  }\r\n\r\n  updateDays(changes) {\r\n    const grid = this.state.grid.map((row) => [...row]);\r\n    changes.forEach(({ cell, row, col, value }) => {\r\n      grid[row][col] = { ...grid[row][col], value };\r\n    });\r\n    this.setState({ grid });\r\n    let A = [];\r\n    for (let i = 0; i < grid.length; i++) {\r\n      A.push(grid[i][1].value);\r\n    }\r\n    let S = this.props.event;\r\n    S.days = A;\r\n    this.props.onChange(S);\r\n  }\r\n\r\n  updateNDays(value) {\r\n    let E = this.props.event;\r\n    E.nDays = value;\r\n    this.setState({ grid: this.getDataGrid() });\r\n    this.handleChange(E);\r\n  }\r\n\r\n  handleChange(data) {\r\n    this.props.onChange(data);\r\n  }\r\n\r\n  render() {\r\n    let dayInput = (\r\n      <div>\r\n        {/*<NumberInput label=\"Number of days\" large value={this.props.event.days.length} onChange={this.updateNDays}/>*/}\r\n        <ReactDataSheet\r\n          data={this.state.grid}\r\n          valueRenderer={(cell) => cell.value}\r\n          sheetRenderer={(props) => (\r\n            <Table className=\"datagrid-custom\">\r\n              <thead>\r\n                <tr>\r\n                  <th>Day number</th>\r\n                  <th>Name</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>{props.children}</tbody>\r\n            </Table>\r\n          )}\r\n          onCellsChanged={(changes) => this.updateDays(changes)}\r\n        />\r\n      </div>\r\n    );\r\n    return (\r\n      <Container>\r\n        <TextInput\r\n          large\r\n          label=\"Title: \"\r\n          value={this.props.event.title}\r\n          onChange={this.updateTitle}\r\n        />\r\n        <hr />\r\n        {this.props.cosmetic || (\r\n          <NumberInput\r\n            label=\"Min. travel (mins)\"\r\n            large\r\n            value={this.props.event.minTravel}\r\n            onChange={this.updateMinTravel}\r\n          />\r\n        )}\r\n        {this.props.advanced && !this.props.cosmetic && (\r\n          <NumberInput\r\n            label=\"Extra time (mins)\"\r\n            large\r\n            value={this.props.event.extraTime}\r\n            onChange={this.updateExtraTime}\r\n          />\r\n        )}\r\n        <hr />\r\n        <h3>Days:</h3>\r\n        {dayInput}\r\n        <br />\r\n        <hr />\r\n        <h3>Awards:</h3>\r\n        <br />\r\n        <FormGroup row>\r\n          <Label sm={2} for={\"awardStyleDropDown\"}>\r\n            Preset\r\n          </Label>\r\n          <Col sm={10}>\r\n            <UncontrolledDropdown>\r\n              <DropdownToggle caret>\r\n                {EventParams.AWARD_STYLES[this.state.selectedIdx]}\r\n              </DropdownToggle>\r\n              <DropdownMenu>\r\n                {EventParams.AWARD_STYLES.map((x, i) => {\r\n                  return (\r\n                    <DropdownItem\r\n                      key={i}\r\n                      onClick={() => {\r\n                        this.updateAwardStyle(i);\r\n                      }}\r\n                    >\r\n                      {x}\r\n                    </DropdownItem>\r\n                  );\r\n                })}\r\n              </DropdownMenu>\r\n            </UncontrolledDropdown>\r\n          </Col>\r\n        </FormGroup>\r\n        {this.props.event.awardPerc}% of teams will receive awards\r\n        <FormGroup>\r\n          <Label sm={2} for={\"awardStyleDropDown\"}>\r\n            Awards\r\n          </Label>\r\n          <Table>\r\n            <tbody>\r\n              {this.state.awards.map(({ name, checked }, aIdx) => (\r\n                <tr key={aIdx}>\r\n                  <td>\r\n                    {name}{\" \"}\r\n                    {[\"Motiv\", \"Risin\", \"Engin\", \"Break\"].includes(\r\n                      name.substring(0, 5)\r\n                    ) && \"(optional)\"}\r\n                  </td>\r\n                  <td>\r\n                    {[\"Motiv\", \"Risin\", \"Engin\", \"Break\"].includes(\r\n                      name.substring(0, 5)\r\n                    ) && (\r\n                      <BooleanInput\r\n                        onChange={() => this.toggleAward(name)}\r\n                        value={checked}\r\n                      />\r\n                    )}\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </Table>\r\n        </FormGroup>\r\n        {/*<BooleanInput large label=\"Award format\" value={this.props.event.consolidatedAwards}\r\n                              onChange={this.updateConsolidatedAwards}/>*/}\r\n        {/* <NumberInput large label=\"Number of judges awards\" value={this.props.event.judgesAwards}\r\n                             onChange={this.updateJudgesAwards} min={0}/> */}\r\n      </Container>\r\n    );\r\n  }\r\n}\r\n","import React from 'react';\r\n\r\nimport { Input, Col, FormGroup, Label } from 'reactstrap';\r\nimport uniqueId from 'react-html-id';\r\n\r\nimport { DateTime } from '../api/DateTime';\r\n\r\nexport default class DateTimeInput extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.handleTimeChange = this.handleTimeChange.bind(this);\r\n    this.handleDateChange = this.handleDateChange.bind(this);\r\n    this.buildInput = this.buildInput.bind(this);\r\n\r\n    uniqueId.enableUniqueIds(this);\r\n  }\r\n\r\n  handleTimeChange(event) {\r\n    let x = this.props.value;\r\n    if (!x) x = new DateTime(0);\r\n    if (event.target.value) x.time = event.target.value;\r\n    this.props.onChange(x);\r\n  }\r\n\r\n  handleDateChange(event) {\r\n    let x = this.props.value;\r\n    x.day = event.target.value;\r\n    this.props.onChange(x);\r\n  }\r\n\r\n  buildInput() {\r\n    if (this.props.value.days.length > 1) {\r\n      return (\r\n        <FormGroup>\r\n          <Input\r\n            type='select'\r\n            name='select'\r\n            onChange={this.handleDateChange}\r\n            value={\r\n              this.props.value.days[\r\n                Math.floor(this.props.value.mins / (24 * 60))\r\n              ]\r\n            }\r\n          >\r\n            {this.props.value.days.map((d, idx) => (\r\n              <option key={idx}>{d}</option>\r\n            ))}\r\n          </Input>\r\n          <Input\r\n            type='time'\r\n            id={this.lastUniqueId()}\r\n            pattern='[0-2][0-9]:[0-5][0-9]'\r\n            step='900'\r\n            value={this.props.value.mins ? this.props.value.timeValue : null}\r\n            onChange={this.handleTimeChange}\r\n          />\r\n        </FormGroup>\r\n      );\r\n    } else {\r\n      return (\r\n        <Input\r\n          type='time'\r\n          id={this.lastUniqueId()}\r\n          pattern='[0-2][0-9]:[0-5][0-9]'\r\n          step='900'\r\n          value={this.props.value.mins ? this.props.value.timeValue : null}\r\n          onChange={this.handleTimeChange}\r\n        />\r\n      );\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <FormGroup row>\r\n        <Label sm={this.props.large ? 2 : 6} for={this.nextUniqueId()}>\r\n          {this.props.label}\r\n        </Label>\r\n        <Col sm={this.props.large ? 10 : 6}>\r\n          {this.props.immutable ? this.props.value.time : this.buildInput()}\r\n        </Col>\r\n      </FormGroup>\r\n    );\r\n  }\r\n}\r\n","import React from 'react';\r\n// import ReactDOM from 'react-dom';\r\nimport {TYPES} from '../api/SessionTypes';\r\n\r\nimport MdRemoveCircleOutline from 'react-icons/lib/md/remove-circle-outline';\r\n\r\nimport {Form, Table, Button} from 'reactstrap';\r\nimport TextInput from '../inputs/TextInput';\r\nimport DateTimeInput from \"../inputs/DateTimeInput\";\r\nimport NumberInput from \"../inputs/NumberInput\";\r\nimport BooleanInput from \"../inputs/BooleanInput\";\r\n\r\nimport ReactDataSheet from 'react-datasheet';\r\n\r\nexport default class SessionForm extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        // Default values....\r\n        this.updateName = this.updateName.bind(this);\r\n        this.updateStartTime = this.updateStartTime.bind(this);\r\n        this.updateEndTime = this.updateEndTime.bind(this);\r\n        this.updateLen = this.updateLen.bind(this);\r\n        this.updateOverlap = this.updateOverlap.bind(this);\r\n        this.updateBuf = this.updateBuf.bind(this);\r\n        this.updateNSims = this.updateNSims.bind(this);\r\n        this.updateNLocs = this.updateNLocs.bind(this);\r\n        this.updateExtraFirst = this.updateExtraFirst.bind(this);\r\n        this.updateExtraEvery = this.updateExtraEvery.bind(this);\r\n        this.getDataGrid = this.getDataGrid.bind(this);\r\n        this.updateLocs = this.updateLocs.bind(this);\r\n        this.updateNoprac = this.updateNoprac.bind(this);\r\n        this.handleDelete = this.handleDelete.bind(this);\r\n    }\r\n\r\n    updateName(value) {\r\n        let S = this.props.session;\r\n        S.name = value;\r\n        this.props.onChange(S);\r\n    }\r\n\r\n    updateStartTime(value) {\r\n        let S = this.props.session;\r\n        S.startTime = value;\r\n        this.props.onChange(S);\r\n    }\r\n\r\n    updateEndTime(value) {\r\n        let S = this.props.session;\r\n        S.endTime = value;\r\n        this.props.onChange(S);\r\n    }\r\n\r\n    updateLen(value) {\r\n        let S = this.props.session;\r\n        S.len = value;\r\n        S.overlap = Math.floor(Math.min(S.overlap, (S.len + S.buf) - (S.len + S.buf) * S.nSims / S.nLocs));\r\n        this.props.onChange(S);\r\n    }\r\n\r\n    updateOverlap(value) {\r\n        let S = this.props.session;\r\n\r\n        // If overlap means matches will happen too quickly, don't update it.\r\n        if (value > (S.len + S.buf) - (S.len + S.buf) * S.nSims / S.nLocs) {\r\n            alert(\"Overlap is too large\");\r\n        } else {\r\n            S.overlap = value;\r\n            this.props.onChange(S);\r\n        }\r\n    }\r\n\r\n    updateBuf(value) {\r\n        let S = this.props.session;\r\n        S.buf = value;\r\n        S.overlap = Math.floor(Math.min(S.overlap, (S.len + S.buf) - (S.len + S.buf) * S.nSims / S.nLocs));\r\n        this.props.onChange(S);\r\n    }\r\n\r\n    updateNSims(value) {\r\n        let S = this.props.session;\r\n        S.nSims = value;\r\n        S.overlap = Math.floor(Math.min(S.overlap, (S.len + S.buf) - (S.len + S.buf) * S.nSims / S.nLocs));\r\n        this.props.onChange(S);\r\n    }\r\n\r\n    updateNoprac(value) {\r\n        let S = this.props.session;\r\n        S.noPractice = value;\r\n        this.props.onChange(S);\r\n    }\r\n\r\n    updateNLocs(value) {\r\n        let S = this.props.session;\r\n        S.nLocs = value;\r\n\r\n        S.overlap = Math.floor(Math.min(S.overlap, (S.len + S.buf) - (S.len + S.buf) * S.nSims / S.nLocs));\r\n        this.setState({grid: this.getDataGrid()});\r\n        this.props.onChange(S);\r\n    }\r\n\r\n    updateExtraFirst(value) {\r\n        let S = this.props.session;\r\n        S.extraTimeFirst = value;\r\n        this.props.onChange(S);\r\n    }\r\n\r\n    updateExtraEvery(value) {\r\n        let S = this.props.session;\r\n        S.extraTimeEvery = value;\r\n        this.props.onChange(S);\r\n    }\r\n\r\n    getDataGrid() {\r\n        let grid = [];\r\n        for (let i = 0; i < this.props.session.nLocs; i++) {\r\n            grid.push([]);\r\n            grid[i].push({value: \"Name of \" + this.props.session.type.defaultLocs + \" \" + (i + 1), readOnly: true});\r\n            grid[i].push({value: this.props.session.locations[i]});\r\n        }\r\n        return grid;\r\n    }\r\n\r\n    updateLocs(changes) {\r\n        const grid = this.getDataGrid().map(row => [...row]);\r\n        changes.forEach(({cell, row, col, value}) => {\r\n            grid[row][col] = {...grid[row][col], value}\r\n        });\r\n        this.setState({grid});\r\n        let A = [];\r\n        for (let i = 0; i < grid.length; i++) {\r\n            A.push(grid[i][1].value);\r\n        }\r\n        let S = this.props.session;\r\n        S.locations = A;\r\n        this.props.onChange(S);\r\n    }\r\n\r\n    handleDelete() {\r\n        this.props.onDelete(this.props.session);\r\n    }\r\n\r\n    render() {\r\n        let truth = this.props.session.startTime.mins < this.props.session.actualStartTime.mins;\r\n        if (this.props.cosmetic) {\r\n            return (\r\n                <div className=\"session-form\">\r\n                    <Form>\r\n                        <TextInput label=\"Title\" nolabel value={this.props.session.name} onChange={this.updateName}/>\r\n                        {this.props.session.type !== TYPES.BREAK && <ReactDataSheet\r\n                            data={this.getDataGrid()}\r\n                            valueRenderer={(cell) => cell.value}\r\n                            sheetRenderer={(props) => (\r\n                                <Table className=\"datagrid-custom\">\r\n                                    <tbody>\r\n                                    {props.children}\r\n                                    </tbody>\r\n                                </Table>\r\n                            )}\r\n                            onCellsChanged={(changes) => this.updateLocs(changes)}\r\n                        />}\r\n\r\n                    </Form>\r\n                </div>\r\n            );\r\n        } else {\r\n            return (\r\n                <div className=\"session-form\">\r\n                    <Form>\r\n                        {this.props.advanced ?\r\n                            <TextInput label=\"Title\" nolabel value={this.props.session.name}\r\n                                       onChange={this.updateName}/> :\r\n                            <h3>{this.props.session.name}</h3>\r\n                        }\r\n                        <DateTimeInput label={\"Start time\" + ((truth) ? \"*\" : \"\")} value={this.props.session.startTime}\r\n                                       onChange={this.updateStartTime}/>\r\n                        <DateTimeInput label=\"Will be done by\" immutable={this.props.session.type !== TYPES.BREAK}\r\n                                       value={(this.props.session.type !== TYPES.BREAK) ? this.props.session.actualEndTime : this.props.session.endTime}\r\n                                       onChange={this.updateEndTime}/>\r\n                        {this.props.session.type !== TYPES.BREAK &&\r\n                        <NumberInput label=\"Duration (mins)\" min={1} value={this.props.session.len}\r\n                                     onChange={this.updateLen}/>}\r\n                        {this.props.session.type !== TYPES.BREAK &&\r\n                        <NumberInput label=\"Buffer/cleanup time (mins)\" min={0} value={this.props.session.buf}\r\n                                     onChange={this.updateBuf}/>}\r\n                        {(this.props.session.type === TYPES.MATCH_ROUND || this.props.session.type === TYPES.MATCH_ROUND_PRACTICE) &&\r\n                        <NumberInput label=\"Overlap (mins)\" min={0} value={this.props.session.overlap}\r\n                                     onChange={this.updateOverlap}/>}\r\n                        {this.props.session.type !== TYPES.BREAK && (\r\n                            this.props.session.type === TYPES.JUDGING ?\r\n                                <NumberInput label=\"Number of rooms\" min={1} value={this.props.session.locations.length}\r\n                                             onChange={this.updateNLocs}/> :\r\n                                <NumberInput label=\"Number of tables\" min={1}\r\n                                             value={this.props.session.locations.length} onChange={this.updateNLocs}/>)}\r\n                        {(this.props.session.type === TYPES.MATCH_ROUND || this.props.session.type === TYPES.MATCH_ROUND_PRACTICE) &&\r\n                        <NumberInput label=\"Simultaneous Teams\" min={1} value={this.props.session.nSims}\r\n                                     onChange={this.updateNSims}/>\r\n                        }\r\n                        {this.props.advanced && this.props.session.type !== TYPES.BREAK &&\r\n                        <BooleanInput label=\"Extra time first?\" value={this.props.session.extraTimeFirst}\r\n                                      onChange={this.updateExtraFirst}/>}\r\n                        {this.props.advanced && this.props.session.type === TYPES.BREAK &&\r\n                        <BooleanInput label=\"Apply to practice times?\" value={this.props.session.noPractice}\r\n                                      onChange={this.updateNoprac}/>}\r\n                        {this.props.advanced && this.props.session.type !== TYPES.BREAK &&\r\n                        <NumberInput label=\"Extra time every N\" value={this.props.session.extraTimeEvery} min={0}\r\n                                     onChange={this.updateExtraEvery}/>}\r\n                        {this.props.session.type !== TYPES.BREAK && <strong>Locations</strong>}\r\n                        {this.props.session.type !== TYPES.BREAK && <ReactDataSheet\r\n                            data={this.getDataGrid()}\r\n                            valueRenderer={(cell) => cell.value}\r\n                            sheetRenderer={(props) => (\r\n                                <Table className=\"datagrid-custom\">\r\n                                    <tbody>\r\n                                    {props.children}\r\n                                    </tbody>\r\n                                </Table>\r\n                            )}\r\n                            onCellsChanged={(changes) => this.updateLocs(changes)}\r\n                        />}\r\n                        {this.props.session.type === TYPES.BREAK &&\r\n                        <Button color='primary' onClick={this.props.onToggle}>Break applies to...</Button>}\r\n                        {truth && <span>* Will actually start at {this.props.session.actualStartTime.time}</span>}\r\n                        <br/>\r\n                        {this.props.advanced &&\r\n                        <Button onClick={this.handleDelete} color='danger'><MdRemoveCircleOutline/> Delete</Button>}\r\n\r\n                    </Form>\r\n                    <br/>\r\n                </div>\r\n            );\r\n        }\r\n    }\r\n}\r\n","import React from 'react';\r\n\r\nimport ReactDataSheet from 'react-datasheet';\r\n\r\nimport {\r\n  Table,\r\n  Button,\r\n  Modal,\r\n  ModalHeader,\r\n  ModalBody,\r\n  ModalFooter\r\n} from 'reactstrap';\r\nimport { TeamParams } from '../api/TeamParams';\r\n\r\nimport MdAddCircleOutline from 'react-icons/lib/md/add-circle-outline';\r\nimport FaCheckCircleO from 'react-icons/lib/fa/check-circle-o';\r\nimport FaTimesCircleO from 'react-icons/lib/fa/times-circle-o';\r\nimport BooleanInput from './BooleanInput';\r\nimport DateTimeInput from './DateTimeInput';\r\n\r\nexport default class TeamList extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      toAdd: 1,\r\n      selectedTeam: 0,\r\n      modal: false\r\n    };\r\n\r\n    this.toggle = this.toggle.bind(this);\r\n\r\n    this.updateCells = this.updateCells.bind(this);\r\n    this.deleteTeam = this.deleteTeam.bind(this);\r\n    this.changeToAdd = this.changeToAdd.bind(this);\r\n    this.addTeams = this.addTeams.bind(this);\r\n\r\n    this.setTeamExclude = this.setTeamExclude.bind(this);\r\n    this.setTeamExtra = this.setTeamExtra.bind(this);\r\n    this.setTeamStartTime = this.setTeamStartTime.bind(this);\r\n    this.setTeamEndTime = this.setTeamEndTime.bind(this);\r\n  }\r\n\r\n  toggle() {\r\n    this.setState({\r\n      modal: !this.state.modal\r\n    });\r\n  }\r\n\r\n  changeToAdd(ev) {\r\n    this.setState({\r\n      toAdd: ev.target.value\r\n    });\r\n  }\r\n\r\n  getDataGrid() {\r\n    let grid = [];\r\n    for (let i = 0; i < this.props.teams.length; i++) {\r\n      grid.push([]);\r\n      grid[i].push({ value: this.props.teams[i].number });\r\n      grid[i].push({ value: this.props.teams[i].name });\r\n      grid[i].push({ value: this.props.teams[i].affiliation });\r\n      grid[i].push({ value: this.props.teams[i].pitNum });\r\n      if (this.props.advanced) {\r\n        grid[i].push({\r\n          value: this.props.teams[i].excludeJudging ? (\r\n            <FaCheckCircleO size={20} />\r\n          ) : (\r\n            <FaTimesCircleO size={20} />\r\n          )\r\n        });\r\n        grid[i].push({\r\n          value: this.props.teams[i].extraTime ? (\r\n            <FaCheckCircleO size={20} />\r\n          ) : (\r\n            <FaTimesCircleO size={20} />\r\n          )\r\n        });\r\n        grid[i].push({\r\n          value: this.props.teams[i].startTime\r\n            ? this.props.teams[i].startTime.time\r\n            : '--'\r\n        });\r\n        grid[i].push({\r\n          value: this.props.teams[i].endTime\r\n            ? this.props.teams[i].endTime.time\r\n            : '--'\r\n        });\r\n      }\r\n    }\r\n    return grid;\r\n  }\r\n\r\n  updateCells(changes) {\r\n    const grid = this.getDataGrid().map(row => [...row]);\r\n    let T = this.props.teams;\r\n    changes.forEach(({ cell, row, col, value }) => {\r\n      grid[row][col] = { ...grid[row][col], value };\r\n    });\r\n    for (let row = 0; row < grid.length; row++) {\r\n      T[row].number = grid[row][0].value;\r\n      T[row].name = grid[row][1].value;\r\n      T[row].affiliation = grid[row][2].value;\r\n    }\r\n    this.props.onChange(T);\r\n  }\r\n\r\n  addTeams() {\r\n    let T = this.props.teams;\r\n    for (let i = 0; i < this.state.toAdd; i++) {\r\n      T.push(new TeamParams(T.length + 1));\r\n    }\r\n    this.props.onChange(T);\r\n    this.setState({ grid: this.getDataGrid() });\r\n  }\r\n\r\n  deleteTeam(idx) {\r\n    let T = this.props.teams;\r\n    T.splice(idx, 1);\r\n    this.props.onChange(T);\r\n    this.setState({ grid: this.getDataGrid() });\r\n  }\r\n\r\n  setTeamExclude(b) {\r\n    let T = this.props.teams;\r\n    T[this.state.selectedTeam].excludeJudging = b;\r\n    this.props.onChange(T);\r\n  }\r\n\r\n  setTeamExtra(b) {\r\n    let T = this.props.teams;\r\n    T[this.state.selectedTeam].extraTime = b;\r\n    this.props.onChange(T);\r\n  }\r\n\r\n  setTeamStartTime(t) {\r\n    let T = this.props.teams;\r\n    T[this.state.selectedTeam].startTime = t;\r\n    this.props.onChange(T);\r\n  }\r\n\r\n  setTeamEndTime(t) {\r\n    let T = this.props.teams;\r\n    T[this.state.selectedTeam].endTime = t;\r\n    this.props.onChange(T);\r\n  }\r\n\r\n  buildModal(team) {\r\n    return (\r\n      <div>\r\n        {team.number}: {team.name}\r\n        <BooleanInput\r\n          label='Exclude from judging?'\r\n          value={team.excludeJudging}\r\n          onChange={this.setTeamExclude}\r\n        />\r\n        <BooleanInput\r\n          label='Extra time needed?'\r\n          value={team.extraTime}\r\n          onChange={this.setTeamExtra}\r\n        />\r\n        <DateTimeInput\r\n          label='Arrives at: '\r\n          value={team.startTime}\r\n          onChange={this.setTeamStartTime}\r\n        />\r\n        <DateTimeInput\r\n          label='Must leave by: '\r\n          value={team.endTime}\r\n          onChange={this.setTeamEndTime}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <Modal\r\n          isOpen={this.state.modal}\r\n          toggle={this.toggle}\r\n          className={this.props.className}\r\n        >\r\n          <ModalHeader toggle={this.toggle}>Advanced edit</ModalHeader>\r\n          <ModalBody>\r\n            {this.buildModal(this.props.teams[this.state.selectedTeam])}\r\n          </ModalBody>\r\n          <ModalFooter>\r\n            <Button color='secondary' onClick={this.toggle}>\r\n              Close\r\n            </Button>\r\n          </ModalFooter>\r\n        </Modal>\r\n        {this.props.cosmetic || (\r\n          <div>\r\n            <Button onClick={this.addTeams}>\r\n              <MdAddCircleOutline /> Add\r\n            </Button>\r\n            &nbsp;\r\n            <input\r\n              type='number'\r\n              value={this.state.toAdd}\r\n              min='1'\r\n              onChange={this.changeToAdd}\r\n            />\r\n            &nbsp; team{this.state.toAdd > 1 && 's'}&nbsp;\r\n            <br />\r\n            Number of teams: {this.props.teams.length}\r\n            <br />\r\n          </div>\r\n        )}\r\n        &nbsp;\r\n        <ReactDataSheet\r\n          data={this.getDataGrid()}\r\n          valueRenderer={cell => cell.value}\r\n          sheetRenderer={props => (\r\n            <Table className='datagrid-custom'>\r\n              <thead>\r\n                <tr>\r\n                  <th>Team number</th>\r\n                  <th>Team name</th>\r\n                  <th>Affiliation</th>\r\n                  <th>Pit No</th>\r\n                  {this.props.advanced && <th>Exclude from judging?</th>}\r\n                  {this.props.advanced && <th>Extra time?</th>}\r\n                  {this.props.advanced && <th>Arrives</th>}\r\n                  {this.props.advanced && <th>Leaves</th>}\r\n                  {this.props.advanced && <th>Advanced</th>}\r\n                  {this.props.cosmetic || <th width='20'></th>}\r\n                </tr>\r\n              </thead>\r\n              <tbody>{props.children}</tbody>\r\n            </Table>\r\n          )}\r\n          rowRenderer={props => (\r\n            <tr>\r\n              {props.children}\r\n              {this.props.advanced && (\r\n                <td className='cell'>\r\n                  <Button\r\n                    className='btn-sm'\r\n                    onClick={() => {\r\n                      this.setState({ selectedTeam: props.row });\r\n                      this.toggle();\r\n                    }}\r\n                  >\r\n                    Edit...\r\n                  </Button>\r\n                </td>\r\n              )}\r\n              {this.props.cosmetic || (\r\n                <td className='cell'>\r\n                  <Button\r\n                    color='danger'\r\n                    className='btn-sm'\r\n                    onClick={() => this.deleteTeam(props.row)}\r\n                  >\r\n                    <FaTimesCircleO size={20} />\r\n                  </Button>\r\n                </td>\r\n              )}\r\n            </tr>\r\n          )}\r\n          onCellsChanged={changes => this.updateCells(changes)}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React from 'react';\r\nimport {\r\n    Nav, NavItem, NavLink, TabContent, TabPane,\r\n    Container, Col, Row, Button,\r\n    Modal, ModalHeader, ModalBody, ModalFooter\r\n} from 'reactstrap';\r\n\r\nimport MdAddCircleOutline from 'react-icons/lib/md/add-circle-outline';\r\n\r\nimport {TYPES} from '../api/SessionTypes';\r\nimport BasicsForm from \"./BasicsForm\";\r\nimport SessionForm from \"./SessionForm\"\r\nimport TeamList from \"../inputs/TeamList\";\r\nimport BooleanInput from \"../inputs/BooleanInput\";\r\nimport SessionParams from \"../api/SessionParams\";\r\n\r\nimport ToggleButton from 'react-toggle-button';\r\n\r\nexport default class DetailView extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.toggle = this.toggle.bind(this);\r\n        this.state = {\r\n            activeTab: 'judging',\r\n            advanced: false,\r\n            modal: false,\r\n            selectedSession: null\r\n        };\r\n\r\n        this.handleScheduleChange = this.handleScheduleChange.bind(this);\r\n        this.updateSessions = this.updateSessions.bind(this);\r\n        this.updateTeams = this.updateTeams.bind(this);\r\n        this.toggleAdvanced = this.toggleAdvanced.bind(this);\r\n        this.toggleModal = this.toggleModal.bind(this);\r\n        this.toggleApplies = this.toggleApplies.bind(this);\r\n        this.updateUniversal = this.updateUniversal.bind(this);\r\n        this.deleteSession = this.deleteSession.bind(this);\r\n        this.addSession = this.addSession.bind(this);\r\n    }\r\n\r\n    toggleAdvanced() {\r\n        this.setState({\r\n            advanced: !this.state.advanced\r\n        });\r\n    }\r\n\r\n    toggle(tab) {\r\n        if (this.state.activeTab !== tab) {\r\n            this.setState({\r\n                activeTab: tab\r\n            });\r\n        }\r\n    }\r\n\r\n    handleScheduleChange(s) {\r\n        this.props.onChange(s);\r\n    }\r\n\r\n    updateTeams(T) {\r\n        let E = this.props.event;\r\n        E.teams = T;\r\n        this.props.onChange(E);\r\n        console.log(this.props.event);\r\n    }\r\n\r\n    updateSessions(S) {\r\n        let E = this.props.event;\r\n        for (let i = 0; i < E.sessions.length; i++) {\r\n            if (E.sessions[i].id === S.id) {\r\n                E.sessions[i] = S;\r\n                break;\r\n            }\r\n        }\r\n        E.syncLocs(S);\r\n        this.props.onChange(E);\r\n    }\r\n\r\n    toggleModal(session) {\r\n        let value = !this.state.modal;\r\n        let s = (value) ? session : null;\r\n        this.setState({modal: value, selectedSession: s});\r\n    }\r\n\r\n    toggleApplies(container, session, include) {\r\n        if (include && !container.applies(session.id)) {\r\n            container.appliesTo.push(session.id);\r\n        }\r\n        if (!include && container.applies(session.id)) {\r\n            container.appliesTo.splice(container.appliesTo.indexOf(session.id), 1);\r\n        }\r\n        this.updateSessions(container);\r\n    }\r\n\r\n    updateUniversal(value) {\r\n        let S = this.state.selectedSession;\r\n        if (!S) return;\r\n        S.universal = value;\r\n        this.updateSessions(S);\r\n    }\r\n\r\n    deleteSession(S) {\r\n        let E = this.props.event;\r\n        console.log(S);\r\n        E.sessions.splice(E.sessions.indexOf(S), 1);\r\n        this.props.onChange(E);\r\n    }\r\n\r\n    addSession() {\r\n        let E = this.props.event;\r\n        let S = null;\r\n        if (this.state.activeTab === 'judging')\r\n            S = new SessionParams(E.uid_counter + 1, TYPES.JUDGING, \"Judging\", 4, E.startTime.clone(), E.endTime.clone());\r\n        else if (this.state.activeTab === 'rounds') {\r\n            S = new SessionParams(E.uid_counter + 1, TYPES.MATCH_ROUND, \"Round X\", 4, E.startTime.clone(), E.endTime.clone());\r\n            S.locations = E.sessions.filter(s => s.type === TYPES.MATCH_ROUND)[0].locations;\r\n        }\r\n        else if (this.state.activeTab === 'breaks') {\r\n            S = new SessionParams(E.uid_counter + 1, TYPES.BREAK, \"Break\", 1, E.startTime.clone(), E.endTime.clone());\r\n            S.universal = true;\r\n        } else if (this.state.activeTab === 'practice') {\r\n            S = new SessionParams(E.uid_counter + 1, TYPES.MATCH_ROUND_PRACTICE, \"Practice Round X\", 4, E.startTime.clone(), E.endTime.clone());\r\n            S.locations = E.sessions.filter(s => s.type === TYPES.MATCH_ROUND)[0].locations;\r\n        }\r\n        else return;\r\n        E.sessions.push(S);\r\n        E.uid_counter = E.uid_counter + 1;\r\n        this.props.onChange(E);\r\n    }\r\n\r\n    buildModal() {\r\n        let S = this.state.selectedSession;\r\n        if (!S) return;\r\n        return (\r\n            <div>\r\n                {S.name} applies to...<br/>\r\n                {S.type === TYPES.BREAK &&\r\n                <BooleanInput label=\"All?\" value={S.universal} onChange={this.updateUniversal}/>}\r\n                <hr/>\r\n                {this.props.event.sessions.filter(S => S.type !== TYPES.BREAK).map(session =>\r\n                    <BooleanInput key={session.id} disabled={S.universal} label={session.name}\r\n                                  value={S.applies(session.id)} onChange={(x) => this.toggleApplies(S, session, x)}/>\r\n                )}\r\n            </div>\r\n        );\r\n    }\r\n\r\n\r\n    renderSessions(type) {\r\n        return (\r\n            <Row>\r\n                {this.props.event.sessions.filter(S => S.type === type).sort((a, b) => {\r\n                    return a.id - b.id;\r\n                }).map(S => (\r\n                    <Col lg={6} md={12} key={S.id}>\r\n                        <SessionForm onDelete={this.deleteSession} onToggle={() => this.toggleModal(S)}\r\n                                     advanced={this.state.advanced}\r\n                                     session={S} onChange={this.updateSessions}/>\r\n                    </Col>\r\n                ))}\r\n            </Row>\r\n        )\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <Container>\r\n                <Modal isOpen={this.state.modal} toggle={this.toggle} className={this.props.className}>\r\n                    <ModalHeader toggle={this.toggleModal}>Advanced edit</ModalHeader>\r\n                    <ModalBody>\r\n                        {this.buildModal()}\r\n                    </ModalBody>\r\n                    <ModalFooter>\r\n                        <Button color=\"secondary\" onClick={this.toggleModal}>Close</Button>\r\n                    </ModalFooter>\r\n                </Modal>\r\n\r\n                <Nav pills>\r\n                    <NavItem>\r\n                        <NavLink href=\"#\" className={(this.state.activeTab === 'basics') ? \"active\" : \"\"}\r\n                                 onClick={() => {\r\n                                     this.toggle('basics')\r\n                                 }}>\r\n                            Basics\r\n                        </NavLink>\r\n                    </NavItem>\r\n                    <NavItem>\r\n                        <NavLink href=\"#\" className={(this.state.activeTab === 'teams') ? \"active\" : \"\"}\r\n                                 onClick={() => {\r\n                                     this.toggle('teams')\r\n                                 }}>\r\n                            Teams\r\n                        </NavLink>\r\n                    </NavItem>\r\n                    <NavItem>\r\n                        <NavLink href=\"#\" className={(this.state.activeTab === 'judging') ? \"active\" : \"\"}\r\n                                 onClick={() => {\r\n                                     this.toggle('judging')\r\n                                 }}>\r\n                            Judging\r\n                        </NavLink>\r\n                    </NavItem>\r\n                    <NavItem>\r\n                        <NavLink href=\"#\" className={this.state.activeTab === 'rounds' ? \"active\" : \"\"}\r\n                                 onClick={() => {\r\n                                     this.toggle('rounds')\r\n                                 }}>\r\n                            Rounds\r\n                        </NavLink>\r\n                    </NavItem>\r\n                    <NavItem>\r\n                        <NavLink href=\"#\" className={this.state.activeTab === 'practice' ? \"active\" : \"\"}\r\n                                 onClick={() => {\r\n                                     this.toggle('practice')\r\n                                 }}>\r\n                            Practice\r\n                        </NavLink>\r\n                    </NavItem>\r\n                    <NavItem>\r\n                        <NavLink href=\"#\" className={(this.state.activeTab === 'breaks') ? \"active\" : \"\"}\r\n                                 onClick={() => {\r\n                                     this.toggle('breaks')\r\n                                 }}>\r\n                            Breaks\r\n                        </NavLink>\r\n                    </NavItem>\r\n                    &nbsp;\r\n                    <div onClick={this.toggleAdvanced}>\r\n                        <small className=\"not-text\">Advanced</small>\r\n                        <ToggleButton value={this.state.advanced} onToggle={this.toggleAdvanced}/>\r\n                    </div>\r\n                    {this.state.advanced && this.state.activeTab !== 'basics' && this.state.activeTab !== 'teams' && (\r\n                        <NavItem>\r\n                            <NavLink href=\"#\" onClick={this.addSession}>\r\n                                <MdAddCircleOutline/>\r\n                            </NavLink>\r\n                        </NavItem>)\r\n                    }\r\n\r\n                </Nav>\r\n                <TabContent activeTab={this.state.activeTab}>\r\n                    <TabPane tabId=\"basics\">\r\n                        &nbsp;\r\n                        <BasicsForm advanced={this.state.advanced} event={this.props.event}\r\n                                    onChange={this.handleScheduleChange}/>\r\n                    </TabPane>\r\n                    <TabPane tabId=\"teams\">\r\n                        &nbsp;\r\n                        <TeamList advanced={this.state.advanced} teams={this.props.event.teams}\r\n                                  onChange={this.updateTeams}/>\r\n                    </TabPane>\r\n                    <TabPane tabId=\"judging\">\r\n                        &nbsp;\r\n                        {this.renderSessions(TYPES.JUDGING)}\r\n                    </TabPane>\r\n                    <TabPane tabId=\"rounds\">\r\n                        &nbsp;\r\n                        {this.renderSessions(TYPES.MATCH_ROUND)}\r\n                    </TabPane>\r\n                    <TabPane tabId=\"practice\">\r\n                        &nbsp;\r\n                        {this.renderSessions(TYPES.MATCH_ROUND_PRACTICE)}\r\n                    </TabPane>\r\n                    <TabPane tabId=\"breaks\">\r\n                        &nbsp;\r\n                        {this.renderSessions(TYPES.BREAK)}\r\n                    </TabPane>\r\n                </TabContent>\r\n            </Container>\r\n        );\r\n    }\r\n}\r\n","import React from 'react';\r\n\r\nimport { Col, FormGroup, Label } from 'reactstrap';\r\nimport uniqueId from 'react-html-id';\r\n\r\nexport default class TextAreaInput extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.handleChange = this.handleChange.bind(this);\r\n\r\n    uniqueId.enableUniqueIds(this);\r\n  }\r\n\r\n  handleChange(event) {\r\n    const val = event.target.value;\r\n    this.props.onChange(val);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <FormGroup row>\r\n        <Label\r\n          hidden={this.props.nolabel}\r\n          sm={this.props.large ? 2 : 6}\r\n          for={this.nextUniqueId()}\r\n        >\r\n          {this.props.label}\r\n        </Label>\r\n        <Col sm={this.props.nolabel ? 12 : this.props.large ? 10 : 6}>\r\n          <textarea\r\n            id={this.lastUniqueId()}\r\n            style={{ width: '100%' }}\r\n            rows={this.props.rows}\r\n            value={this.props.value}\r\n            placeholder={this.props.placeholder}\r\n            onChange={this.handleChange}\r\n          />\r\n        </Col>\r\n      </FormGroup>\r\n    );\r\n  }\r\n}\r\n","import React from 'react';\r\nimport TextInput from '../inputs/TextInput';\r\nimport NumberInput from '../inputs/NumberInput';\r\n//import BooleanInput from '../inputs/BooleanInput';\r\nimport DateTimeInput from '../inputs/DateTimeInput';\r\n\r\nimport {Container, Form, Table} from 'reactstrap';\r\n\r\nimport ReactDataSheet from 'react-datasheet';\r\nimport TextAreaInput from \"../inputs/TextAreaInput\";\r\n\r\nexport default class InitForm extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        // Default values....\r\n        this.state = {\r\n            grid: this.getDataGrid()\r\n        };\r\n\r\n        this.getDataGrid = this.getDataGrid.bind(this);\r\n        this.updateTitle = this.updateTitle.bind(this);\r\n        this.updateNTeams = this.updateNTeams.bind(this);\r\n        this.updateNTables = this.updateNTables.bind(this);\r\n        this.updateStartTime = this.updateStartTime.bind(this);\r\n        this.updateEndTime = this.updateEndTime.bind(this);\r\n        this.updateNDays = this.updateNDays.bind(this);\r\n        this.updateDays = this.updateDays.bind(this);\r\n        this.updatePilot = this.updatePilot.bind(this);\r\n        this.updateTeamNames = this.updateTeamNames.bind(this);\r\n        this.updateNPracs = this.updateNPracs.bind(this);\r\n\r\n        this.handleChange = this.handleChange.bind(this);\r\n    }\r\n\r\n    getDataGrid() {\r\n        let grid = [];\r\n        for (let i = 0; i < this.props.event.days.length; i++) {\r\n            grid.push([]);\r\n            grid[i].push({value: \"Name of Day \" + (i + 1), readOnly: true});\r\n            grid[i].push({value: this.props.event.days[i]});\r\n        }\r\n        return grid;\r\n    }\r\n\r\n    updateTitle(newTitle) {\r\n        let data = this.props.event;\r\n        data.title = newTitle;\r\n        this.handleChange(data);\r\n    }\r\n\r\n    updateNTeams(newN) {\r\n        let data = this.props.event;\r\n        data.nTeams = newN;\r\n        this.handleChange(data);\r\n    }\r\n\r\n    updateNPracs(newN) {\r\n        let data = this.props.event;\r\n        data.nPracs = newN;\r\n        this.handleChange(data);\r\n    }\r\n\r\n    updateStartTime(newTime) {\r\n        let data = this.props.event;\r\n        data.startTime = newTime;\r\n        this.handleChange(data);\r\n    }\r\n\r\n    updateEndTime(newTime) {\r\n        let data = this.props.event;\r\n        data.endTime = newTime;\r\n        this.handleChange(data);\r\n    }\r\n\r\n    updateDays(changes) {\r\n        const grid = this.state.grid.map(row => [...row]);\r\n        changes.forEach(({cell, row, col, value}) => {\r\n            grid[row][col] = {...grid[row][col], value}\r\n        });\r\n        this.setState({grid});\r\n        let A = [];\r\n        for (let i = 0; i < grid.length; i++) {\r\n            A.push(grid[i][1].value);\r\n        }\r\n        let S = this.props.event;\r\n        S.days = A;\r\n        this.props.onChange(S);\r\n    }\r\n\r\n    updateNDays(value) {\r\n        let E = this.props.event;\r\n        E.nDays = value;\r\n        E.endTime.mins = (E.endTime.mins % (24 * 60)) + ((value - 1) * 24 * 60);\r\n        this.setState({grid: this.getDataGrid()});\r\n        this.handleChange(E);\r\n    }\r\n\r\n    updateNTables(value) {\r\n        let E = this.props.event;\r\n        E.nTables = value;\r\n        this.handleChange(E);\r\n    }\r\n\r\n    updatePilot(value) {\r\n        let E = this.props.event;\r\n        E.pilot = value;\r\n        this.handleChange(E);\r\n    }\r\n\r\n    updateTeamNames(e) {\r\n        let E = this.props.event;\r\n        E.tempNames = e;\r\n        this.handleChange(E);\r\n    }\r\n\r\n    handleChange(data) {\r\n        if (this.props.onChange) this.props.onChange(data);\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <Container>\r\n                <Form onSubmit={this.handleSubmit}>\r\n                    <TextInput large label=\"Title: \" value={this.props.event.title} onChange={this.updateTitle}/>\r\n                    <NumberInput large min=\"4\" label=\"Number of teams: \" value={this.props.event.nTeams}\r\n                                 onChange={this.updateNTeams}/>\r\n                    <NumberInput large min=\"2\" step=\"2\" label=\"Number of competition tables: \"\r\n                                 value={this.props.event.nTables} onChange={this.updateNTables}/>\r\n                    <NumberInput large min=\"0\" step=\"1\" label=\"Number of practice rounds: \"\r\n                                 value={this.props.event.nPracs} onChange={this.updateNPracs}/>\r\n                    {/*<BooleanInput label=\"Pilot judging program?\" large value={this.props.event.pilot}\r\n                                  onChange={this.updatePilot}/>*/}\r\n                    <NumberInput label=\"Number of days\" large min={1} value={this.props.event.days.length}\r\n                                 onChange={this.updateNDays}/>\r\n                    <ReactDataSheet\r\n                        data={this.state.grid}\r\n                        valueRenderer={(cell) => cell.value}\r\n                        sheetRenderer={(props) => (\r\n                            <Table className=\"datagrid-custom\">\r\n                                <tbody>\r\n                                {props.children}\r\n                                </tbody>\r\n                            </Table>\r\n                        )}\r\n                        onCellsChanged={(changes) => this.updateDays(changes)}\r\n                    />\r\n                    <DateTimeInput large label=\"Start time: \" value={this.props.event.startTime}\r\n                                   onChange={this.updateStartTime}/>\r\n                    <DateTimeInput large label=\"End time: \" value={this.props.event.endTime}\r\n                                   onChange={this.updateEndTime}/>\r\n                    <TextAreaInput large label=\"Team names:\" rows={10}\r\n                                   placeholder=\"List of teams: (Name) OR (Number,Name) OR (Number,Name,Affiliation) OR (Number,Name,Affiliation,Pit)\"\r\n                                   onChange={this.updateTeamNames}/>\r\n                </Form>\r\n            </Container>\r\n        );\r\n    }\r\n}\r\n","import React from 'react';\r\n\r\nimport {\r\n    Navbar,\r\n    NavbarBrand,\r\n    NavbarToggler,\r\n    Collapse,\r\n    Nav,\r\n    NavItem,\r\n    NavLink,\r\n    UncontrolledDropdown,\r\n    DropdownToggle,\r\n    DropdownMenu,\r\n    DropdownItem\r\n} from 'reactstrap';\r\n\r\nimport ReactTooltip from 'react-tooltip'\r\n\r\nimport MdInfoOutline from 'react-icons/lib/md/info-outline'\r\nimport MdFileDownload from 'react-icons/lib/md/file-download'\r\nimport MdFileUpload from 'react-icons/lib/md/file-upload'\r\n\r\n// import firstlogo from \"../resources/firstlogo.png\"\r\nimport PreComputedImages from \"../resources/images.json\";\r\n\r\nexport default class TopBar extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            isOpen: false,\r\n            advanced: false,\r\n        };\r\n\r\n        this.toggle = this.toggle.bind(this);\r\n        this.onFileChange = this.onFileChange.bind(this);\r\n    }\r\n\r\n    toggle() {\r\n        this.setState({\r\n            isOpen: !this.state.isOpen\r\n        });\r\n    }\r\n\r\n    onFileChange(e, f) {\r\n        let file = f || e.target.files[0];\r\n        let reader = new FileReader();\r\n        console.log(file);\r\n\r\n        reader.onload = () => {\r\n            this.props.onLoad(reader.result);\r\n        };\r\n        reader.readAsText(file);\r\n        // reader.readAsDataURL(file);\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <Navbar color=\"light\" light expand=\"md\">\r\n                <NavbarBrand><img alt=\"\" width=\"80px\" src={PreComputedImages.firstlogo}/></NavbarBrand>\r\n                <NavbarBrand>FLL in a Box\r\n                    <small>Version {this.props.version}</small>\r\n                </NavbarBrand>\r\n                <NavbarToggler onClick={this.toggle}/>\r\n                <Collapse isOpen={this.state.isOpen} navbar>\r\n                    <Nav className=\"ml-auto\" navbar>\r\n                        <NavItem>\r\n                            <NavLink>\r\n                            </NavLink>\r\n                        </NavItem>\r\n                        <UncontrolledDropdown nav inNavbar>\r\n                            <DropdownToggle data-tip=\"Info\" nav caret>\r\n                                <MdInfoOutline size={20}/>\r\n                            </DropdownToggle>\r\n                            <DropdownMenu right>\r\n                                <a target=\"_blank\" rel=\"noopener noreferrer\"\r\n                                   href={\"https://github.com/frewes/tournament-in-a-box\"}>\r\n                                    <DropdownItem>Manual</DropdownItem>\r\n                                </a>\r\n                                <a target=\"_blank\" rel=\"noopener noreferrer\"\r\n                                   href={\"https://goo.gl/forms/rJOM0xa24MVZqVhh2\"}>\r\n                                    <DropdownItem>Report an issue...</DropdownItem>\r\n                                </a>\r\n                                <DropdownItem divider/>\r\n                                <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"mailto:fred@firstaustralia.org\">\r\n                                    <DropdownItem>Contact developer</DropdownItem>\r\n                                </a>\r\n                            </DropdownMenu>\r\n                        </UncontrolledDropdown>\r\n                        <NavItem data-tip=\"Save current progress\" onClick={() => {\r\n                            this.props.onSave();\r\n                        }}><NavLink><MdFileDownload size={20}/></NavLink></NavItem>\r\n                        <ReactTooltip place=\"bottom\" type=\"light\" effect=\"solid\"/>\r\n                        <NavItem data-tip=\"Load previous schedule\"><NavLink><label><MdFileUpload size={20}/><input\r\n                            type=\"file\" accept=\".schedule\" onChange={this.onFileChange} hidden\r\n                            ref=\"input\"/></label></NavLink></NavItem>\r\n                    </Nav>\r\n                </Collapse>\r\n            </Navbar>\r\n        );\r\n    }\r\n}\r\n","import { TYPES } from '../api/SessionTypes';\r\nimport { DateTime } from '../api/DateTime';\r\n\r\nimport Instance from './Instance';\r\nimport { shuffle, hasDone } from './utilities';\r\n\r\nexport class Scheduler {\r\n  constructor(E) {\r\n    this.event = E;\r\n  }\r\n\r\n  empty() {\r\n    this.event.sessions.forEach(session => {\r\n      session.schedule = [];\r\n      session.usesSurrogates = false;\r\n    });\r\n    this.event.teams.forEach(team => {\r\n      team.schedule = [];\r\n      team.isSurrogate = false;\r\n    });\r\n  }\r\n\r\n  evaluate() {\r\n    this.event.errors = 0;\r\n    // Add errors for each session (errors due to empty spots)\r\n    this.event.sessions.forEach(session => {\r\n      session.errors = 0;\r\n      session.schedule.forEach(instance => {\r\n        session.errors +=\r\n          instance.teams.length - instance.teams.filter(t => t).length;\r\n      });\r\n      this.event.errors += session.errors;\r\n    });\r\n    // Adelaide Ken bug: Teams getting assigned weirdly. Count the number of these errors.\r\n    this.event.teams.forEach(team => {\r\n      for (let j = 0; j < team.schedule.length; j++) {\r\n        if (team.schedule[j].teams.indexOf(team.id) === -1) {\r\n          this.event.errors++;\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  buildAllTables() {\r\n    this.empty();\r\n    let willWork = null;\r\n    this.event.sessions.sort((a, b) => {\r\n      if (a.id === b.id) {\r\n        if (a.type.priority === b.type.priority)\r\n          return a.startTime.mins - b.startTime.mins;\r\n        return a.type.priority - b.type.priority;\r\n      } else {\r\n        return a.id - b.id;\r\n      }\r\n    });\r\n    this.event.sessions.forEach(session => {\r\n      // Make sure the start time isn't in a break\r\n      if (session.type !== TYPES.BREAK)\r\n        session.actualStartTime.mins = this.event.timeInc(\r\n          session.startTime,\r\n          0,\r\n          session.id\r\n        );\r\n      let end = -Infinity;\r\n      if (\r\n        !(\r\n          session.type === TYPES.MATCH_ROUND ||\r\n          session.type === TYPES.MATCH_ROUND_PRACTICE\r\n        )\r\n      ) {\r\n        end = this.tableSession(session);\r\n        session.actualEndTime.mins = end;\r\n        if (session.type !== TYPES.BREAK && end > session.endTime.mins) {\r\n          if (willWork) willWork = willWork + ', ' + session.name;\r\n          else willWork = session.name;\r\n        }\r\n      }\r\n    });\r\n    let T = TYPES.MATCH_ROUND_PRACTICE;\r\n    let end = -Infinity;\r\n    let offset = 0;\r\n    let locOffset = 0;\r\n    this.event.sessions\r\n      .filter(s => s.type === T)\r\n      .forEach(session => {\r\n        if (session.actualStartTime.mins < end)\r\n          session.actualStartTime.mins = end;\r\n        end = this.tableSession(session, offset, locOffset);\r\n        session.actualEndTime.mins = end;\r\n        if (session.schedule[session.schedule.length - 1].loc === 0)\r\n          locOffset = 1;\r\n        else locOffset = 0;\r\n        offset += session.schedule.length;\r\n        if (end > session.endTime.mins) {\r\n          if (willWork) willWork = willWork + ', ' + session.name;\r\n          else willWork = session.name;\r\n        }\r\n      });\r\n    T = TYPES.MATCH_ROUND;\r\n    this.event.sessions\r\n      .filter(s => s.type === T)\r\n      .forEach(session => {\r\n        if (session.actualStartTime.mins < end)\r\n          session.actualStartTime.mins = end;\r\n        end = this.tableSession(session, offset, locOffset);\r\n        session.actualEndTime.mins = end;\r\n        if (session.schedule[session.schedule.length - 1].loc === 0)\r\n          locOffset = 1;\r\n        else locOffset = 0;\r\n        offset += session.schedule.length;\r\n        if (end > session.endTime.mins) {\r\n          if (willWork) willWork = willWork + ', ' + session.name;\r\n          else willWork = session.name;\r\n        }\r\n      });\r\n  }\r\n\r\n  /**\r\n     Sets up all the timeslots for the given session.\r\n     numOffset: offset at which to start counting (facilitates round numbering)\r\n     @return Returns the time the schedule is finished (i.e. the end time of the last event)\r\n     */\r\n  tableSession(session, numOffset = 0, locD = 0) {\r\n    let teams = [];\r\n    this.event.teams.forEach(team => {\r\n      if (session.type !== TYPES.JUDGING || !team.excludeJudging)\r\n        teams.push(team);\r\n    });\r\n    if (session.type === TYPES.BREAK) session.nSims = teams.length;\r\n    let now = new DateTime(session.actualStartTime.mins);\r\n    let L = Math.ceil(teams.length / session.nSims);\r\n    let lastNTeams = teams.length % session.nSims;\r\n    lastNTeams = lastNTeams === 0 ? session.nSims : lastNTeams;\r\n    session.schedule = new Array(L);\r\n\r\n    // Figure out how many rounds to make extra long\r\n    let everyN = session.extraTimeEvery > 0 ? session.extraTimeEvery : Infinity;\r\n    let extraTimeTeams = teams.filter(x => x.extraTime).length;\r\n\r\n    let roundsSinceExtra = 0;\r\n    let flag = false;\r\n\r\n    let extraRoundsNeeded = Math.ceil(extraTimeTeams / session.nSims);\r\n    let extraRoundsMade =\r\n      (session.extraTimeFirst ? 1 : 0) +\r\n      (session.extraTimeEvery > 0 ? L / everyN : 0);\r\n    if (extraRoundsMade < extraRoundsNeeded) {\r\n      everyN = (L + 1) / (extraRoundsNeeded + 1);\r\n      everyN += Math.round(Math.random() * 2);\r\n      roundsSinceExtra += Math.floor(Math.random() * L);\r\n      flag = true;\r\n    }\r\n    let extraRounds = 0;\r\n    if (session.type === TYPES.BREAK) everyN = Infinity;\r\n    for (let i = 0; i < L; i++) {\r\n      let d = Math.floor(session.nLocs / session.nSims);\r\n      let locOffset = ((i + locD) % d) * session.nSims;\r\n      if (i % L < L - 1) {\r\n        // Check that the schedule will finish...\r\n        let whenDone = this.event.timeInc(now, session.len, session.id);\r\n        if (whenDone !== now.mins + session.len) now = new DateTime(whenDone);\r\n        session.schedule[i] = new Instance(\r\n          session.id,\r\n          i + 1 + numOffset,\r\n          now,\r\n          new Array(session.nSims),\r\n          locOffset\r\n        );\r\n        now = new DateTime(\r\n          this.event.timeInc(\r\n            now,\r\n            session.len + session.buf - session.overlap,\r\n            session.id\r\n          )\r\n        );\r\n        roundsSinceExtra++;\r\n        if ((i === 0 && session.extraTimeFirst) || roundsSinceExtra >= everyN) {\r\n          if (!(flag && extraRounds >= extraRoundsNeeded)) {\r\n            session.schedule[i].extra = true;\r\n            now = new DateTime(\r\n              this.event.timeInc(now, this.event.extraTime, session.id)\r\n            );\r\n            roundsSinceExtra = 0;\r\n            extraRounds++;\r\n          }\r\n        }\r\n      } else {\r\n        session.schedule[i] = new Instance(\r\n          session.id,\r\n          i + 1 + numOffset,\r\n          now,\r\n          new Array(lastNTeams),\r\n          locOffset\r\n        );\r\n        now = new DateTime(\r\n          now.mins + session.len + session.buf - session.overlap\r\n        );\r\n        roundsSinceExtra++;\r\n        if (roundsSinceExtra >= everyN) {\r\n          if (flag && extraRounds >= extraRoundsNeeded) {\r\n            console.log('Enough rounds added');\r\n          } else {\r\n            session.schedule[i].extra = true;\r\n            now = new DateTime(now.mins + this.event.extraTime);\r\n          }\r\n        }\r\n      }\r\n      // Not sure why this existed\r\n      // for (var t = 0; t < session.schedule[i].teams.length; t++) {\r\n      //     session.schedule[i].teams[t] = null;\r\n      // }\r\n    }\r\n    this.sortThingsOut();\r\n    return now.mins;\r\n  }\r\n\r\n  // Make sure everything is consistent.\r\n  sortThingsOut() {\r\n    this.event.sessions.forEach(session => {\r\n      session.schedule.forEach(instance => {\r\n        instance.time.days = this.event.days;\r\n      });\r\n    });\r\n  }\r\n\r\n  fillAllTables() {\r\n    this.initialFill();\r\n    this.swapFill();\r\n  }\r\n\r\n  initialFill() {\r\n    let oneSetOfTeams = this.event.teams.slice();\r\n    shuffle(oneSetOfTeams);\r\n    this.event.sessions.forEach(session => {\r\n      let teams = [];\r\n      shuffle(oneSetOfTeams).forEach(team => {\r\n        if (session.type !== TYPES.JUDGING || !team.excludeJudging)\r\n          teams.push(team);\r\n      });\r\n      session.schedule.forEach(instance => this.fillInstance(instance, teams));\r\n    });\r\n  }\r\n\r\n  fillInstance(instance, teams) {\r\n    for (let t = 0; t < instance.teams.length; t++) {\r\n      let T = -1;\r\n      for (let k = 0; k < teams.length; k++) {\r\n        if (this.event.canDo(teams[k], instance)) {\r\n          T = k;\r\n          break;\r\n        }\r\n      }\r\n      if (T !== -1) {\r\n        let team = teams.splice(T, 1)[0];\r\n        instance.teams[t] = team.id;\r\n        team.schedule.push(instance);\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n     Go through all sessions in the event and fix up errors through first-order swapping.\r\n     **/\r\n  swapFill(event) {\r\n    // 10 attempts.  Why not?\r\n    for (let j = 0; j < 10; j++) {\r\n      let fixed = 0;\r\n      this.evaluate();\r\n      this.event.sessions\r\n        .filter(s => s.errors > 0)\r\n        .forEach(s => {\r\n          fixed += this.swapFillSession(s, this.event.teams);\r\n        });\r\n      if (fixed === 0) break;\r\n    }\r\n  }\r\n\r\n  /**\r\n     Go through a given session, fix all errors with first-order swapping.\r\n     TODO: deal with the case where instances > 1?  How to do this?\r\n     @return Number of errors fixed\r\n     **/\r\n  swapFillSession(session, teams) {\r\n    let fixed = 0;\r\n    // Make list of teams that aren't in this session enough (lost set)\r\n    let lostTeams = [];\r\n    for (let i = 0; i < teams.length; i++)\r\n      if (hasDone(teams[i], session.id) < session.instances)\r\n        lostTeams.push(teams[i]);\r\n    // Find every empty slot in the schedule\r\n    session.schedule.forEach(instance_A => {\r\n      for (let j = 0; j < instance_A.teams.length; j++) {\r\n        if (instance_A.teams[j] != null) continue;\r\n        // Found empty slot!\r\n        // Now find a team A from the full set that can do this time\r\n        for (let tA = 0; tA < teams.length; tA++) {\r\n          if (!this.event.canDo(teams[tA], instance_A, session.id)) continue;\r\n          // Now, find a team B from the lost set that can take team A's instance\r\n          let instance_B = null;\r\n          for (let x = 0; x < teams[tA].schedule.length; x++) {\r\n            if (teams[tA].schedule[x].session_id === instance_A.session_id) {\r\n              instance_B = teams[tA].schedule.splice(x, 1)[0];\r\n              break;\r\n            }\r\n          }\r\n          let f = fixed;\r\n          if (instance_B == null) {\r\n            continue;\r\n            // Team A can just do instance A; no swap required, add the team in.\r\n            // instance_A.teams[j] = teams[tA].uid;\r\n            // teams[tA].schedule.push(instance_A);\r\n            // fixed++;\r\n            // break;\r\n          }\r\n          for (let tB = 0; tB < lostTeams.length; tB++) {\r\n            if (!this.event.canDo(lostTeams[tB], instance_B)) continue;\r\n            // Found a team that can swap with A!\r\n            // Now, swap teams A and B\r\n            // Add instanceA to teamA\r\n            instance_A.teams[j] = teams[tA].id;\r\n            teams[tA].schedule.push(instance_A);\r\n            // Add instanceB to teamB\r\n            for (let idx = 0; idx < instance_B.teams.length; idx++) {\r\n              if (instance_B.teams[idx] === teams[tA].id) {\r\n                instance_B.teams[idx] = lostTeams[tB].id;\r\n              }\r\n            }\r\n            lostTeams[tB].schedule.push(instance_B);\r\n            lostTeams.splice(tB, 1);\r\n            fixed++;\r\n            break;\r\n          }\r\n          if (f === fixed) teams[tA].schedule.push(instance_B);\r\n          else break;\r\n        }\r\n      }\r\n    });\r\n    return fixed;\r\n  }\r\n}\r\n","import React from 'react';\r\n\r\nimport {Table} from 'reactstrap';\r\n\r\nimport { TYPES } from '../api/SessionTypes';\r\n\r\nexport default class DayScheduleView extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.getItems = this.getItems.bind(this);\r\n    }\r\n\r\n\r\n    getItems() {\r\n        let sessions = this.props.event.sessions;\r\n        let sorted = sessions.sort((a, b) => {\r\n            return a.actualStartTime.mins - b.actualStartTime.mins\r\n        });\r\n        let items = [];\r\n        for (let i = 0; i < sorted.length; i++) {\r\n            items.push({\r\n                _id: i + 1,\r\n                sTime: sorted[i].actualStartTime.time,\r\n                eTime: sorted[i].actualEndTime.time,\r\n                contents: sorted[i].name,\r\n                break: sorted[i].type === TYPES.BREAK\r\n            });\r\n        }\r\n        return items;\r\n    }\r\n\r\n    render() {\r\n        let items = this.getItems();\r\n        return (<div>\r\n            <Table>\r\n                <thead>\r\n                <tr>\r\n                    <th>Start</th>\r\n                    <th>End</th>\r\n                    <th>Event</th>\r\n                </tr>\r\n                </thead>\r\n                <tbody>\r\n                {items.map(x => {\r\n                    return (\r\n                        <tr key={x._id} className={x.break ? \"break\" : \"\"}>\r\n                            <td>{x.sTime}</td>\r\n                            <td>{x.eTime}</td>\r\n                            <td>{x.contents}</td>\r\n                        </tr>);\r\n                })}\r\n                </tbody>\r\n            </Table>\r\n        </div>)\r\n    }\r\n}\r\n","import React from 'react';\r\nimport ReactDataSheet from 'react-datasheet';\r\n\r\nimport {Table} from 'reactstrap';\r\n\r\n\r\nexport default class SingleScheduleView extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            swapee: null\r\n        }\r\n\r\n        this.select = this.select.bind(this);\r\n    }\r\n\r\n    select(i, j) {\r\n        if (!this.props.editable) return; // Only swap if \"editable\"\r\n        if (i === 0 || j < 2) return; // Don't swap headers or times\r\n        let g = this.props.data;\r\n        let x = g[i][j];\r\n        if (!this.state.swapee) {\r\n            this.setState({swapee: x});\r\n        } else if (this.state.swapee === x) {\r\n            this.setState({swapee: null});\r\n        } else {\r\n            // SWAP\r\n            this.props.onSwap(this.props.id, this.state.swapee, x);\r\n            this.setState({swapee: null});\r\n            // alert(\"Not yet implemented\");\r\n        }\r\n    }\r\n\r\n    renderAsDataGrid() {\r\n        return (\r\n            <div>\r\n                <strong>{this.props.session.name}</strong>\r\n                <ReactDataSheet\r\n                    data={this.props.data}\r\n                    valueRenderer={(cell) => cell.value}\r\n                    sheetRenderer={(props) => (\r\n                        <Table className=\"datagrid-custom\">\r\n                            <tbody>\r\n                            {props.children}\r\n                            </tbody>\r\n                        </Table>\r\n                    )}\r\n                />\r\n            </div>\r\n        );\r\n    }\r\n\r\n    renderAsTable() {\r\n        return (\r\n            <div>\r\n                <strong>{this.props.session.name}</strong>\r\n                <Table className={this.props.editable ? \"datagrid-custom unselectable\" : \"datagrid-custom\"}>\r\n                    <tbody>\r\n                    {this.props.data.map((x, i) =>\r\n                        <tr key={i}>{x.map((y, j) =>\r\n                            <td onClick={() => this.select(i, j)} colSpan={y.colSpan}\r\n                                className={(this.state.swapee === y) ? y.className + \" selected\" : y.className}\r\n                                key={j}>{y.value}</td>)\r\n                        }</tr>)\r\n                    }\r\n                    </tbody>\r\n                </Table>\r\n            </div>\r\n        );\r\n\r\n    }\r\n\r\n    render() {\r\n        return this.renderAsTable();\r\n    }\r\n}","import React from 'react';\r\nimport ReactDataSheet from 'react-datasheet';\r\n\r\nimport {Table} from 'reactstrap';\r\n\r\n\r\nexport default class IndivScheduleView extends React.Component {\r\n\r\n    renderAsDataSheet() {\r\n        return (\r\n            <div>\r\n                <strong>Individual Schedules</strong>\r\n                <ReactDataSheet\r\n                    data={this.props.data}\r\n                    valueRenderer={(cell) => cell.value}\r\n                    sheetRenderer={(props) => (\r\n                        <Table className=\"datagrid-custom\">\r\n                            <tbody>\r\n                            {props.children}\r\n                            </tbody>\r\n                        </Table>\r\n                    )}\r\n                />\r\n            </div>\r\n        );\r\n    }\r\n\r\n    renderAsTable() {\r\n        return (\r\n            <div>\r\n                <strong>Individual Schedules</strong>\r\n                <Table className={\"datagrid-custom\"}>\r\n                    <tbody>\r\n                    {this.props.data.map((x, i) =>\r\n                        <tr key={i}>{x.map((y, j) =>\r\n                            <td colSpan={y.colSpan} className={y.className} key={j}>{y.value}</td>)\r\n                        }</tr>)\r\n                    }\r\n                    </tbody>\r\n                </Table>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    render() {\r\n        return this.renderAsTable();\r\n    }\r\n\r\n}","import React from 'react';\r\n\r\nimport { Input, Col, FormGroup, Label, Button } from 'reactstrap';\r\nimport uniqueId from 'react-html-id';\r\nimport FaTimesCircleO from 'react-icons/lib/fa/times-circle-o';\r\n\r\nexport default class VolunteerInput extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.handleCountChange = this.handleCountChange.bind(this);\r\n    this.handleNameChange = this.handleNameChange.bind(this);\r\n    this.updateVol = this.updateVol.bind(this);\r\n\r\n    uniqueId.enableUniqueIds(this);\r\n  }\r\n\r\n  handleCountChange(event) {\r\n    let V = this.props.vol;\r\n    let newCount = event.target.value;\r\n    V.staff = V.staff.slice(0, newCount - 1);\r\n    newCount -= V.staff.length;\r\n    while (newCount-- > 0) V.staff.push('');\r\n    this.props.onChange(V);\r\n  }\r\n\r\n  handleNameChange(event) {\r\n    let V = this.props.vol;\r\n    V.name = event.target.value;\r\n    this.props.onChange(V);\r\n  }\r\n\r\n  updateVol(key, event) {\r\n    let V = this.props.vol;\r\n    V.staff[key] = event.target.value;\r\n    this.props.onChange(V);\r\n  }\r\n\r\n  render() {\r\n    return this.props.editable ? (\r\n      <FormGroup>\r\n        <FormGroup row>\r\n          <Col sm={3}>\r\n            <Input\r\n              type='text'\r\n              value={this.props.vol.name}\r\n              onChange={this.handleNameChange}\r\n            />\r\n          </Col>\r\n          <Col sm={3}>\r\n            <Input\r\n              type='number'\r\n              min={1}\r\n              value={this.props.vol.staff.length}\r\n              onChange={this.handleCountChange}\r\n            />\r\n          </Col>\r\n          <Col sm={5}>\r\n            {this.props.vol.staff.map((v, i) => {\r\n              return (\r\n                <Input\r\n                  key={i}\r\n                  type='text'\r\n                  value={v ? v : ''}\r\n                  onChange={e => {\r\n                    this.updateVol(i, e);\r\n                  }}\r\n                />\r\n              );\r\n            })}\r\n          </Col>\r\n          <Col sm={1}>\r\n            <Button color='danger' onClick={this.props.onDelete}>\r\n              <FaTimesCircleO size={20} />\r\n            </Button>\r\n          </Col>\r\n        </FormGroup>\r\n      </FormGroup>\r\n    ) : (\r\n      <FormGroup>\r\n        <FormGroup row>\r\n          <Label sm={4} for={this.nextUniqueId()}>\r\n            {this.props.vol.name} ({this.props.vol.staff.length})\r\n          </Label>\r\n          <Col sm={8}>\r\n            {this.props.vol.staff.map((v, i) => {\r\n              return (\r\n                <Input\r\n                  key={i}\r\n                  type='text'\r\n                  value={v ? v : ''}\r\n                  onChange={e => {\r\n                    this.updateVol(i, e);\r\n                  }}\r\n                />\r\n              );\r\n            })}\r\n          </Col>\r\n        </FormGroup>\r\n      </FormGroup>\r\n    );\r\n  }\r\n}\r\n","import React, {Component} from 'react';\r\n\r\nimport {Container, FormGroup, Alert, Col, Row} from 'reactstrap';\r\nimport VolunteerInput from \"../inputs/VolunteerInput\";\r\nimport {saveToFile_csv} from \"../scheduling/utilities.js\";\r\n\r\nexport default class VolunteerView extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            editable: false\r\n        };\r\n\r\n        this.toggleEditable = this.toggleEditable.bind(this);\r\n        this.onChange = this.onChange.bind(this);\r\n        this.downloadTemplate = this.downloadTemplate.bind(this);\r\n        this.deleteVol = this.deleteVol.bind(this);\r\n        this.importVols = this.importVols.bind(this);\r\n    }\r\n\r\n    toggleEditable() {\r\n        this.setState({editable: !this.state.editable});\r\n    }\r\n\r\n    onChange(v, i) {\r\n        let V = this.props.data;\r\n\r\n        V[i] = v;\r\n        this.props.onChange(V);\r\n    }\r\n\r\n    downloadTemplate() {\r\n        let content = \"role,names\\n\";\r\n        this.props.data.forEach(v => {\r\n            content += v.name + \",\"\r\n            v.staff.forEach((s, i) => {\r\n                if (s === \"\")\r\n                    content += \"Name \" + (i + 1) + \",\";\r\n                else\r\n                    content += s + \",\"\r\n            });\r\n            content += \"\\n\";\r\n        });\r\n        saveToFile_csv(\"volunteer_template.csv\", content);\r\n    }\r\n\r\n    deleteVol(idx) {\r\n        let V = this.props.data;\r\n        V.splice(idx, 1);\r\n        this.props.onChange(V);\r\n    }\r\n\r\n    importVols(e, f) {\r\n        let file = f || e.target.files[0];\r\n        let reader = new FileReader();\r\n        reader.onload = (e) => {\r\n            let V = [];\r\n            let lines = reader.result.split(\"\\n\");\r\n            if (lines[0].startsWith(\"role,names\"))\r\n                lines.shift();\r\n            lines.forEach(l => {\r\n                let fields = l.split(',');\r\n                if (!fields) return;\r\n                console.log(fields);\r\n                let name = fields.shift();\r\n                console.log(fields);\r\n                if (!name) return;\r\n                V.push({name: name, staff: fields.filter(f => f !== \"\")});\r\n            });\r\n            console.log(lines);\r\n            this.props.onChange(V);\r\n        };\r\n        reader.readAsText(file);\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <Container>\r\n                <br/>\r\n                <FormGroup>\r\n                    <Row>\r\n                        <Col sm={4}>\r\n                            <Alert onClick={this.toggleEditable}\r\n                                   color={this.state.editable ? \"success\" : \"danger\"}>Editable?</Alert>\r\n                        </Col>\r\n                        <Col sm={4}>\r\n                            <label onClick={this.downloadTemplate}>\r\n                                <Alert color=\"info\">Download sample template</Alert>\r\n                            </label>\r\n                        </Col>\r\n                        <Col sm={4}>\r\n                            <label>\r\n                                <Alert>Import from template</Alert>\r\n                                <input type=\"file\" accept=\".csv\" hidden ref=\"input\" onChange={this.importVols}/>\r\n                            </label>\r\n                        </Col>\r\n                    </Row>\r\n                    {this.props.data.map((vol, i) => {\r\n\r\n                        return (\r\n                            <VolunteerInput key={i} vol={vol} editable={this.state.editable}\r\n                                            onDelete={() => this.deleteVol(i)} onChange={(v) => this.onChange(v, i)}/>\r\n                        );\r\n                    })}\r\n                </FormGroup>\r\n            </Container>\r\n        );\r\n    }\r\n}\r\n","import React, {Component} from 'react';\r\n\r\nimport {Container, Row, Alert, Card} from 'reactstrap';\r\n\r\nexport default class SponsorView extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.addSponsor = this.addSponsor.bind(this);\r\n        this.deleteSponsor = this.deleteSponsor.bind(this);\r\n    }\r\n\r\n    addSponsor(e, f) {\r\n        let file = f || e.target.files[0];\r\n        console.log(file);\r\n        let reader = new FileReader();\r\n        reader.onload = (e) => {\r\n            let E = this.props.data;\r\n            let arr = file.name.split('.');\r\n            let extension = arr.pop();\r\n            E.addLocalSponsor({\r\n                name: arr.join('.'),\r\n                data: reader.result,\r\n                extension: extension\r\n            });\r\n            console.log(E.sponsors);\r\n            this.props.handleChange(E.sponsors);\r\n        };\r\n        reader.readAsDataURL(file);\r\n    }\r\n\r\n    deleteSponsor(i) {\r\n        // let i = e.target.idx;\r\n        // console.log(e.target);\r\n        console.log(i);\r\n        let E = this.props.data;\r\n        E.deleteLocalSponsor(i);\r\n        this.props.handleChange(E.sponsors);\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <Container>\r\n                <Row><h1>National sponsors</h1></Row>\r\n                <Row>\r\n                    {this.props.data.sponsors.national.map((img, i) => {\r\n                        return (\r\n                            <Card key={i} sm={3}>\r\n                                <img idx={i} alt={img.name} src={img.data} height={100}/>\r\n                            </Card>\r\n                        );\r\n                    })}\r\n                    <br/>\r\n                </Row>\r\n                <Row><h1>Local sponsors</h1></Row>\r\n                <Row>\r\n                    <small>Click logo to delete (local only)</small>\r\n                </Row>\r\n                <Row>\r\n                    {this.props.data.sponsors.local.map((img, i) => {\r\n                        return (\r\n                            <Card onClick={() => this.deleteSponsor(i)} key={i} sm={12}>\r\n                                <img idx={i} alt={img.name} src={img.data} height={100}/>\r\n                            </Card>\r\n                        );\r\n                    })}\r\n                </Row>\r\n                <Row sm={12}>\r\n                    <label>\r\n                        <Alert color=\"success\">Add!</Alert>\r\n                        <input type=\"file\" accept=\"image/*\" hidden ref=\"input\" onChange={this.addSponsor}/>\r\n                    </label>\r\n                </Row>\r\n            </Container>\r\n        );\r\n    }\r\n}\r\n","import pdfMake from 'pdfmake/build/pdfmake';\r\nimport pdfFonts from 'pdfmake/build/vfs_fonts';\r\n\r\npdfMake.vfs = pdfFonts.pdfMake.vfs;\r\n\r\nexport class PdfDoc {\r\n  constructor(format, title, landscape) {\r\n    this._format = format;\r\n    this.imageDict = {\r\n      header: this._format.header,\r\n      logo1: this._format.logoTopLeft,\r\n      logo2: this._format.logoTopRight,\r\n      logo3: this._format.logoBotLeft,\r\n      logo4: this._format.logoBotRight\r\n    };\r\n    this.styleDict = {\r\n      header: {\r\n        fontSize: this._format.titleFontSize,\r\n        bold: true,\r\n        alignment: 'center'\r\n      },\r\n      footer: {\r\n        fontSize: this._format.baseFontSize + 2,\r\n        bold: true,\r\n        alignment: 'center',\r\n        color: 'grey'\r\n      },\r\n      header2: {\r\n        fontSize: this._format.titleFontSize + 2,\r\n        bold: true,\r\n        alignment: 'center'\r\n      },\r\n      signTitle: { fontSize: 64, bold: true, alignment: 'center' },\r\n      signSubtitle: {\r\n        fontSize: 44,\r\n        bold: true,\r\n        alignment: 'center',\r\n        color: 'grey'\r\n      },\r\n      certTitle: { fontSize: 52, bold: true, alignment: 'center' },\r\n      certSubtitle: {\r\n        fontSize: 36,\r\n        bold: true,\r\n        alignment: 'center',\r\n        color: 'grey'\r\n      },\r\n      tablebody: {\r\n        fontSize: this._format.baseFontSize - 4,\r\n        alignment: 'center'\r\n      },\r\n      extraTime: { alignment: 'center', color: 'red' },\r\n      tablehead: {\r\n        fontSize: this._format.baseFontSize - 2,\r\n        bold: true,\r\n        alignment: 'center'\r\n      },\r\n      breakrow: { bold: true, alignment: 'center', fillColor: '#eeeeee' },\r\n      teamEntry: { fontSize: this._format.baseFontSize, alignment: 'center' }\r\n    };\r\n    // \"Doc\" object is used by pdf generator.\r\n    this.doc = {};\r\n    this.doc.content = [];\r\n    this.doc.header = {\r\n      text: title,\r\n      style: 'header',\r\n      //Left, top, right, bottom\r\n      margin: [0, 50, 0, 20]\r\n    };\r\n    this.doc.background = this.portraitBackground();\r\n    this.doc.footer = {\r\n      text: this.format.footerText,\r\n      style: 'footer',\r\n      margin: [0, 50, 0, 0]\r\n    };\r\n    this.doc.pageMargins = [40, 120, 40, 130];\r\n    this.doc.pageSize = 'A4';\r\n    this.doc.images = this.imageDict;\r\n    this.doc.styles = this.styleDict;\r\n    if (landscape) {\r\n      this.doc.pageOrientation = 'landscape';\r\n      this.doc.background = this.landscapeBackground();\r\n    }\r\n    this.filename = 'file';\r\n    this.blob = null;\r\n  }\r\n\r\n  get format() {\r\n    return this._format;\r\n  }\r\n\r\n  addContent(content) {\r\n    this.doc.content.push(content);\r\n  }\r\n\r\n  set filename(x) {\r\n    this._filename = x;\r\n  }\r\n\r\n  get filename() {\r\n    return this._filename;\r\n  }\r\n\r\n  empty() {\r\n    return this.doc.content.length === 0;\r\n  }\r\n\r\n  addPageBreak() {\r\n    this.doc.content.push({ text: ' ', pageBreak: 'after' });\r\n  }\r\n\r\n  DrawLine() {\r\n    this.doc.content.push({\r\n      canvas: [{ type: 'line', x1: 100, y1: 5, x2: 660, y2: 5, lineWidth: 3 }],\r\n      margin: [0, 60, 0, 10]\r\n    });\r\n  }\r\n\r\n  download(filename) {\r\n    if (!filename) filename = this.filename;\r\n    try {\r\n      pdfMake.createPdf(this.doc).download(filename);\r\n    } catch (err) {\r\n      alert('Error printing: ' + err.message);\r\n    }\r\n  }\r\n\r\n  open() {\r\n    try {\r\n      pdfMake.createPdf(this.doc).open();\r\n    } catch (err) {\r\n      alert('Error opening: ' + err.message);\r\n    }\r\n  }\r\n\r\n  getBlobPromise() {\r\n    return new Promise((resolve, reject) => {\r\n      try {\r\n      pdfMake.createPdf(this.doc).getBlob(blob => {\r\n        resolve(blob);\r\n      });\r\n    } catch (e)\r\n    {\r\n      console.error(e);\r\n      reject(e);\r\n    }\r\n    });\r\n  }\r\n\r\n  chomp() {\r\n    this.doc.content.splice(this.doc.content.length - 1);\r\n  }\r\n\r\n  portraitBackground() {\r\n    return [\r\n      // margin: [left, top, right, bottom]\r\n      {\r\n        image: 'header',\r\n        width: 530,\r\n        height: 20,\r\n        alignment: 'center',\r\n        margin: [0, 10, 0, 0]\r\n      },\r\n      {\r\n        table: {\r\n          widths: ['*', 'auto', '*'],\r\n          body: [\r\n            [\r\n              {\r\n                image: 'logo1',\r\n                fit: [100, 65],\r\n                margin: [50, 0, 0, 0],\r\n                alignment: 'left'\r\n              }, // Top left?\r\n              { text: '' },\r\n              {\r\n                image: 'logo2',\r\n                fit: [100, 65],\r\n                margin: [50, 0, 0, 0],\r\n                alignment: 'right'\r\n              } // Top right\r\n            ]\r\n          ]\r\n        },\r\n        layout: 'noBorders'\r\n      },\r\n      { text: '', margin: 310, alignment: 'center' },\r\n      {\r\n        table: {\r\n          widths: ['*', 'auto', '*'],\r\n          body: [\r\n            [\r\n              {\r\n                image: 'logo3',\r\n                fit: [100, 65],\r\n                margin: [50, 0, 0, 0],\r\n                alignment: 'left'\r\n              }, // Top left?\r\n              { text: '' },\r\n              {\r\n                image: 'logo4',\r\n                fit: [100, 65],\r\n                margin: [50, 0, 0, 0],\r\n                alignment: 'right'\r\n              } // Top right\r\n            ]\r\n          ]\r\n        },\r\n        layout: 'noBorders'\r\n      },\r\n      { image: 'header', width: 530, height: 20, alignment: 'center' }\r\n    ];\r\n  }\r\n\r\n  landscapeBackground() {\r\n    return [\r\n      // margin: [left, top, right, bottom]\r\n      {\r\n        image: 'header',\r\n        width: 800,\r\n        height: 20,\r\n        alignment: 'center',\r\n        margin: [0, 10, 0, 0]\r\n      },\r\n      {\r\n        table: {\r\n          widths: ['*', 'auto', '*'],\r\n          body: [\r\n            [\r\n              {\r\n                image: 'logo1',\r\n                fit: [100, 65],\r\n                margin: [50, 0, 0, 0],\r\n                alignment: 'left'\r\n              }, // Top left?\r\n              { text: '' },\r\n              {\r\n                image: 'logo2',\r\n                fit: [100, 65],\r\n                margin: [50, 0, 0, 0],\r\n                alignment: 'right'\r\n              } // Top right\r\n            ]\r\n          ]\r\n        },\r\n        layout: 'noBorders'\r\n      },\r\n      { text: '', margin: 190, alignment: 'center' },\r\n      {\r\n        table: {\r\n          widths: ['*', 'auto', '*'],\r\n          body: [\r\n            [\r\n              {\r\n                image: 'logo3',\r\n                fit: [100, 65],\r\n                margin: [50, 0, 0, 0],\r\n                alignment: 'left'\r\n              }, // Top left?\r\n              { text: '' },\r\n              {\r\n                image: 'logo4',\r\n                fit: [100, 65],\r\n                margin: [50, 0, 0, 0],\r\n                alignment: 'right'\r\n              } // Top right\r\n            ]\r\n          ]\r\n        },\r\n        layout: 'noBorders'\r\n      },\r\n      { image: 'header', width: 800, height: 20, alignment: 'center' }\r\n    ];\r\n  }\r\n}\r\n","import { PdfDoc } from '../templates/PdfDoc';\r\nimport { DateTime } from '../api/DateTime';\r\nimport { TYPES } from '../api/SessionTypes';\r\n\r\nexport function MakeSessionPDF(event, type) {\r\n  let maxLocs = 0;\r\n  event.sessions\r\n    .filter(s => s.type === type)\r\n    .forEach(session => (maxLocs = Math.max(maxLocs, session.nLocs)));\r\n  let doc = new PdfDoc(event.pageFormat, event.title, maxLocs > 4);\r\n\r\n  event.sessions\r\n    .filter(s => s.type === type)\r\n    .forEach(session => {\r\n      try {\r\n        doc.addContent({\r\n          text: session.name + ' Schedule',\r\n          style: 'header2',\r\n          margin: [0, 10]\r\n        });\r\n        doc.addContent(\r\n          sessionPage(session, event.getSessionDataGrid(session.id, true))\r\n        );\r\n        doc.addPageBreak();\r\n      } catch (err) {\r\n        alert('Error: ' + err.message);\r\n      }\r\n    });\r\n  if (doc.empty()) return null;\r\n  // Delete the last page break\r\n  doc.chomp();\r\n  doc.filename = (type.name + '-schedule').replace(/ /g, '-');\r\n  return doc;\r\n}\r\n\r\nfunction sessionPage(session, data) {\r\n  // headers are automatically repeated if the table spans over multiple pages\r\n  // you can declare how many rows should be treated as headers\r\n  let t = { headerRows: 1, dontBreakRows: true };\r\n  t.widths = new Array(session.nLocs + 2);\r\n  // Pure guesswork to make these fields smaller\r\n  t.widths[0] = 20;\r\n  t.widths[1] = 40;\r\n\r\n  let w = (440 - t.widths[0] - t.widths[1]) / session.nLocs;\r\n  // NOTE for widths: I would absolutely love to set the column widths to \"automatic\" - that way, they'd be a lot neater.\r\n  //  However, for the moment PDFMake doesn't support word breaks in automatically sized columns.\r\n  for (let i = 2; i < session.nLocs + 2; i++) t.widths[i] = w; // (i < 2) ? 'auto' : '*';\r\n\r\n  // t.widths[0] = w;\r\n  t.body = [];\r\n  //Header row\r\n  let header = [];\r\n  for (let i = 0; i < data[0].length; i++)\r\n    header.push({ text: data[0][i].value, alignment: 'center' });\r\n  t.body.push(header);\r\n\r\n  // All individual rows\r\n  for (let i = 1; i < data.length; i++) {\r\n    let row = [];\r\n    row.push({ text: data[i][0].value.toString(), alignment: 'center' });\r\n    row.push({ text: data[i][1].value.toString(), alignment: 'center' });\r\n    if (data[i][2].colSpan) {\r\n      row.push({\r\n        colSpan: data[i][2].colSpan,\r\n        style: 'breakrow',\r\n        text: '' + data[i][2].value.toString()\r\n      });\r\n      t.body.push(row);\r\n      continue;\r\n    }\r\n    // let diff = session.nLocs;\r\n    for (let j = 2; j < data[i].length; j++) {\r\n      if (data[i][j] === null) row.push({});\r\n      else row.push({ text: data[i][j].value.toString(), style: 'teamEntry' });\r\n    }\r\n    t.body.push(row);\r\n  }\r\n  // if (session.usesSurrogates && session.fillerPolicy === USE_SURROGATES)\r\n  //   this.doc.content.push({text:\"\\n* Surrogate team; results not counted\",alignment:'center'});\r\n  return { table: t, layout: 'lightHorizontalLines' };\r\n}\r\n\r\nexport function MakeDaySchedulePdf(event) {\r\n  let doc = new PdfDoc(event.pageFormat, event.title, false);\r\n\r\n  let t = { headerRows: 1, dontBreakRows: true };\r\n  t.widths = new Array(3);\r\n  t.widths[0] = 100;\r\n  t.widths[1] = 100;\r\n  t.widths[2] = 300;\r\n  t.body = [];\r\n  let header = [];\r\n  header.push({ text: 'Start' });\r\n  header.push({ text: 'End' });\r\n  header.push({ text: 'Event' });\r\n  t.body.push(header);\r\n\r\n  let sorted = event.sessions.sort((a, b) => {\r\n    return a.actualStartTime.mins - b.actualStartTime.mins;\r\n  });\r\n  for (let i = 0; i < sorted.length; i++) {\r\n    let row = [];\r\n    if (sorted[i].type === TYPES.BREAK) {\r\n      row.push({ text: sorted[i].actualStartTime.time, fillColor: '#eeeeee' });\r\n      row.push({ text: sorted[i].actualEndTime.time, fillColor: '#eeeeee' });\r\n      row.push({ text: sorted[i].name + ' *', fillColor: '#eeeeee' });\r\n    } else {\r\n      row.push(sorted[i].actualStartTime.time);\r\n      row.push(sorted[i].actualEndTime.time);\r\n      row.push(sorted[i].name);\r\n    }\r\n    t.body.push(row);\r\n  }\r\n  doc.addContent({ text: 'Day Schedule', style: 'header2', margin: [0, 10] });\r\n  doc.addContent({ table: t, layout: 'lightHorizontalLines' });\r\n\r\n  doc.addContent({ text: '\\n' });\r\n  doc.addContent({\r\n    text:\r\n      '* Break: During scheduled break times matches and judging are not happening'\r\n  });\r\n\r\n  doc.filename = 'day-schedule'.replace(/ /g, '-');\r\n  return doc;\r\n}\r\n\r\nexport function MakePracticeTableSignupPdf(event) {\r\n  let doc = new PdfDoc(event.pageFormat, event.title, false);\r\n\r\n  let t = { headerRows: 1, dontBreakRows: true };\r\n  t.widths = ['auto', '*'];\r\n  t.body = [];\r\n  t.body.push(['Time', 'Team']);\r\n\r\n  let now = event.startTime.clone();\r\n  while (now.mins < event.endTime.mins - 1) {\r\n    now = new DateTime(event.timeIncPrac(now, 10));\r\n    t.body.push([now.displayTime(), '']);\r\n  }\r\n\r\n  doc.addContent({\r\n    text: 'Practice table signup sheet',\r\n    style: 'header2',\r\n    margin: [0, 10]\r\n  });\r\n  doc.addContent({ table: t, layout: 'lightHorizontalLines' });\r\n  doc.addContent({\r\n    text:\r\n      '* Do not book more than 2 times at a time, and no back-to-backs.\\n Remember Gracious Professionalism - everyone wants a chance to practice!',\r\n    style: 'footer'\r\n  });\r\n\r\n  doc.filename = 'practice-tables'.replace(/ /g, '-');\r\n  return doc;\r\n}\r\n\r\nexport function MakeCoreValuesAllocationsPDF(event) {\r\n  if (!event.pilot) return null;\r\n\r\n  let doc = new PdfDoc(event.pageFormat, event.title, false);\r\n\r\n  let data = event.getPilotDataGrid();\r\n\r\n  let t = { headerRows: 1, dontBreakRows: true };\r\n  t.widths = new Array(data[0].length);\r\n  let w = 475 / data[0].length;\r\n  for (let i = 0; i < data[0].length; i++) t.widths[i] = i < 1 ? 'auto' : '*';\r\n  t.widths[0] = w;\r\n  t.body = [];\r\n  //Header row\r\n  let header = [];\r\n  for (let i = 0; i < data[0].length; i++)\r\n    header.push({ text: 'Judge group ' + (i + 1), alignment: 'center' });\r\n  t.body.push(header);\r\n\r\n  // All individual rows\r\n  for (let i = 0; i < data.length; i++) {\r\n    let row = [];\r\n    for (let j = 0; j < data[i].length; j++) {\r\n      if (data[i][j] === null) row.push({});\r\n      else row.push({ text: data[i][j].value.toString(), style: 'teamEntry' });\r\n    }\r\n    t.body.push(row);\r\n  }\r\n\r\n  doc.addContent({\r\n    text: 'Core values judging allocations',\r\n    style: 'header2',\r\n    margin: [0, 10]\r\n  });\r\n  doc.addContent({ table: t, layout: 'lightHorizontalLines' });\r\n\r\n  doc.filename = 'core-values-allocations';\r\n  return doc;\r\n}\r\n","import { PdfDoc } from '../templates/PdfDoc';\r\nimport { TYPES } from '../api/SessionTypes';\r\n\r\nexport function MakeTeamListPDF(event) {\r\n  let doc = new PdfDoc(event.pageFormat, event.title, false);\r\n\r\n  let t = { headerRows: 1, dontBreakRows: true };\r\n  t.widths = new Array(4);\r\n  t.widths[0] = 100;\r\n  t.widths[1] = 200;\r\n  t.widths[2] = 100;\r\n  t.widths[3] = 50;\r\n  t.body = [];\r\n  let header = [];\r\n  header.push({ text: 'Number', alignment: 'center' });\r\n  header.push({ text: 'Name' });\r\n  header.push({ text: 'Affiliation' });\r\n  header.push({ text: 'Pit num' });\r\n  t.body.push(header);\r\n\r\n  event.teams.forEach(x => {\r\n    let row = [];\r\n    row.push({ text: x.number ?? \" \", alignment: 'center' });\r\n    row.push({ text: x.name ?? \" \" });\r\n    row.push({ text: x.affiliation ?? \" \" });\r\n    row.push({ text: x.pitNum ?? \" \" });\r\n    t.body.push(row);\r\n  });\r\n\r\n  doc.addContent({ text: 'Team List', style: 'header2', margin: [0, 10] });\r\n  doc.addContent({ table: t, layout: 'lightHorizontalLines' });\r\n\r\n  doc.filename = 'team-list'.replace(/ /g, '-');\r\n  return doc;\r\n}\r\n\r\nexport function MakeAllTeamsPDF(event) {\r\n  let doc = new PdfDoc(event.pageFormat, event.title, true);\r\n\r\n  doc.addContent({\r\n    text: 'All Team Schedule',\r\n    style: 'header2',\r\n    margin: [0, 10]\r\n  });\r\n\r\n  let data = event.getIndivDataGrid(true);\r\n  let N = data[3].length;\r\n  let t = { headerRows: 2, dontBreakRows: true, keepWithHeaderRows: 1 };\r\n  t.widths = [];\r\n  let w = 525 / N;\r\n  for (let i = 0; i < N; i++) {\r\n    t.widths[i] = w - 2;\r\n  }\r\n  t.widths[1] = w + (N - 1) * 2;\r\n\r\n  // t.widths[1] = w;//'*';\r\n  t.body = [];\r\n  for (let k = 0; k < data.length; k++) {\r\n    t.body[k] = [];\r\n    let curStyle = k < 2 ? 'tablehead' : 'tablebody';\r\n    let col = 'blue';\r\n    for (let i = 0; i < data[k].length; i++) {\r\n      // Hack way to calculate alternating colours.  TODO: Fix\r\n      col = i % 4 > 1 ? 'blue' : 'black';\r\n      if (k === 0) col = i % 2 === 1 ? 'blue' : 'black';\r\n      if (data[k][i].colSpan) {\r\n        t.body[k].push({\r\n          colSpan: data[k][i].colSpan,\r\n          text: data[k][i].value?.toString() ?? \" \",\r\n          color: col,\r\n          style: curStyle\r\n        });\r\n        for (let dummy = 1; dummy < data[k][i].colSpan; dummy++)\r\n          t.body[k].push({});\r\n      } else\r\n        t.body[k].push({\r\n          text: (data[k][i].value?.toString() ?? \" \") + '',\r\n          color: col,\r\n          style: curStyle\r\n        });\r\n    }\r\n  }\r\n  doc.addContent({\r\n    table: t,\r\n    layout: 'lightHorizontalLines',\r\n    alignment: 'center'\r\n  });\r\n\r\n  doc.filename = 'all-teams-schedule'.replace(/ /g, '-');\r\n  return doc;\r\n}\r\n\r\nexport function MakeIndivTeamsPDF(event) {\r\n  let doc = new PdfDoc(event.pageFormat, event.title, false);\r\n\r\n  event.teams.forEach(t => {\r\n    doc.addContent({\r\n      text: t.number + ': ' + t.name,\r\n      style: 'header2',\r\n      margin: [0, 10]\r\n    });\r\n    doc.addContent(teamPage(event, t));\r\n    doc.addContent({ text: ' ', pageBreak: 'after' });\r\n  });\r\n  // Delete the last page break\r\n  doc.chomp();\r\n  doc.filename = 'individual-team-schedule'.replace(/ /g, '-');\r\n  return doc;\r\n}\r\n\r\nfunction teamPage(event, team) {\r\n  let schedule = [];\r\n  for (let i = 0; i < team.schedule.length; i++)\r\n    if (team.schedule[i].teams) schedule.push(team.schedule[i]);\r\n  schedule.sort(function(a, b) {\r\n    return a.time.mins - b.time.mins;\r\n  });\r\n\r\n  let t = { headerRows: 1, dontBreakRows: true };\r\n  t.widths = new Array(3);\r\n  for (let i = 0; i < 3; i++) {\r\n    t.widths[i] = i < -1 ? 'auto' : '*';\r\n  }\r\n  t.body = [];\r\n  t.body[0] = [];\r\n  t.body[0][0] = { text: 'Time (#)' };\r\n  t.body[0][1] = { text: 'Event' };\r\n  t.body[0][2] = { text: 'Location' };\r\n  for (let i = 0; i < schedule.length; i++) {\r\n    // If it's a break that applies to specific sessions, don't put it in.\r\n    if (\r\n      event.getSession(schedule[i].session_id).type === TYPES.BREAK &&\r\n      event.getSession(schedule[i].session_id).appliesTo.length > 0\r\n    )\r\n      continue;\r\n    let row = [];\r\n    let spot = schedule[i].teams.indexOf(team.id);\r\n    let num = ' (' + schedule[i].num + ')';\r\n    if (\r\n      schedule[i].teams.length - schedule[i].teams.indexOf(team.id) <=\r\n      schedule[i].surrogates\r\n    )\r\n      num = ' (' + schedule[i].num + ', surrogate)';\r\n    if (event.getSession(schedule[i].session_id).type === TYPES.BREAK) num = '';\r\n\r\n    let loc = event.getSession(schedule[i].session_id).locations[\r\n      spot + schedule[i].loc\r\n    ];\r\n    // if (event.getSession(schedule[i].session_id).type === TYPES.BREAK) loc = event.getSession(schedule[i].session_id).locations[0];\r\n    if (event.getSession(schedule[i].session_id).type === TYPES.BREAK) loc = '';\r\n    if (!loc) loc = '';\r\n    row.push({ text: schedule[i].time.time + num });\r\n    row.push({ text: event.getSession(schedule[i].session_id).name });\r\n    row.push({ text: '' + loc });\r\n    t.body.push(row);\r\n  }\r\n  return { table: t, layout: 'lightHorizontalLines' };\r\n}\r\n","import { PdfDoc } from \"../templates/PdfDoc\";\r\nimport { TYPES } from \"../api/SessionTypes\";\r\nimport { EventParams } from \"../api/EventParams\";\r\n\r\nexport function MakePitSignsPdf(event) {\r\n  let doc = new PdfDoc(event.pageFormat, event.title, true);\r\n  event.teams.forEach((t) => {\r\n    // margin: [left, top, right, bottom]\r\n    doc.addContent({\r\n      text: t.name,\r\n      style: \"signTitle\",\r\n      margin: [0, 40, 0, 10],\r\n    });\r\n    doc.addContent({\r\n      text: \"Team \" + t.number,\r\n      style: \"signSubtitle\",\r\n      margin: [0, 10],\r\n    });\r\n    doc.addPageBreak();\r\n  });\r\n  doc.chomp();\r\n  doc.filename = \"pit-signs\".replace(/ /g, \"-\");\r\n  return doc;\r\n}\r\n\r\nexport function MakeLocationSignsPdf(event) {\r\n  let baseLocations = [\r\n    \"Pit admin\",\r\n    \"Queueing\",\r\n    \"Judge check-in\",\r\n    \"Robot game\",\r\n    \"Coaches meeting\",\r\n    \"Volunteer Room\",\r\n    \"Practice table\",\r\n  ];\r\n  let doc = new PdfDoc(event.pageFormat, event.title, true);\r\n  event.sessions\r\n    .filter((x) => x.type === TYPES.JUDGING)\r\n    .forEach((s) => {\r\n      s.locations.forEach((loc, i) => {\r\n        // margin: [left, top, right, bottom]\r\n        doc.addContent({\r\n          text: s.name + \" Room \" + (i + 1),\r\n          style: \"signTitle\",\r\n          margin: [0, 40, 0, 10],\r\n        });\r\n        doc.addContent({ text: loc, style: \"signSubtitle\", margin: [0, 10] });\r\n        doc.addPageBreak();\r\n      });\r\n    });\r\n  let s = event.sessions.find((x) => x.type === TYPES.MATCH_ROUND);\r\n  s.locations.forEach((loc) => {\r\n    // margin: [left, top, right, bottom]\r\n    doc.addContent({ text: loc, style: \"signTitle\", margin: [0, 40, 0, 10] });\r\n    doc.addPageBreak();\r\n  });\r\n  baseLocations.forEach((loc) => {\r\n    // margin: [left, top, right, bottom]\r\n    doc.addContent({ text: loc, style: \"signTitle\", margin: [0, 40, 0, 10] });\r\n    doc.addPageBreak();\r\n  });\r\n  doc.chomp();\r\n  doc.filename = \"location-signs\".replace(/ /g, \"-\");\r\n  return doc;\r\n}\r\n\r\nexport function MakeAwardCertPdf(event) {\r\n  let F = event.pageFormat.footerText;\r\n  event.pageFormat.footerText = \"\";\r\n  let doc = new PdfDoc(event.pageFormat, \"\", true);\r\n  event.pageFormat.footerText = F;\r\n  // for (let i = 0; i < event.judgesAwards; i++) {\r\n  //   doc.addContent({\r\n  //     text: 'Judges Award',\r\n  //     style: 'signTitle',\r\n  //     margin: [0, 40, 0, 10]\r\n  //   });\r\n  //   doc.addContent({\r\n  //     text: '____________________',\r\n  //     style: 'signTitle',\r\n  //     margin: [0, 40, 0, 10]\r\n  //   });\r\n  //   doc.addContent({\r\n  //     text: event.title,\r\n  //     style: 'signSubtitle',\r\n  //     margin: [0, 10]\r\n  //   });\r\n  //   doc.addPageBreak();\r\n  // }\r\n  console.log(event.awards);\r\n  // console.log(EventParams.AWARD_NAMES[event.awardStyleIdx]);\r\n  event.awards.forEach((a) => {\r\n    // margin: [left, top, right, bottom]\r\n    doc.addContent({ text: a, style: \"certTitle\", margin: [0, 60, 0, 10] });\r\n    doc.DrawLine();\r\n    doc.addContent({\r\n      text: event.title,\r\n      style: \"certSubtitle\",\r\n      margin: [0, 10],\r\n    });\r\n    doc.addPageBreak();\r\n  });\r\n  doc.chomp();\r\n  doc.filename = \"award-certificates\".replace(/ /g, \"-\");\r\n  return doc;\r\n}\r\n\r\nexport function MakeParticipationCertPdf(event) {\r\n  let F = event.pageFormat.footerText;\r\n  event.pageFormat.footerText = \"\";\r\n  let doc = new PdfDoc(event.pageFormat, \"\", true);\r\n  event.pageFormat.footerText = F;\r\n  event.teams.forEach((t) => {\r\n    // margin: [left, top, right, bottom]\r\n    doc.addContent({\r\n      text: \"Certificate of Participation\",\r\n      style: \"certTitle\",\r\n      margin: [0, 60, 0, 10],\r\n    });\r\n    doc.DrawLine();\r\n    doc.addContent({\r\n      text: event.title,\r\n      style: \"certSubtitle\",\r\n      margin: [0, 10],\r\n    });\r\n    doc.addContent({ text: t.name, style: \"certSubtitle\", margin: [0, 10] });\r\n    doc.addPageBreak();\r\n  });\r\n  doc.chomp();\r\n  doc.filename = \"participation-certificates\".replace(/ /g, \"-\");\r\n  return doc;\r\n}\r\n","import { TYPES } from '../api/SessionTypes';\r\n\r\nexport function MakeScoringSystemCSV(event) {\r\n  let csv = 'Version Number,1\\n';\r\n  csv += 'Block Format,1\\n';\r\n  csv += 'Number of Teams,' + event.nTeams + '\\n';\r\n\r\n  event.teams.forEach(t => {\r\n    csv += t.number + ',' + t.name + ',' + t.affiliation + ',\\n';\r\n  });\r\n\r\n  csv += 'Block Format,2\\n';\r\n  let rankingMatches = 0;\r\n  let allRounds = event.getSessions(TYPES.MATCH_ROUND);\r\n  allRounds.forEach(S => {\r\n    rankingMatches += S.schedule.length;\r\n  });\r\n  csv += 'Number of Ranking Matches,' + rankingMatches + '\\n';\r\n  csv += 'Number of Tables,' + allRounds[0].nLocs + '\\n';\r\n  csv += 'Number of Teams per Table,2\\n';\r\n  csv +=\r\n    'Number of Simultaneous Tables,' +\r\n    Math.floor(allRounds[0].nLocs / 2 / allRounds[0].nSims) +\r\n    '\\n';\r\n  csv += 'Table Names,';\r\n  allRounds[0].locations.forEach(l => {\r\n    csv += l.replace(' ', '-') + ',';\r\n  });\r\n  csv += '\\n';\r\n  allRounds.forEach(round => {\r\n    round.schedule.forEach(instance => {\r\n      csv += instance.num + ',';\r\n      csv += TimeToExcel(instance.time) + ',';\r\n      let extra = 0;\r\n      if (instance.extra) extra = event.extraTime;\r\n      let tmp = instance.time.clone();\r\n      tmp.mins = tmp.mins + round.len + extra;\r\n      csv += TimeToExcel(tmp) + ',';\r\n      for (let dummy = 0; dummy < instance.loc; dummy++) csv += ',';\r\n      instance.teams.forEach(t => {\r\n        csv += event.getTeam(t).number + ',';\r\n      });\r\n      for (\r\n        let dummy = instance.loc + instance.teams.length;\r\n        dummy < allRounds[0].nLocs;\r\n        dummy++\r\n      )\r\n        csv += ',';\r\n      csv += '\\n';\r\n    });\r\n  });\r\n\r\n  let allJudging = event.getSessions(TYPES.JUDGING);\r\n  csv += 'Block Format,3\\n';\r\n  csv += 'Number of Judged Events,' + allJudging.length + '\\n';\r\n  csv += 'Number of Event Time Slots,' + allJudging[0].schedule.length + '\\n';\r\n  csv += 'Number of Judging Teams,' + allJudging[0].nLocs + '\\n';\r\n\r\n  allJudging.forEach(session => {\r\n    csv += 'Event Name,' + session.name + '\\n';\r\n    csv += 'Room Names,';\r\n    session.locations.forEach(loc => {\r\n      csv += loc + ',';\r\n    });\r\n    csv += '\\n';\r\n    session.schedule.forEach(instance => {\r\n      csv += instance.num + ',';\r\n      csv += TimeToExcel(instance.time) + ',';\r\n      let extra = 0;\r\n      if (instance.extra) extra = event.extraTime;\r\n      let tmp = instance.time.clone();\r\n      tmp.mins = tmp.mins + session.len + extra;\r\n      csv += TimeToExcel(tmp) + ',';\r\n      for (let dummy = 0; dummy < instance.loc; dummy++) csv += ',';\r\n      instance.teams.forEach(t => {\r\n        csv += event.getTeam(t).number + ',';\r\n      });\r\n      csv += '\\n';\r\n    });\r\n  });\r\n\r\n  let practiceMatches = 0;\r\n  let allPRounds = event.getSessions(TYPES.MATCH_ROUND_PRACTICE);\r\n  if (allPRounds.length === 0) return { data: csv, filename: 'scoring_import' };\r\n  allPRounds.forEach(S => {\r\n    practiceMatches += S.schedule.length;\r\n  });\r\n  csv += 'Block Format,4\\n';\r\n  csv += 'Number of Practice Matches,' + practiceMatches + '\\n';\r\n  csv += 'Number of Tables,' + allRounds[0].nLocs / 2 + '\\n';\r\n  csv += 'Number of Teams per Table,2\\n';\r\n  csv +=\r\n    'Number of Simultaneous Tables,' +\r\n    Math.floor(allRounds[0].nLocs / 2 / allRounds[0].nSims) +\r\n    '\\n';\r\n  csv += 'Table Names,';\r\n  allRounds[0].locations.forEach(l => {\r\n    csv += l.replace(' ', '-') + ',';\r\n  });\r\n  csv += '\\n';\r\n  allPRounds.forEach(round => {\r\n    round.schedule.forEach(instance => {\r\n      csv += instance.num + ',';\r\n      csv += TimeToExcel(instance.time) + ',';\r\n      let extra = 0;\r\n      if (instance.extra) extra = event.extraTime;\r\n      let tmp = instance.time.clone();\r\n      tmp.mins = tmp.mins + round.len + extra;\r\n      csv += TimeToExcel(tmp) + ',';\r\n      for (let dummy = 0; dummy < instance.loc; dummy++) csv += ',';\r\n      instance.teams.forEach(t => {\r\n        csv += event.getTeam(t).number + ',';\r\n      });\r\n      for (\r\n        let dummy = instance.loc + instance.teams.length;\r\n        dummy < allRounds[0].nLocs;\r\n        dummy++\r\n      )\r\n        csv += ',';\r\n      csv += '\\n';\r\n    });\r\n  });\r\n  return { data: csv, filename: 'scoring_import' };\r\n}\r\n\r\n// Excel represents time decimally as follows:\r\n// Time = x.yyyyyyyy\r\n// Where x = Number of days since 1/1/1900\r\n// and\t y = Proportion of day (mins/(24*60))\r\nexport function TimeToExcel(x) {\r\n  let t = x.time.replace(/$/, ':00');\r\n  if (x.mins % (24 * 60) < 12 * 60) t = t + ' AM';\r\n  else t = t + ' PM';\r\n  return t;\r\n  // var millenium = new Date();\r\n  // sd = new String(sd);\r\n  // millenium.setFullYear(1900,0,1);\r\n  // var tourn = new Date();\r\n  // tourn.setFullYear(sd.split(\"-\")[0],sd.split(\"-\")[1]-1,sd.split(\"-\")[2]);\r\n  // if (tournament.days.length > 1) {\r\n  // \tconsole.log(Date.daysBetween(millenium,tourn)+(m/(24*60)));\r\n  // \treturn Date.daysBetween(millenium,tourn)+(m/(24*60));\r\n  // } else return m/(24*60);\r\n}\r\n","import { PdfDoc } from '../templates/PdfDoc';\r\n\r\nexport function MakeVolunteerListPdf(event) {\r\n  let doc = new PdfDoc(event.pageFormat, event.title, false);\r\n\r\n  let t = { headerRows: 1, dontBreakRows: true };\r\n  t.widths = new Array(2);\r\n  t.widths[0] = 200;\r\n  t.widths[1] = 300;\r\n  t.body = [];\r\n  t.body.push(['Role', 'Name']);\r\n\r\n  let colorDark = false;\r\n  event.volunteers.forEach(v => {\r\n    colorDark = !colorDark;\r\n    v.staff.forEach((s, i) => {\r\n      if (s === '') return;\r\n      t.body.push([\r\n        { text: i === 0 ? v.name : '', fillColor: colorDark ? '#eee' : '#fff' },\r\n        { text: s, fillColor: colorDark ? '#eee' : '#fff' }\r\n      ]);\r\n    });\r\n  });\r\n\r\n  doc.addContent({ text: 'Volunteer List', style: 'header2', margin: [0, 10] });\r\n  doc.addContent({ table: t, layout: 'lightHorizontalLines' });\r\n\r\n  doc.filename = 'vol-list'.replace(/ /g, '-');\r\n  return doc;\r\n}\r\n\r\nexport function MakeSigninPdf(event) {\r\n  let doc = new PdfDoc(event.pageFormat, event.title, false);\r\n\r\n  let t = { headerRows: 1, dontBreakRows: true };\r\n  t.widths = new Array(3);\r\n  t.widths[0] = 100;\r\n  t.widths[1] = 200;\r\n  t.widths[2] = 200;\r\n  t.body = [];\r\n  let header = [];\r\n  header.push({ text: 'Name' });\r\n  header.push({ text: 'Role/s' });\r\n  header.push({ text: 'Signed in?' });\r\n  t.body.push(header);\r\n\r\n  // Reorganise volunteers into a dict.\r\n  let data = {};\r\n  event.volunteers.forEach(v => {\r\n    v.staff.forEach(s => {\r\n      let name = s;\r\n      if (name === '') name = '[UNDEFINED]';\r\n      if (data[name]) data[name] = data[name] + ', ' + v.name;\r\n      else data[name] = v.name;\r\n    });\r\n  });\r\n\r\n  Object.keys(data)\r\n    .sort()\r\n    .forEach(k => {\r\n      let row = [];\r\n      if (k === '[UNDEFINED]') {\r\n        return;\r\n      } else {\r\n        row.push({ text: k });\r\n        row.push({ text: data[k] });\r\n        row.push({ text: '' });\r\n      }\r\n      t.body.push(row);\r\n    });\r\n\r\n  doc.addContent({\r\n    text: 'Volunteer Sign-on sheet',\r\n    style: 'header2',\r\n    margin: [0, 10]\r\n  });\r\n  doc.addContent({ table: t, layout: 'lightHorizontalLines' });\r\n  // === UNASSIGNED === //\r\n  /*\r\n    doc.addPageBreak();\r\n    doc.addContent({text: \"Unassigned volunteers\", style:'header2',margin:[0,10]});\r\n\r\n    if (data[\"[UNDEFINED]\"]) {\r\n\r\n      t = {headerRows: 1, dontBreakRows: true};\r\n      t.widths = new Array(3);\r\n      t.widths[0] = 100;\r\n      t.widths[1] = 200;\r\n      t.widths[2] = 200;\r\n      t.body = [];\r\n      let header = [];\r\n      header.push({text:\"Role\"});\r\n      header.push({text:\"Signed in?\"});\r\n      t.body.push(header);\r\n\r\n\r\n      // t.body.push({text: \"Unassigned roles\", colSpan: 3, color: \"grey\"})\r\n      t.body.push([{text: \"Unassigned roles\"}, {text: \"\"}, {text: \"\"}]);\r\n      let undef = data[\"[UNDEFINED]\"].split(\", \").sort();\r\n      undef.forEach(r => {\r\n        t.body.push([{text: r}, {text: \"\"}, {text: \"\"}]);\r\n      });\r\n    }\r\n    doc.addContent({table: t, layout: 'lightHorizontalLines'});\r\n    */\r\n  doc.filename = 'vol-sign-in'.replace(/ /g, '-');\r\n  return doc;\r\n}\r\n","import PptxGenJS from 'pptxgenjs';\r\nimport PreComputedImages from '../resources/images.json';\r\n\r\nexport class PptPres {\r\n  constructor(title, pageFormat, logos) {\r\n    this.pptx = new PptxGenJS();\r\n    this.pptx.setLayout('LAYOUT_WIDE');\r\n\r\n    this.pptx.defineSlideMaster({\r\n      title: 'PRESENTATION_BASIC',\r\n      bkgd: 'FFFFFF',\r\n      objects: [\r\n        {\r\n          image: {\r\n            data: PreComputedImages.gamelogo,\r\n            // path: '../resources/gamelogo.jpg', //Doesn't work\r\n            x: 13.3 * 0.4,\r\n            y: 0,\r\n            w: 13.3 * 0.2,\r\n            h: 13.3 * 0.2,\r\n            sizing: 'contain'\r\n          }\r\n        },\r\n        {\r\n          placeholder: {\r\n            options: {\r\n              name: 'heading',\r\n              type: 'body',\r\n              x: '10%',\r\n              y: '40%',\r\n              w: '80%',\r\n              h: '20%',\r\n              fontSize: 66,\r\n              align: 'center',\r\n              fontFace: 'Palatino',\r\n              autoFit: 'true'\r\n            },\r\n            text: '___ Award'\r\n          }\r\n        },\r\n        {\r\n          text: {\r\n            text: title,\r\n            options: {\r\n              x: '20%',\r\n              y: '80%',\r\n              h: '10%',\r\n              w: '60%',\r\n              fontSize: 36,\r\n              align: 'center',\r\n              fontFace: 'Palatino',\r\n              autoFit: 'true'\r\n            }\r\n          }\r\n        },\r\n        // { 'image': {\r\n        //         data: pageFormat.header, // Doesn't work\r\n        //         // path: '../resources/FIRST_header.png',\r\n        //         x: 0, y: '90%', h: '10%', w: '100%'\r\n        //     } }\r\n        { rect: { x: 0.1, y: 7, w: 3, h: 0.5, fill: '00a651' } },\r\n        { rect: { x: 3.5, y: 7, w: 3, h: 0.5, fill: 'ed1c24' } },\r\n        { rect: { x: 6.9, y: 7, w: 3, h: 0.5, fill: 'f57e25' } },\r\n        { rect: { x: 10.3, y: 7, w: 3, h: 0.5, fill: '009cd7' } }\r\n      ]\r\n    });\r\n    this.pptx.defineSlideMaster({\r\n      title: 'PRESENTATION_WINNER',\r\n      bkgd: 'FFFFFF',\r\n      objects: [\r\n        {\r\n          image: {\r\n            data: PreComputedImages.gamelogo,\r\n            // path: '../resources/gamelogo.jpg', //Doesn't work\r\n            x: 13.3 * 0.4,\r\n            y: 0,\r\n            w: 13.3 * 0.2,\r\n            h: 13.3 * 0.2,\r\n            sizing: 'contain'\r\n          }\r\n        },\r\n        {\r\n          placeholder: {\r\n            options: {\r\n              name: 'winner',\r\n              type: 'body',\r\n              x: '10%',\r\n              y: '40%',\r\n              w: '80%',\r\n              h: '20%',\r\n              fontSize: 66,\r\n              align: 'center',\r\n              fontFace: 'Palatino',\r\n              autoFit: 'true'\r\n            },\r\n            text: '_________'\r\n          }\r\n        },\r\n        {\r\n          placeholder: {\r\n            options: {\r\n              name: 'award',\r\n              type: 'body',\r\n              x: '10%',\r\n              y: '60%',\r\n              w: '80%',\r\n              h: '10%',\r\n              fontSize: 36,\r\n              color: 'bbbbbb',\r\n              align: 'center',\r\n              fontFace: 'Palatino',\r\n              autoFit: 'true'\r\n            },\r\n            text: '___ Award'\r\n          }\r\n        },\r\n        {\r\n          text: {\r\n            text: title,\r\n            options: {\r\n              x: '20%',\r\n              y: '80%',\r\n              h: '10%',\r\n              w: '60%',\r\n              fontSize: 36,\r\n              align: 'center',\r\n              fontFace: 'Palatino',\r\n              autoFit: 'true'\r\n            }\r\n          }\r\n        },\r\n        // { 'image': {\r\n        //         data: pageFormat.header, // Doesn't work\r\n        //         // path: '../resources/FIRST_header.png',\r\n        //         x: 0, y: '90%', h: '10%', w: '100%'\r\n        //     } }\r\n        { rect: { x: 0.1, y: 7, w: 3, h: 0.5, fill: '00a651' } },\r\n        { rect: { x: 3.5, y: 7, w: 3, h: 0.5, fill: 'ed1c24' } },\r\n        { rect: { x: 6.9, y: 7, w: 3, h: 0.5, fill: 'f57e25' } },\r\n        { rect: { x: 10.3, y: 7, w: 3, h: 0.5, fill: '009cd7' } }\r\n      ]\r\n    });\r\n  }\r\n\r\n  addTitle(title) {\r\n    let slide = this.pptx.addNewSlide('PRESENTATION_BASIC');\r\n    slide.addText(title, { placeholder: 'heading' });\r\n  }\r\n\r\n  addWinner(title, winner) {\r\n    let slide = this.pptx.addNewSlide('PRESENTATION_WINNER');\r\n    slide.addText(title, { placeholder: 'award' });\r\n    if (winner) slide.addText(winner, { placeholder: 'winner' });\r\n  }\r\n\r\n  download() {\r\n    this.pptx.save();\r\n  }\r\n\r\n  getBlobPromise() {\r\n    return new Promise((resolve, reject) => {\r\n      this.pptx.save('jszip', blob => resolve(blob), 'blob');\r\n    });\r\n  }\r\n}\r\n","import { PptPres } from \"../templates/PptPres\";\r\nimport { EventParams } from \"../api/EventParams\";\r\nexport function MakeClosingPresentation(event) {\r\n  let doc = new PptPres(\r\n    event.title,\r\n    event.pageFormat,\r\n    event.sponsors.nationals\r\n  );\r\n\r\n  doc.addTitle(\"Closing & Awards Ceremony\");\r\n\r\n  // for (let i = 0; i < event.judgesAwards; i++) {\r\n  //   doc.addTitle('_______ Judges Award');\r\n  //   doc.addWinner('_______ Judges Award');\r\n  // }\r\n\r\n  event.awards.forEach((a) => {\r\n    // margin: [left, top, right, bottom]\r\n    doc.addTitle(a);\r\n    doc.addWinner(a);\r\n  });\r\n\r\n  doc.addTitle(\"Closing & Awards Ceremony\");\r\n\r\n  doc.filename = \"closing-slides\";\r\n\r\n  return doc;\r\n}\r\n","import { TYPES } from '../api/SessionTypes';\r\nimport {\r\n  MakeSessionPDF,\r\n  MakeDaySchedulePdf,\r\n  MakePracticeTableSignupPdf\r\n  // MakeCoreValuesAllocationsPDF\r\n} from './SessionOutputs';\r\nimport {\r\n  MakeTeamListPDF,\r\n  MakeAllTeamsPDF,\r\n  MakeIndivTeamsPDF\r\n} from './TeamOutputs';\r\nimport {\r\n  MakePitSignsPdf,\r\n  MakeLocationSignsPdf,\r\n  MakeAwardCertPdf,\r\n  MakeParticipationCertPdf\r\n} from './SignOutputs';\r\nimport { MakeScoringSystemCSV } from './DataOutputs';\r\nimport { MakeVolunteerListPdf, MakeSigninPdf } from './VolunteerOutputs';\r\nimport { MakeClosingPresentation } from '../outputs/PresentationOutput';\r\n\r\nimport JSZip from 'jszip';\r\nimport { saveAs } from 'file-saver';\r\n\r\nexport class Zipper {\r\n  constructor(event, saveFunc) {\r\n    this._event = event;\r\n    this.save = saveFunc;\r\n    this._idx = 0;\r\n    this.zipname = this.event.title.replace(' ', '_');\r\n    this.funcs = [\r\n      () =>\r\n        this.zipPDF(\r\n          MakeSessionPDF(event, TYPES.JUDGING),\r\n          '',\r\n          2 * this.event.nJudges + 5\r\n        ),\r\n      // () => this.zipPDF(MakeCoreValuesAllocationsPDF(event), \"\", this.event.nJudges + 2),\r\n      () => this.zipPDF(MakeSessionPDF(event, TYPES.MATCH_ROUND), '', 20),\r\n      () =>\r\n        this.zipPDF(MakeSessionPDF(event, TYPES.MATCH_ROUND_PRACTICE), '', 20),\r\n      // () => this.zipPDF(MakeSessionPDF(event, TYPES.MATCH_FILLER), \"\", 20),\r\n      // () => this.zipPDF(MakeSessionPDF(event, TYPES.MATCH_FILLER_PRACTICE), \"\", 20),\r\n      () => this.zipPDF(MakeTeamListPDF(event), '', 20),\r\n      () =>\r\n        this.zipPDF(\r\n          MakeDaySchedulePdf(event),\r\n          '',\r\n          this.event.nTeams + 20 + 2 * this.event.nJudges\r\n        ),\r\n      () => this.zipPDF(MakeAllTeamsPDF(event), '', 4),\r\n      () => this.zipPDF(MakeIndivTeamsPDF(event), '', 2),\r\n      () => this.zipPDF(MakePitSignsPdf(event), 'signage', 2),\r\n      () => this.zipPDF(MakeVolunteerListPdf(event), 'volunteers', 2),\r\n      () => this.zipPDF(MakeLocationSignsPdf(event), 'signage', 2),\r\n      () => this.zipPDF(MakeSigninPdf(event), 'volunteers', 2),\r\n      () => this.zipPDF(MakePracticeTableSignupPdf(event), 'signage', 4),\r\n      () => this.zipPDF(MakeAwardCertPdf(event), 'certificates', 2),\r\n      () => this.zipPDF(MakeParticipationCertPdf(event), 'certificates', 10),\r\n      () => this.zipCSV(MakeScoringSystemCSV(event), 'scoring-system'),\r\n      () => this.zipSponsors(this.event.sponsors.national, 'scoring-system'),\r\n      () => this.zipSponsors(this.event.sponsors.local, 'scoring-system'),\r\n      () => this.zipPPT(MakeClosingPresentation(event))\r\n    ];\r\n    this.zip = new JSZip();\r\n  }\r\n\r\n  ProcessNext() {\r\n    this.funcs[this._idx++]();\r\n  }\r\n\r\n  ProcessGiven(idx) {\r\n    console.log('Processing ' + idx);\r\n    this.funcs[idx]();\r\n    this._idx = idx;\r\n  }\r\n\r\n  DownloadZip() {\r\n    this.zip.generateAsync({ type: 'blob' }).then(content => {\r\n      saveAs(content, this.zipname + '.zip');\r\n    });\r\n  }\r\n\r\n  zipPDF(pdf, folder, count) {\r\n    if (!pdf) return;\r\n    let loc = folder ? this.zip.folder(folder) : this.zip;\r\n    try {\r\n      console.log(\"Zipping \" + pdf.filename);\r\n      loc.file(pdf.filename + '_' + count + '.pdf', pdf.getBlobPromise());\r\n    } catch (err) {\r\n      alert('Error saving: ' + pdf.filename + '; ' + err.message);\r\n    }\r\n  }\r\n\r\n  zipCSV(csv, folder) {\r\n    if (!csv) return;\r\n    console.log(csv);\r\n    let loc = folder ? this.zip.folder(folder) : this.zip;\r\n    try {\r\n      loc.file(\r\n        csv.filename + '.csv',\r\n        new Blob([csv.data], { type: 'application/csv' })\r\n      );\r\n    } catch (err) {\r\n      alert('Error saving: ' + csv.filename + '.csv ; ' + err.message);\r\n    }\r\n  }\r\n\r\n  zipSponsors(sponsors, folder) {\r\n    if (sponsors.length === 0) return false;\r\n    let loc = folder ? this.zip.folder(folder) : this.zip;\r\n    this.zipAllLogos(sponsors, loc);\r\n    return true;\r\n  }\r\n\r\n  zipPPT(ppt, folder) {\r\n    if (!ppt) return;\r\n    let loc = folder ? this.zip.folder(folder) : this.zip;\r\n    try {\r\n      loc.file(ppt.filename + '.pptx', ppt.getBlobPromise());\r\n    } catch (err) {\r\n      alert('Error saving: ' + ppt.filename + '; ' + err.message);\r\n    }\r\n  }\r\n\r\n  zipAllLogos(logos, zip) {\r\n    logos.forEach(im => {\r\n      var uri = im.data;\r\n      var idx = uri.indexOf('base64,') + 'base64,'.length; // or = 28 if you're sure about the prefix\r\n      var content = uri.substring(idx);\r\n      zip.file(im.name + '.' + im.extension, content, { base64: true });\r\n    });\r\n  }\r\n\r\n  get event() {\r\n    return this._event;\r\n  }\r\n\r\n  get length() {\r\n    return this.funcs.length;\r\n  }\r\n\r\n  get FilesLeft() {\r\n    return this.funcs.length - this._idx;\r\n  }\r\n\r\n  get idx() {\r\n    return this._idx;\r\n  }\r\n}\r\n","import { TYPES } from '../api/SessionTypes';\r\nimport {\r\n  MakeSessionPDF,\r\n  MakeDaySchedulePdf,\r\n  MakePracticeTableSignupPdf\r\n  // MakeCoreValuesAllocationsPDF\r\n} from './SessionOutputs';\r\nimport {\r\n  MakeTeamListPDF,\r\n  MakeAllTeamsPDF,\r\n  MakeIndivTeamsPDF\r\n} from './TeamOutputs';\r\nimport {\r\n  MakePitSignsPdf,\r\n  MakeLocationSignsPdf,\r\n  MakeAwardCertPdf,\r\n  MakeParticipationCertPdf\r\n} from './SignOutputs';\r\nimport { MakeScoringSystemCSV } from './DataOutputs';\r\nimport { MakeVolunteerListPdf, MakeSigninPdf } from './VolunteerOutputs';\r\nimport { MakeClosingPresentation } from '../outputs/PresentationOutput';\r\n\r\nimport { Zipper } from './Zipper';\r\nimport { saveToFile_csv } from '../scheduling/utilities';\r\n\r\nexport class SingleOutput {\r\n  constructor(event, saveFunc) {\r\n    this._event = event;\r\n    this.save = saveFunc;\r\n    this.funcs = [\r\n      () =>\r\n        this.getPDF(\r\n          MakeSessionPDF(event, TYPES.JUDGING),\r\n          2 * this.event.nJudges + 5\r\n        ),\r\n      // () => this.getPDF(MakeCoreValuesAllocationsPDF(event), \"\", this.event.nJudges + 2),\r\n      () => this.getPDF(MakeSessionPDF(event, TYPES.MATCH_ROUND), 20),\r\n      () => this.getPDF(MakeSessionPDF(event, TYPES.MATCH_ROUND_PRACTICE), 20),\r\n      // () => this.getPDF(MakeSessionPDF(event, TYPES.MATCH_FILLER), 20),\r\n      // () => this.getPDF(MakeSessionPDF(event, TYPES.MATCH_FILLER_PRACTICE), 20),\r\n      () => this.getPDF(MakeTeamListPDF(event), 20),\r\n      () =>\r\n        this.getPDF(\r\n          MakeDaySchedulePdf(event),\r\n          this.event.nTeams + 20 + 2 * this.event.nJudges\r\n        ),\r\n      () => this.getPDF(MakeAllTeamsPDF(event), 4),\r\n      () => this.getPDF(MakeIndivTeamsPDF(event), 2),\r\n      () => this.getPDF(MakePitSignsPdf(event), 2),\r\n      () => this.getPDF(MakeVolunteerListPdf(event), 2),\r\n      () => this.getPDF(MakeLocationSignsPdf(event), 2),\r\n      () => this.getPDF(MakeSigninPdf(event), 2),\r\n      () => this.getPDF(MakePracticeTableSignupPdf(event), 4),\r\n      () => this.getPDF(MakeAwardCertPdf(event), 2),\r\n      () => this.getPDF(MakeParticipationCertPdf(event), 10),\r\n      () => this.getCSV(MakeScoringSystemCSV(event)),\r\n      () => this.getSponsors(this.event.sponsors.national, 'scoring-system'),\r\n      () => this.getSponsors(this.event.sponsors.local, 'scoring-system'),\r\n      () => this.getPPT(MakeClosingPresentation(event))\r\n    ];\r\n  }\r\n\r\n  static funcNames = [\r\n    // Must be the same order as \"func\" above\r\n    'Judging schedule',\r\n    // () => this.getPDF(MakeCoreValuesAllocationsPDF(event), \"\", this.event.nJudges + 2),\r\n    'Match schedule',\r\n    'Practice match schedule',\r\n    // \"Filler match schedule\",\r\n    // \"Filler practice match schedule\",\r\n    'Team list',\r\n    'Day schedule',\r\n    'All-team schedule',\r\n    'Individual team schedule',\r\n    'Pit signs',\r\n    'Volunteer list',\r\n    'Location signs',\r\n    'Volunteer sign in sheet',\r\n    'Practice table sign up sheet',\r\n    'Award certificates',\r\n    'Participation certificates',\r\n    'Scoring system import file',\r\n    'National sponsors',\r\n    'Local sponsors',\r\n    'Closing ceremony powerpoint'\r\n  ];\r\n\r\n  get(idx) {\r\n    this.funcs[idx]();\r\n  }\r\n\r\n  getPDF(pdf, count) {\r\n    if (!pdf) return;\r\n    try {\r\n      pdf.download(pdf.filename + '_' + count + '.pdf');\r\n    } catch (err) {\r\n      alert('Error saving: ' + pdf.filename + '; ' + err.message);\r\n    }\r\n  }\r\n\r\n  getSponsors(sponsors, name) {\r\n    let z = new Zipper(this._event, this.save);\r\n    if (z.zipSponsors(sponsors, name)) z.DownloadZip();\r\n  }\r\n\r\n  getCSV(csv) {\r\n    if (!csv) return;\r\n    console.log(csv);\r\n    try {\r\n      saveToFile_csv(csv.filename + '.csv', csv.data);\r\n    } catch (err) {\r\n      alert('Error saving: ' + csv.filename + '.csv ; ' + err.message);\r\n    }\r\n  }\r\n\r\n  getPPT(ppt) {\r\n    if (!ppt) return;\r\n    try {\r\n      ppt.download(); //(ppt.filename + \".pptx\", ppt.getBlobPromise());\r\n    } catch (err) {\r\n      alert('Error saving: ' + ppt.filename + '; ' + err.message);\r\n    }\r\n  }\r\n  get event() {\r\n    return this._event;\r\n  }\r\n\r\n  get length() {\r\n    return this.funcs.length;\r\n  }\r\n}\r\n","import React, {Component} from 'react';\r\nimport {Zipper} from \"../outputs/Zipper.js\";\r\nimport {SingleOutput} from \"../outputs/SingleOutput.js\";\r\nimport {\r\n    Modal,\r\n    ModalHeader,\r\n    ModalBody,\r\n    ModalFooter,\r\n    Container,\r\n    Row,\r\n    Col,\r\n    Button, ButtonGroup,\r\n    Card, //CardText, CardTitle,\r\n    // UncontrolledDropdown, DropdownToggle, DropdownItem, DropdownMenu,\r\n    Form, FormGroup, Label, Input\r\n} from 'reactstrap';\r\nimport NumberInput from \"../inputs/NumberInput\";\r\nimport TextInput from \"../inputs/TextInput\";\r\n\r\nexport default class OutputGenView extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            pdf_modal: false,\r\n            running: false,\r\n            selectedIdx: 0,\r\n            checked: SingleOutput.funcNames.map((x,i) => {return true}), //return i<7\r\n            progress: 0\r\n        };\r\n        this.toggle = this.toggle.bind(this);\r\n        this.toggleChecked = this.toggleChecked.bind(this);\r\n        this.downloadOne = this.downloadOne.bind(this);\r\n        this.downloadSelected = this.downloadSelected.bind(this);\r\n        this.checkAll = this.checkAll.bind(this);\r\n        this.checkNone = this.checkNone.bind(this);\r\n        this.updateBaseSize = this.updateBaseSize.bind(this);\r\n        this.updateTitleSize = this.updateTitleSize.bind(this);\r\n        this.updateFooter = this.updateFooter.bind(this);\r\n        this.onTLChange = this.onTLChange.bind(this);\r\n        this.onTRChange = this.onTRChange.bind(this);\r\n        this.onBLChange = this.onBLChange.bind(this);\r\n        this.downloadAll = this.downloadAll.bind(this);\r\n        this.onBRChange = this.onBRChange.bind(this);\r\n    }\r\n\r\n    toggle() {\r\n        this.setState({\r\n            pdf_modal: !this.state.pdf_modal\r\n        });\r\n    }\r\n\r\n\r\n    downloadOne() {\r\n      if (this.props.data.errors > 0) alert(\"Errors in schedule!  This may not be a good output\");\r\n      if (this.state.running) return;\r\n      let z = new SingleOutput(this.props.data, this.props.save);\r\n      this.setState({running: true});\r\n      setTimeout(() => {\r\n        z.get(this.state.selectedIdx);\r\n        this.setState({running: false});\r\n      }, 50);\r\n    }\r\n\r\n    downloadSelected() {\r\n      if (this.props.data.errors > 0) alert(\"Errors in schedule!  This may not be a good output\");\r\n      if (this.state.running) return;\r\n      let N = this.state.checked.filter((x)=>x).length;\r\n      if (N === 0) return;\r\n      if (N === 1) {\r\n        let z = new SingleOutput(this.props.data, this.props.save);\r\n        this.setState({running: true});\r\n        let toDo = 0;\r\n        for (let i = 0; i < this.state.checked.length; i++)\r\n          if (this.state.checked[i]) {\r\n            toDo = i;\r\n            break;\r\n          }\r\n        setTimeout(() => {\r\n          z.get(toDo);\r\n          this.setState({running: false});\r\n        }, 50);\r\n      } else {\r\n        let z = new Zipper(this.props.data, this.props.save);\r\n        this.setState({running: true});\r\n        console.log(this.state.checked);\r\n        setTimeout(() => {\r\n            this.state.checked.forEach((x,i) => {if (x) z.ProcessGiven(i)});\r\n            z.DownloadZip();\r\n            this.setState({running: false});\r\n        }, 50);\r\n      }\r\n    }\r\n\r\n    downloadAll() {\r\n        if (this.props.data.errors > 0) alert(\"Errors in schedule!  This may not be a good output\");\r\n        if (this.state.running) return;\r\n        let z = new Zipper(this.props.data, this.props.save);\r\n        this.setState({running: true});\r\n        setTimeout(() => {\r\n            while (z.FilesLeft > 0)\r\n                z.ProcessNext();\r\n            z.DownloadZip();\r\n            this.setState({running: false});\r\n        }, 50);\r\n    }\r\n\r\n    checkAll() {\r\n      let C = this.state.checked.map((x) => {return true;});\r\n      this.setState({checked: C});\r\n    }\r\n\r\n    checkNone() {\r\n      let C = this.state.checked.map((x) => {return false;});\r\n      this.setState({checked: C});\r\n    }\r\n\r\n    toggleChecked(idx) {\r\n      let C = this.state.checked;\r\n      C[idx] = !C[idx];\r\n      this.setState({checked: C});\r\n    }\r\n\r\n    updateTitleSize(value) {\r\n        let E = this.props.data;\r\n        E.pageFormat.titleFontSize = value;\r\n        this.props.handleChange(E);\r\n    }\r\n\r\n    updateFooter(value) {\r\n        let E = this.props.data;\r\n        E.pageFormat.footerText = value;\r\n        this.props.handleChange(E);\r\n    }\r\n\r\n    updateBaseSize(value) {\r\n        let E = this.props.data;\r\n        E.pageFormat.baseFontSize = value;\r\n        this.props.handleChange(E);\r\n    }\r\n\r\n    onTLChange(e, f) {\r\n        let file = f || e.target.files[0];\r\n        let reader = new FileReader();\r\n        reader.onload = (e) => {\r\n            let E = this.props.data;\r\n            E.pageFormat.logoTopLeft = reader.result;\r\n            this.props.handleChange(E);\r\n        };\r\n        reader.readAsDataURL(file);\r\n    }\r\n\r\n    onTRChange(e, f) {\r\n        let file = f || e.target.files[0];\r\n        let reader = new FileReader();\r\n        reader.onload = (e) => {\r\n            let E = this.props.data;\r\n            E.pageFormat.logoTopRight = reader.result;\r\n            this.props.handleChange(E);\r\n        };\r\n        reader.readAsDataURL(file);\r\n    }\r\n\r\n    onBLChange(e, f) {\r\n        let file = f || e.target.files[0];\r\n        let reader = new FileReader();\r\n        reader.onload = (e) => {\r\n            let E = this.props.data;\r\n            E.pageFormat.logoBotLeft = reader.result;\r\n            this.props.handleChange(E);\r\n        };\r\n        reader.readAsDataURL(file);\r\n    }\r\n\r\n    onBRChange(e, f) {\r\n        let file = f || e.target.files[0];\r\n        let reader = new FileReader();\r\n        reader.onload = (e) => {\r\n            let E = this.props.data;\r\n            E.pageFormat.logoBotRight = reader.result;\r\n            this.props.handleChange(E);\r\n        };\r\n        reader.readAsDataURL(file);\r\n    }\r\n\r\n\r\n    // To add image uploading...\r\n    // https://codepen.io/hartzis/pen/VvNGZP\r\n\r\n    render() {\r\n        return (\r\n            <Container>\r\n                <Modal isOpen={this.state.pdf_modal} toggle={this.toggle}>\r\n                    <ModalHeader toggle={this.toggle}>Edit PDF Format</ModalHeader>\r\n                    <ModalBody>\r\n                        <Container>\r\n                            <Row>\r\n                                <Col><label>\r\n                                    <img alt={\"Top Left Logo\"} src={this.props.data.pageFormat.logoTopLeft}\r\n                                         height={100}/>\r\n                                    <input type=\"file\" accept=\"image/*\" hidden ref=\"input\" onChange={this.onTLChange}/>\r\n                                </label></Col>\r\n                                <Col><label>\r\n                                    <img alt={\"Top Right Logo\"} src={this.props.data.pageFormat.logoTopRight}\r\n                                         height={100}/>\r\n                                    <input type=\"file\" accept=\"image/*\" hidden ref=\"input\" onChange={this.onTRChange}/>\r\n                                </label></Col>\r\n                            </Row>\r\n                            <br/>\r\n                            <NumberInput min={4} value={this.props.data.pageFormat.titleFontSize}\r\n                                         label={\"Title font size\"} onChange={this.updateTitleSize}/>\r\n                            <br/>\r\n                            <NumberInput min={2} value={this.props.data.pageFormat.baseFontSize}\r\n                                         label={\"Base font size\"} onChange={this.updateBaseSize}/>\r\n                            <br/>\r\n                            <Row>\r\n                                <Col><label>\r\n                                    <img alt={\"Bottom Left Logo\"} src={this.props.data.pageFormat.logoBotLeft}\r\n                                         height={100}/>\r\n                                    <input type=\"file\" accept=\"image/*\" hidden ref=\"input\" onChange={this.onBLChange}/>\r\n                                </label></Col>\r\n                                <Col><label>\r\n                                    <img alt={\"Bottom Right Logo\"} src={this.props.data.pageFormat.logoBotRight}\r\n                                         height={100}/>\r\n                                    <input type=\"file\" accept=\"image/*\" hidden ref=\"input\" onChange={this.onBRChange}/>\r\n                                </label></Col>\r\n                            </Row>\r\n                            <br/>\r\n                            <TextInput value={this.props.data.pageFormat.footerText} label={\"Footer Text\"}\r\n                                       onChange={this.updateFooter}/>\r\n                        </Container>\r\n                        <br/>\r\n                    </ModalBody>\r\n                    <ModalFooter>\r\n                        <Button color=\"secondary\" onClick={this.toggle}>Close</Button>\r\n                    </ModalFooter>\r\n                </Modal>\r\n\r\n                <strong>Outputs</strong>\r\n                <hr/>\r\n                <Row>\r\n                    <Col lg=\"12\">\r\n                      <Button color=\"primary\" block onClick={this.toggle}>Edit PDF format...</Button>\r\n                      {/*<br/>\r\n                      <Card body>\r\n                        <CardTitle>All outputs</CardTitle>\r\n                        <Button color={this.state.running ? \"secondary\" : \"success\"}\r\n                                onClick={this.downloadAll}>{this.state.running ? \"Please wait...\" : \"Download all!\"}</Button>\r\n                      </Card>\r\n                      <br/>\r\n                      <Card body>\r\n                        <CardTitle>Single output</CardTitle>\r\n                        <ButtonGroup>\r\n                        <UncontrolledDropdown>\r\n                          <DropdownToggle caret>\r\n                            {SingleOutput.funcNames[this.state.selectedIdx]}\r\n                          </DropdownToggle>\r\n                          <DropdownMenu>\r\n                            {SingleOutput.funcNames.map((x,i) => {\r\n                              return <DropdownItem key={i} onClick={() => {this.setState({selectedIdx: i})}}>{x}</DropdownItem>;\r\n                            })}\r\n                          </DropdownMenu>\r\n                        </UncontrolledDropdown>\r\n                        <Button color={this.state.running ? \"secondary\" : \"success\"}\r\n                                onClick={this.downloadOne}>{this.state.running ? \"Please wait...\" : \"Download one\"}</Button>\r\n                                </ButtonGroup>\r\n                      </Card>\r\n                      <br/>*/}\r\n                      <Card body>\r\n                        <Form>\r\n                          <FormGroup row>\r\n                          {SingleOutput.funcNames.map((x,i) => {\r\n                            return (\r\n                              <Col sm={{ size: 3 }} key={i}>\r\n                              <FormGroup check>\r\n                                <Label check>\r\n                                  <Input type=\"checkbox\" id=\"checkbox2\" checked={this.state.checked[i]} onChange={() => this.toggleChecked(i)}/>{' '}\r\n                                  {SingleOutput.funcNames[i]}\r\n                                </Label>\r\n                              </FormGroup>\r\n                              </Col>\r\n                            );\r\n                          })}\r\n                          </FormGroup>\r\n                        </Form>\r\n                        <ButtonGroup>\r\n                          <Button onClick={this.checkAll} color=\"info\">All</Button>\r\n                          <Button onClick={this.checkNone} color=\"warning\">None</Button>\r\n                        </ButtonGroup>\r\n                        <br/>\r\n                        <Button color={this.state.running ? \"secondary\" : \"success\"}\r\n                                onClick={this.downloadSelected}>{this.state.running ? \"Please wait...\" : \"Download these\"}</Button>\r\n                      </Card>\r\n                    </Col>\r\n                </Row>\r\n                <br/>\r\n                {/*<Row>*/}\r\n                {/*<Col lg=\"6\">*/}\r\n                {/*<Card body>*/}\r\n                {/*<CardTitle>CSV only</CardTitle>*/}\r\n                {/*<CardText>Export to CSV format used by the FLL scoring system</CardText>*/}\r\n                {/*<Button color=\"success\" onClick={this.generateCSV}>Go!</Button>*/}\r\n                {/*</Card>*/}\r\n                {/*</Col>*/}\r\n                {/*<Col lg=\"6\">*/}\r\n                {/*<Card body>*/}\r\n                {/*<CardTitle>PDF only</CardTitle>*/}\r\n                {/*<CardText>Export ready-to-print formatted PDFs</CardText>*/}\r\n                {/*<Button color=\"primary\" block onClick={this.toggle}>Edit format...</Button>*/}\r\n                {/*<Button color=\"success\" block onClick={this.generatePDF}>Go!</Button>*/}\r\n                {/*</Card>*/}\r\n                {/*</Col>*/}\r\n                {/*</Row>*/}\r\n            </Container>\r\n        );\r\n    }\r\n}\r\n","import React from 'react';\r\nimport SingleScheduleView from \"./SingleScheduleView\";\r\nimport IndivScheduleView from \"./IndivScheduleView\";\r\nimport VolunteerView from \"./VolunteerView\";\r\nimport SponsorView from \"./SponsorView\";\r\nimport OutputGenView from \"./OutputGenView\";\r\n\r\nimport {TYPES} from \"../api/SessionTypes\";\r\n\r\nimport {Container, Row, Col, Nav, NavItem, NavLink, TabContent, TabPane} from 'reactstrap';\r\nimport SessionForm from \"./SessionForm\";\r\nimport BasicsForm from \"./BasicsForm\";\r\nimport TeamList from '../inputs/TeamList';\r\nimport ToggleButton from 'react-toggle-button';\r\n\r\nexport default class FullScheduleView extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            activeTab: 'sessions',\r\n            editable: false\r\n        }\r\n\r\n        this.getItems = this.getItems.bind(this);\r\n        this.onSwap = this.onSwap.bind(this);\r\n        this.updatePDFSettings = this.updatePDFSettings.bind(this);\r\n        this.updateVolunteers = this.updateVolunteers.bind(this);\r\n        this.updateSponsors = this.updateSponsors.bind(this);\r\n        this.toggleEditable = this.toggleEditable.bind(this);\r\n    }\r\n\r\n    onSwap(sID, a, b) {\r\n        let E = this.props.event;\r\n        let err = E.swapTeams(sID, a.id, b.id);\r\n        if (err) alert(err);\r\n        else this.props.onSwap(E);\r\n    }\r\n\r\n    getItems() {\r\n        return this.props.event.sessions;\r\n    }\r\n\r\n    toggle(tab) {\r\n        if (this.state.activeTab !== tab) {\r\n            this.setState({\r\n                activeTab: tab\r\n            });\r\n        }\r\n    }\r\n\r\n    updateSponsors(T) {\r\n        let E = this.props.event;\r\n        E.sponsors = T;\r\n        this.props.onChange(E);\r\n    }\r\n\r\n    updateVolunteers(V) {\r\n        let E = this.props.event;\r\n        E.volunteers = V;\r\n        this.props.onChange(E);\r\n    }\r\n\r\n    //TODO make cosmetic\r\n    updateDays(T) {\r\n\r\n    }\r\n\r\n    //TODO make cosmetic\r\n    updateTeams(T) {\r\n        let E = this.props.event;\r\n        E.teams = T;\r\n        this.props.onChange(E);\r\n        console.log(this.props.event);\r\n    }\r\n\r\n    //TODO make cosmetic\r\n    updateSessions(S) {\r\n        let E = this.props.event;\r\n        for (let i = 0; i < E.sessions.length; i++) {\r\n            if (E.sessions[i].id === S.id) {\r\n                E.sessions[i] = S;\r\n                this.props.onChange(E);\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\n    updatePDFSettings(S) {\r\n        let E = this.props.event;\r\n        E.pageFormat = S.pageFormat;\r\n        this.props.onChange(E);\r\n    }\r\n\r\n    toggleEditable() {\r\n        this.setState({editable: !this.state.editable});\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <Container>\r\n                <Nav pills>\r\n                    {/*<NavItem><NavLink>{this.props.event.errors} error{this.props.event.errors !== 1 && \"s\"}</NavLink></NavItem>*/}\r\n                    {/*<NavItem>*/}\r\n                    {/*<NavLink href=\"#\" className={(this.state.activeTab === 'display') ? \"active\" : \"\"}*/}\r\n                    {/*onClick={() => { this.toggle('display')}}>*/}\r\n                    {/*Display Parameters*/}\r\n                    {/*</NavLink>*/}\r\n                    {/*</NavItem>*/}\r\n                    <NavItem>\r\n                        <NavLink href=\"#\" className={(this.state.activeTab === 'sessions') ? \"active\" : \"\"}\r\n                                 onClick={() => {\r\n                                     this.toggle('sessions')\r\n                                 }}>\r\n                            Session schedules\r\n                        </NavLink>\r\n                    </NavItem>\r\n                    <NavItem>\r\n                        <NavLink href=\"#\" className={(this.state.activeTab === 'indiv') ? \"active\" : \"\"}\r\n                                 onClick={() => {\r\n                                     this.toggle('indiv')\r\n                                 }}>\r\n                            Individual schedules\r\n                        </NavLink>\r\n                    </NavItem>\r\n                    <NavItem>\r\n                        <NavLink href=\"#\" className={(this.state.activeTab === 'vols') ? \"active\" : \"\"}\r\n                                 onClick={() => {\r\n                                     this.toggle('vols')\r\n                                 }}>\r\n                            Volunteers\r\n                        </NavLink>\r\n                    </NavItem>\r\n                    <NavItem>\r\n                        <NavLink href=\"#\" className={(this.state.activeTab === 'sponsors') ? \"active\" : \"\"}\r\n                                 onClick={() => {\r\n                                     this.toggle('sponsors')\r\n                                 }}>\r\n                            Sponsors\r\n                        </NavLink>\r\n                    </NavItem>\r\n                    <NavItem>\r\n                        <NavLink href=\"#\" className={(this.state.activeTab === 'outputs') ? \"active\" : \"\"}\r\n                                 onClick={() => {\r\n                                     this.toggle('outputs')\r\n                                 }}>\r\n                            Generate Outputs\r\n                        </NavLink>\r\n                    </NavItem>\r\n                    {(this.props.event.errors === 0 && this.state.activeTab === 'sessions') ? <NavItem>\r\n                        <div onClick={this.toggleEditable}>\r\n                            <small className=\"not-text\">Editable</small>\r\n                            &nbsp;\r\n                            <ToggleButton value={this.state.editable} onToggle={this.toggleEditable}/></div>\r\n                    </NavItem> : \"\"}\r\n\r\n                </Nav>\r\n                <TabContent activeTab={this.state.activeTab}>\r\n                    <TabPane tabId='display'>\r\n                        &nbsp;\r\n                        <BasicsForm event={this.props.event} cosmetic onChange={this.updateDays}/>\r\n                        {this.props.event.sessions.map(S =>\r\n                            <SessionForm key={S.id} cosmetic session={S} onChange={this.updateSessions}/>)}\r\n                        <TeamList cosmetic teams={this.props.event.teams} onChange={this.updateTeams}/>\r\n                    </TabPane>\r\n                    <TabPane tabId='sessions'>\r\n                        &nbsp;\r\n                        <Row>\r\n                            {this.getItems().filter(x => x.type !== TYPES.BREAK)\r\n                                .sort((a, b) => {\r\n                                    return a.type.priority - b.type.priority\r\n                                })\r\n                                .map(x => {\r\n                                    return (\r\n                                        <Col sm=\"12\" md=\"6\" key={x.id}>\r\n                                            <SingleScheduleView id={x.id}\r\n                                                                data={this.props.event.getSessionDataGrid(x.id)}\r\n                                                                editable={this.state.editable} onSwap={this.onSwap}\r\n                                                                session={x}/>\r\n                                        </Col>);\r\n                                })}\r\n                        </Row>\r\n                    </TabPane>\r\n                    <TabPane tabId='indiv'>\r\n                        <IndivScheduleView data={this.props.event.getIndivDataGrid()}/>\r\n                    </TabPane>\r\n                    <TabPane tabId='vols'>\r\n                        <VolunteerView data={this.props.event.volunteers} onChange={this.updateVolunteers}/>\r\n                    </TabPane>\r\n                    <TabPane tabId='sponsors'>\r\n                        <SponsorView data={this.props.event} handleChange={this.updateSponsors}/>\r\n                    </TabPane>\r\n                    <TabPane tabId='outputs'>\r\n                        <OutputGenView data={this.props.event} save={this.props.save}\r\n                                       handleChange={this.updatePDFSettings}/>\r\n                    </TabPane>\r\n                </TabContent>\r\n            </Container>\r\n        );\r\n    }\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nimport { DateTime } from \"./api/DateTime\";\r\nimport { EventParams } from \"./api/EventParams\";\r\nimport DetailView from \"./ui/DetailView\";\r\nimport InitForm from \"./ui/InitForm\";\r\nimport TopBar from \"./ui/TopBar\";\r\n\r\nimport { Scheduler } from \"./scheduling/Scheduler\";\r\n\r\nimport { freeze, saveToFile_json, thaw } from \"./scheduling/utilities\";\r\n\r\nimport { Button, Col, Container, Jumbotron, Row } from \"reactstrap\";\r\nimport DayScheduleView from \"./ui/DayScheduleView\";\r\nimport FullScheduleView from \"./ui/FullScheduleView\";\r\n\r\nimport \"bootstrap/dist/css/bootstrap.css\";\r\nimport \"react-datasheet/lib/react-datasheet.css\";\r\nimport \"./App.css\";\r\nimport \"./react-datagrid-custom.css\";\r\n\r\nconst VERSION = \"23.0.0\";\r\n\r\n// Should set this up as github.io page under the firstaustralia repo\r\n// That way github manages load balancing and doesn't crash\r\n\r\nclass App extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      display: \"Initialise\",\r\n      version: VERSION,\r\n      eventParams: new EventParams(\r\n        VERSION,\r\n        \"2023 FLL Competition\",\r\n        24,\r\n        new DateTime(8.5 * 60),\r\n        new DateTime(17 * 60)\r\n      ),\r\n      processing: false,\r\n    };\r\n    this.initSchedule = this.initSchedule.bind(this);\r\n    this.handleScheduleChange = this.handleScheduleChange.bind(this);\r\n    this.customise = this.customise.bind(this);\r\n    this.generate = this.generate.bind(this);\r\n    this.onSave = this.onSave.bind(this);\r\n    this.onLoad = this.onLoad.bind(this);\r\n    this.updatePDFSettings = this.updatePDFSettings.bind(this);\r\n    this.update = this.update.bind(this);\r\n  }\r\n\r\n  initSchedule(initState) {\r\n    let E = new EventParams(\r\n      this.state.version,\r\n      initState.title,\r\n      initState.nTeams,\r\n      initState.startTime,\r\n      initState.endTime\r\n    );\r\n\r\n    this.setState({\r\n      eventParams: E,\r\n    });\r\n  }\r\n\r\n  handleScheduleChange(E) {\r\n    this.setState({\r\n      eventParams: E,\r\n    });\r\n    // I don't love this way of doing it...\r\n    let S = new Scheduler(E);\r\n    S.buildAllTables();\r\n  }\r\n\r\n  customise() {\r\n    this.state.eventParams.populateFLL();\r\n    let S = new Scheduler(this.state.eventParams);\r\n    S.buildAllTables();\r\n    this.setState({ display: \"Customise\" });\r\n    window.scrollTo(0, 0);\r\n  }\r\n\r\n  generate() {\r\n    console.log(\"GENERATING\");\r\n    this.setState({ processing: true });\r\n    setTimeout(() => {\r\n      let S = new Scheduler(this.state.eventParams);\r\n      let count = 500;\r\n      do {\r\n        S.buildAllTables();\r\n        S.fillAllTables();\r\n        S.evaluate();\r\n      } while (this.state.eventParams.errors > 0 && count-- > 0);\r\n      if (this.state.eventParams.errors > 0)\r\n        alert(\"Schedule generated with errors! Please adjust parameters\");\r\n      this.setState({ display: \"Review\" });\r\n      this.state.eventParams.buildVolunteerSheet();\r\n      this.setState({ processing: false });\r\n      window.scrollTo(0, 0);\r\n    }, 50);\r\n  }\r\n\r\n  onSave(fname, zip) {\r\n    let filename = fname;\r\n    let json_str = JSON.stringify(this.state, freeze);\r\n    if (!filename) filename = this.state.eventParams.title.replace(/ /g, \"_\");\r\n    if (zip) {\r\n      try {\r\n        zip.file(\r\n          filename + \".schedule\",\r\n          new Blob([json_str], { type: \"application/json\" })\r\n        );\r\n      } catch (err) {\r\n        alert(\"Error saving: \" + filename + \".csv ; \" + err.message);\r\n      }\r\n    } else {\r\n      saveToFile_json(filename + \".schedule\", json_str);\r\n    }\r\n    // let json_str = JSON.stringify(this.state.eventParams,freeze);\r\n    // Write to file\r\n  }\r\n\r\n  onLoad(json_str) {\r\n    let E = JSON.parse(json_str, thaw);\r\n    console.log(E);\r\n    // let disp = 'Customise';\r\n    // if (E.schedule !== null) disp = 'Review';\r\n    this.setState(E);\r\n  }\r\n\r\n  updatePDFSettings(S) {\r\n    let E = this.state.eventParams;\r\n    E.titleFontSize = S.titleFontSize;\r\n    E.baseFontSize = S.baseFontSize;\r\n    E.logoTopLeft = S.logoTopLeft;\r\n    E.logoTopRight = S.logoTopRight;\r\n    E.logoBotLeft = S.logoBotLeft;\r\n    E.logoBotRight = S.logoBotRight;\r\n    E.footerText = S.footerText;\r\n    this.setState({ eventParams: E });\r\n  }\r\n\r\n  update(event) {\r\n    // let E = this.state.eventParams;\r\n    // E.teams = event.teams;\r\n    // for (let i = 0; i < E.sessions.length; i++) {\r\n    //     E.sessions = event.sessions;\r\n    // }\r\n    // console.log(this.state.eventParams.sessions[6].schedule[0].teams.map(x => this.state.eventParams.getTeam(x).number));\r\n    // console.log(event.sessions[6].schedule[0].teams.map(x => event.getTeam(x).number));\r\n    this.setState({ eventParams: event });\r\n  }\r\n\r\n  render() {\r\n    let mainWindow = <h1>An error occurred</h1>;\r\n    if (this.state.display === \"Initialise\") {\r\n      mainWindow = (\r\n        <Jumbotron>\r\n          <h1 className=\"App-intro\">Basic setup</h1>\r\n          <InitForm\r\n            event={this.state.eventParams}\r\n            onChange={this.handleScheduleChange}\r\n          />\r\n          <Button color=\"warning\" onClick={this.customise}>\r\n            Customise\r\n          </Button>\r\n          &nbsp;\r\n          <Button\r\n            color=\"success\"\r\n            onClick={() => {\r\n              this.state.eventParams.populateFLL();\r\n              this.generate();\r\n            }}\r\n          >\r\n            {this.state.processing ? \"Generating...\" : \"Generate\"}\r\n          </Button>\r\n        </Jumbotron>\r\n      );\r\n    } else if (this.state.display === \"Customise\") {\r\n      mainWindow = (\r\n        <Row>\r\n          <Col lg=\"3\">\r\n            &nbsp;\r\n            <br />\r\n            <Button color=\"success\" onClick={this.generate}>\r\n              {this.state.processing\r\n                ? \"Generating...\"\r\n                : \"Run Schedule Generation\"}\r\n            </Button>\r\n            <br />\r\n            &nbsp;\r\n            <DayScheduleView event={this.state.eventParams} />\r\n          </Col>\r\n          <Col lg=\"9\">\r\n            <Jumbotron>\r\n              <DetailView\r\n                onChange={this.handleScheduleChange}\r\n                event={this.state.eventParams}\r\n              />\r\n            </Jumbotron>\r\n          </Col>\r\n        </Row>\r\n      );\r\n    } else if (this.state.display === \"Review\") {\r\n      mainWindow = (\r\n        <Row>\r\n          <Col lg=\"3\">\r\n            &nbsp;\r\n            <br />\r\n            <Button\r\n              color=\"warning\"\r\n              onClick={() => this.setState({ display: \"Customise\" })}\r\n            >\r\n              Change parameters\r\n            </Button>\r\n            &nbsp;\r\n            <br />\r\n            &nbsp;\r\n            <DayScheduleView event={this.state.eventParams} />\r\n          </Col>\r\n          <Col lg=\"9\">\r\n            <Jumbotron>\r\n              <FullScheduleView\r\n                event={this.state.eventParams}\r\n                save={this.onSave}\r\n                onChange={this.updatePDFSettings}\r\n                onSwap={this.update}\r\n              />\r\n            </Jumbotron>\r\n          </Col>\r\n        </Row>\r\n      );\r\n    }\r\n    return (\r\n      <Container fluid className=\"App\">\r\n        <TopBar\r\n          version={this.state.version}\r\n          onSave={this.onSave}\r\n          onLoad={this.onLoad}\r\n        />\r\n        {mainWindow}\r\n      </Container>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","// In production, we register a service worker to serve assets from local cache.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\r\n// cached resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\r\n// This link also includes instructions on opting out of this behavior.\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport default function register() {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Lets check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://goo.gl/SC7cgQ'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not local host. Just register service worker\r\n        registerValidSW(swUrl);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the old content will have been purged and\r\n              // the fresh content will have been added to the cache.\r\n              // It's the perfect time to display a \"New content is\r\n              // available; please refresh.\" message in your web app.\r\n              console.log('New content is available; please refresh.');\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      if (\r\n        response.status === 404 ||\r\n        response.headers.get('content-type').indexOf('javascript') === -1\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport registerServiceWorker from './registerServiceWorker';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\nregisterServiceWorker();\r\n"],"sourceRoot":""}